<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.51" />
    <meta name="theme" content="VuePress Theme Hope" />
    <meta property="og:url" content="https://mister-hope.github.io/huluhutublog/pages/DB/MyBatis/2-MyBatis%E4%BD%BF%E7%94%A8%E8%AF%A6%E8%A7%A3.html"><meta property="og:site_name" content="huluhutublog"><meta property="og:title" content="Mybatisä½¿ç”¨è¯¦è§£"><meta property="og:type" content="article"><meta property="og:locale" content="zh-CN"><link rel="icon" href="/huluhutublog/favicon.ico"><link rel="icon" href="/huluhutublog/assets/icon/chrome-mask-512.png" type="image/png" sizes="512x512"><link rel="icon" href="/huluhutublog/assets/icon/chrome-mask-192.png" type="image/png" sizes="192x192"><link rel="icon" href="/huluhutublog/assets/icon/chrome-512.png" type="image/png" sizes="512x512"><link rel="icon" href="/huluhutublog/assets/icon/chrome-192.png" type="image/png" sizes="192x192"><link rel="manifest" href="/huluhutublog/manifest.webmanifest" crossorigin="use-credentials"><meta name="theme-color" content="#46bd87"><link rel="apple-touch-icon" href="/huluhutublog/assets/icon/apple-icon-152.png"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="msapplication-TileImage" content="/huluhutublog/assets/icon/ms-icon-144.png"><meta name="msapplication-TileColor" content="#ffffff"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover"><title>Mybatisä½¿ç”¨è¯¦è§£ | huluhutublog</title><meta name="description" content="That is my Blog!!!">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d2025;
      }

      html,
      body {
        background-color: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.querySelector("html").setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="stylesheet" href="/huluhutublog/assets/style.dc69c01e.css">
    <link rel="modulepreload" href="/huluhutublog/assets/app.0662e65c.js"><link rel="modulepreload" href="/huluhutublog/assets/2-MyBatisä½¿ç”¨è¯¦è§£.html.a43f003c.js"><link rel="modulepreload" href="/huluhutublog/assets/_plugin-vue_export-helper.cdc0426e.js"><link rel="modulepreload" href="/huluhutublog/assets/2-MyBatisä½¿ç”¨è¯¦è§£.html.f307af13.js">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="skip-link sr-only">Skip to content</a><!--]--><div class="theme-container has-toc"><!--[--><!--[--><header class="navbar"><div class="navbar-left"><button class="toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!----><a href="/huluhutublog/" class="brand"><img class="logo" src="/huluhutublog/logo.svg" alt="huluhutublog"><!----><span class="site-name hide-in-pad">huluhutublog</span></a><!----></div><div class="navbar-center"><!----><nav class="nav-links"><div class="nav-item hide-in-mobile"><a href="/huluhutublog/" class="nav-link" aria-label="HULUHUTU"><span class="icon iconfont icon-home"></span>HULUHUTU<!----></a></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="é¢è¯•"><span class="title"><span class="icon iconfont icon-note"></span>é¢è¯•</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/huluhutublog/pages/Interviews/Java/" class="nav-link" aria-label="Java"><!---->Java<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="è®¡ç®—æœºåŸºç¡€"><span class="title"><span class="icon iconfont icon-note"></span>è®¡ç®—æœºåŸºç¡€</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/huluhutublog/pages/FundamentalsOfComputerScience/DataStructuresAndAlgorithms/" class="nav-link" aria-label="æ•°æ®ç»“æ„ä¸ç®—æ³•"><!---->æ•°æ®ç»“æ„ä¸ç®—æ³•<!----></a></li><li class="dropdown-item"><a href="/huluhutublog/pages/FundamentalsOfComputerScience/ComputerNetwork/" class="nav-link" aria-label="è®¡ç®—æœºç½‘ç»œ"><!---->è®¡ç®—æœºç½‘ç»œ<!----></a></li><li class="dropdown-item"><a href="/huluhutublog/pages/FundamentalsOfComputerScience/OperatingSystem/" class="nav-link" aria-label="æ“ä½œç³»ç»Ÿ"><!---->æ“ä½œç³»ç»Ÿ<!----></a></li><li class="dropdown-item"><a href="/huluhutublog/pages/FundamentalsOfComputerScience/PrinciplesOfComputerOrganization/" class="nav-link" aria-label="è®¡ç®—æœºç»„æˆåŸç†"><!---->è®¡ç®—æœºç»„æˆåŸç†<!----></a></li><li class="dropdown-item"><a href="/huluhutublog/pages/FundamentalsOfComputerScience/PrinciplesOfDatabase/" class="nav-link" aria-label="æ•°æ®åº“åŸç†"><!---->æ•°æ®åº“åŸç†<!----></a></li><li class="dropdown-item"><a href="/huluhutublog/pages/FundamentalsOfComputerScience/DesignPatterns/" class="nav-link" aria-label="è®¾è®¡æ¨¡å¼"><!---->è®¾è®¡æ¨¡å¼<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="Java"><span class="title"><span class="icon iconfont icon-note"></span>Java</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/huluhutublog/pages/Java/JavaBase/" class="nav-link" aria-label="JavaåŸºç¡€"><!---->JavaåŸºç¡€<!----></a></li><li class="dropdown-item"><a href="/huluhutublog/pages/Java/JavaIO/" class="nav-link" aria-label="JavaIO"><!---->JavaIO<!----></a></li><li class="dropdown-item"><a href="/huluhutublog/pages/Java/JavaCollection/" class="nav-link" aria-label="Javaé›†åˆ"><!---->Javaé›†åˆ<!----></a></li><li class="dropdown-item"><a href="/huluhutublog/pages/Java/JavaConcurrent/" class="nav-link" aria-label="Javaå¹¶å‘ç¼–ç¨‹"><!---->Javaå¹¶å‘ç¼–ç¨‹<!----></a></li><li class="dropdown-item"><a href="/huluhutublog/pages/Java/JVM/JVM.html" class="nav-link" aria-label="JVM"><!---->JVM<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="æ•°æ®åº“"><span class="title"><span class="icon iconfont icon-note"></span>æ•°æ®åº“</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/huluhutublog/pages/DB/MySQL/" class="nav-link" aria-label="MySQL"><!---->MySQL<!----></a></li><li class="dropdown-item"><a href="/huluhutublog/pages/DB/Redis/" class="nav-link" aria-label="Redis"><!---->Redis<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="Spring"><span class="title"><span class="icon iconfont icon-note"></span>Spring</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/huluhutublog/pages/Spring/Spring/" class="nav-link" aria-label="Spring"><!---->Spring<!----></a></li><li class="dropdown-item"><a href="/huluhutublog/pages/Spring/SpringMVC/" class="nav-link" aria-label="SpringMVC"><!---->SpringMVC<!----></a></li><li class="dropdown-item"><a href="/huluhutublog/pages/Spring/SpringBoot/" class="nav-link" aria-label="SpringBoot"><!---->SpringBoot<!----></a></li><li class="dropdown-item"><a href="/huluhutublog/pages/Spring/SpringCloud/" class="nav-link" aria-label="SpringCloud"><!---->SpringCloud<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="æ¶ˆæ¯é˜Ÿåˆ—"><span class="title"><span class="icon iconfont icon-note"></span>æ¶ˆæ¯é˜Ÿåˆ—</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/huluhutublog/pages/MQ/RabbitMQ/" class="nav-link" aria-label="RabbitMQ"><!---->RabbitMQ<!----></a></li><li class="dropdown-item"><a href="/huluhutublog/pages/MQ/RocketMQ/" class="nav-link" aria-label="RocketMQ"><!---->RocketMQ<!----></a></li><li class="dropdown-item"><a href="/huluhutublog/pages/MQ/Kafka/" class="nav-link" aria-label="Kafka"><!---->Kafka<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="åˆ†å¸ƒå¼"><span class="title"><span class="icon iconfont icon-note"></span>åˆ†å¸ƒå¼</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/huluhutublog/pages/Distributed/Artritecture/" class="nav-link" aria-label="æ¶æ„"><!---->æ¶æ„<!----></a></li><li class="dropdown-item"><a href="/huluhutublog/pages/Distributed/Distributed/" class="nav-link" aria-label="åˆ†å¸ƒå¼ç†è®º"><!---->åˆ†å¸ƒå¼ç†è®º<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="å¼€å‘å·¥å…·"><span class="title"><span class="icon iconfont icon-note"></span>å¼€å‘å·¥å…·</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/huluhutublog/pages/DevelopmentTools/Git/" class="nav-link" aria-label="Git"><!---->Git<!----></a></li><li class="dropdown-item"><a href="/huluhutublog/pages/DevelopmentTools/Linux/" class="nav-link" aria-label="Linux"><!---->Linux<!----></a></li><li class="dropdown-item"><a href="/huluhutublog/pages/DevelopmentTools/Docker/" class="nav-link" aria-label="Docker"><!---->Docker<!----></a></li><li class="dropdown-item"><a href="/huluhutublog/pages/DevelopmentTools/Maven/" class="nav-link" aria-label="Maven"><!---->Maven<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="é¡¹ç›®"><span class="title"><span class="icon iconfont icon-note"></span>é¡¹ç›®</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/huluhutublog/pages/Project/SwiftHome/" class="nav-link" aria-label="å¿«æ·åˆ°å®¶"><!---->å¿«æ·åˆ°å®¶<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="éƒ¨ç½²"><span class="title"><span class="icon iconfont icon-note"></span>éƒ¨ç½²</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/huluhutublog/pages/Deploy/Blog/" class="nav-link" aria-label="vuepress"><!---->vuepress<!----></a></li></ul></button></div></div></nav><!----></div><div class="navbar-right"><!----><!----><div class="nav-item"><a class="repo-link" href="https://github.com/vuepress-theme-hope/vuepress-theme-hope" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="nav-item hide-in-mobile"><button class="outlook-button" tabindex="-1" ariahidden="true"><svg xmlns="http://www.w3.org/2000/svg" class="icon outlook-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="outlook icon"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4 38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32 51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0 102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2 6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4 0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2 9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224 419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4 470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0 22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6 12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128 505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2 16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8 86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4 80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6 6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg><div class="outlook-dropdown"><!----></div></button></div><!----><!----><button class="toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span class="button-container"><span class="button-top"></span><span class="button-middle"></span><span class="button-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow left"></span></div><aside class="sidebar"><!--[--><!----><!--]--><ul class="sidebar-links"><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-note"></span><span class="title">MySQL</span><span class="arrow right"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-note"></span><span class="title">Redis</span><span class="arrow right"></span></button><!----></section></li></ul><!--[--><!----><!--]--></aside><!--[--><main class="page" id="main-content"><!--[--><!----><nav class="breadcrumb disable"></nav><div class="page-title"><h1><!---->Mybatisä½¿ç”¨è¯¦è§£</h1><div class="page-info"><span class="author-info" aria-label="ä½œè€…ğŸ–Š" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="author-item" href="https://mrhope.site" target="_blank" rel="noopener noreferrer">huluhutu</a></span><span property="author" content="huluhutu"></span></span><!----><!----><!----><!----><span class="reading-time-info" aria-label="é˜…è¯»æ—¶é—´âŒ›" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>å¤§çº¦ 53 åˆ†é’Ÿ</span><meta property="timeRequired" content="PT53M"></span></div><hr></div><div class="toc-place-holder"><aside id="toc"><div class="toc-header">æ­¤é¡µå†…å®¹</div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/huluhutublog/pages/DB/MyBatis/2-MyBatis%E4%BD%BF%E7%94%A8%E8%AF%A6%E8%A7%A3.html#_1-å…¥é—¨è¯¦è§£" class="router-link-active router-link-exact-active toc-link level2">1-å…¥é—¨è¯¦è§£</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/huluhutublog/pages/DB/MyBatis/2-MyBatis%E4%BD%BF%E7%94%A8%E8%AF%A6%E8%A7%A3.html#_1-å‡†å¤‡æ•°æ®åº“" class="router-link-active router-link-exact-active toc-link level3">1.å‡†å¤‡æ•°æ®åº“</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/huluhutublog/pages/DB/MyBatis/2-MyBatis%E4%BD%BF%E7%94%A8%E8%AF%A6%E8%A7%A3.html#_2-å¼•å…¥mybatisä¾èµ–" class="router-link-active router-link-exact-active toc-link level3">2.å¼•å…¥mybatisä¾èµ–</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/huluhutublog/pages/DB/MyBatis/2-MyBatis%E4%BD%BF%E7%94%A8%E8%AF%A6%E8%A7%A3.html#_3-é…ç½®mybatiså…¨å±€é…ç½®æ–‡ä»¶" class="router-link-active router-link-exact-active toc-link level3">3.é…ç½®mybatiså…¨å±€é…ç½®æ–‡ä»¶</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/huluhutublog/pages/DB/MyBatis/2-MyBatis%E4%BD%BF%E7%94%A8%E8%AF%A6%E8%A7%A3.html#_4-åˆ›å»ºmapper-xmlæ–‡ä»¶" class="router-link-active router-link-exact-active toc-link level3">4.åˆ›å»ºmapper xmlæ–‡ä»¶</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/huluhutublog/pages/DB/MyBatis/2-MyBatis%E4%BD%BF%E7%94%A8%E8%AF%A6%E8%A7%A3.html#_5-å¼•å…¥mapper-xmlæ–‡ä»¶" class="router-link-active router-link-exact-active toc-link level3">5.å¼•å…¥mapper xmlæ–‡ä»¶</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/huluhutublog/pages/DB/MyBatis/2-MyBatis%E4%BD%BF%E7%94%A8%E8%AF%A6%E8%A7%A3.html#_6-æ„å»ºsqlsessionfactoryå¯¹è±¡" class="router-link-active router-link-exact-active toc-link level3">6.æ„å»ºSqlSessionFactoryå¯¹è±¡</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/huluhutublog/pages/DB/MyBatis/2-MyBatis%E4%BD%BF%E7%94%A8%E8%AF%A6%E8%A7%A3.html#_7-æ„å»ºsqlsessionå¯¹è±¡" class="router-link-active router-link-exact-active toc-link level3">7.æ„å»ºSqlSessionå¯¹è±¡</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/huluhutublog/pages/DB/MyBatis/2-MyBatis%E4%BD%BF%E7%94%A8%E8%AF%A6%E8%A7%A3.html#_8-å¼•å…¥lombok-éå¿…é¡»" class="router-link-active router-link-exact-active toc-link level3">8.å¼•å…¥Lombokï¼ˆéå¿…é¡»ï¼‰</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/huluhutublog/pages/DB/MyBatis/2-MyBatis%E4%BD%BF%E7%94%A8%E8%AF%A6%E8%A7%A3.html#_9-å¼•å…¥logback-éå¿…é¡»" class="router-link-active router-link-exact-active toc-link level3">9.å¼•å…¥Logbackï¼ˆéå¿…é¡»ï¼‰</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/huluhutublog/pages/DB/MyBatis/2-MyBatis%E4%BD%BF%E7%94%A8%E8%AF%A6%E8%A7%A3.html#_10-æµ‹è¯•ç”¨ä¾‹" class="router-link-active router-link-exact-active toc-link level3">10.æµ‹è¯•ç”¨ä¾‹</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/huluhutublog/pages/DB/MyBatis/2-MyBatis%E4%BD%BF%E7%94%A8%E8%AF%A6%E8%A7%A3.html#_2-sqlsessionçš„sqlæ“ä½œ" class="router-link-active router-link-exact-active toc-link level2">2-SqlSessionçš„sqlæ“ä½œ</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/huluhutublog/pages/DB/MyBatis/2-MyBatis%E4%BD%BF%E7%94%A8%E8%AF%A6%E8%A7%A3.html#_1-sqlsessionå¸¸è§ç”¨æ³•" class="router-link-active router-link-exact-active toc-link level3">1.SqlSessionå¸¸è§ç”¨æ³•</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/huluhutublog/pages/DB/MyBatis/2-MyBatis%E4%BD%BF%E7%94%A8%E8%AF%A6%E8%A7%A3.html#_2-æ–°å¢æ“ä½œ" class="router-link-active router-link-exact-active toc-link level3">2.æ–°å¢æ“ä½œ</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/huluhutublog/pages/DB/MyBatis/2-MyBatis%E4%BD%BF%E7%94%A8%E8%AF%A6%E8%A7%A3.html#_3-æ›´æ–°æ“ä½œ" class="router-link-active router-link-exact-active toc-link level3">3.æ›´æ–°æ“ä½œ</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/huluhutublog/pages/DB/MyBatis/2-MyBatis%E4%BD%BF%E7%94%A8%E8%AF%A6%E8%A7%A3.html#_4-åˆ é™¤æ“ä½œ" class="router-link-active router-link-exact-active toc-link level3">4.åˆ é™¤æ“ä½œ</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/huluhutublog/pages/DB/MyBatis/2-MyBatis%E4%BD%BF%E7%94%A8%E8%AF%A6%E8%A7%A3.html#_5-æŸ¥è¯¢æ“ä½œ" class="router-link-active router-link-exact-active toc-link level3">5.æŸ¥è¯¢æ“ä½œ</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/huluhutublog/pages/DB/MyBatis/2-MyBatis%E4%BD%BF%E7%94%A8%E8%AF%A6%E8%A7%A3.html#_3-mapperæ¥å£çš„ä½¿ç”¨" class="router-link-active router-link-exact-active toc-link level2">3-Mapperæ¥å£çš„ä½¿ç”¨</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/huluhutublog/pages/DB/MyBatis/2-MyBatis%E4%BD%BF%E7%94%A8%E8%AF%A6%E8%A7%A3.html#_1-ä¸ºä»€ä¹ˆä½¿ç”¨mapperæ¥å£" class="router-link-active router-link-exact-active toc-link level3">1.ä¸ºä»€ä¹ˆä½¿ç”¨Mapperæ¥å£</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/huluhutublog/pages/DB/MyBatis/2-MyBatis%E4%BD%BF%E7%94%A8%E8%AF%A6%E8%A7%A3.html#_2-å¦‚ä½•ä½¿ç”¨mapperæ¥å£" class="router-link-active router-link-exact-active toc-link level3">2.å¦‚ä½•ä½¿ç”¨mapperæ¥å£</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/huluhutublog/pages/DB/MyBatis/2-MyBatis%E4%BD%BF%E7%94%A8%E8%AF%A6%E8%A7%A3.html#_3-æ¡ˆä¾‹" class="router-link-active router-link-exact-active toc-link level3">3.æ¡ˆä¾‹</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/huluhutublog/pages/DB/MyBatis/2-MyBatis%E4%BD%BF%E7%94%A8%E8%AF%A6%E8%A7%A3.html#_4-åˆ«åä½¿ç”¨è¯¦è§£" class="router-link-active router-link-exact-active toc-link level2">4-åˆ«åä½¿ç”¨è¯¦è§£</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/huluhutublog/pages/DB/MyBatis/2-MyBatis%E4%BD%BF%E7%94%A8%E8%AF%A6%E8%A7%A3.html#_1-å‡†å¤‡æ•°æ®åº“-1" class="router-link-active router-link-exact-active toc-link level3">1.å‡†å¤‡æ•°æ®åº“</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/huluhutublog/pages/DB/MyBatis/2-MyBatis%E4%BD%BF%E7%94%A8%E8%AF%A6%E8%A7%A3.html#_2-æ„å»ºå·¥ç¨‹chat03" class="router-link-active router-link-exact-active toc-link level3">2.æ„å»ºå·¥ç¨‹chat03</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/huluhutublog/pages/DB/MyBatis/2-MyBatis%E4%BD%BF%E7%94%A8%E8%AF%A6%E8%A7%A3.html#_3-ä¸ºä»€ä¹ˆè¦ç”¨åˆ«å" class="router-link-active router-link-exact-active toc-link level3">3.ä¸ºä»€ä¹ˆè¦ç”¨åˆ«å</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/huluhutublog/pages/DB/MyBatis/2-MyBatis%E4%BD%BF%E7%94%A8%E8%AF%A6%E8%A7%A3.html#_4-åˆ«åçš„ç”¨æ³•" class="router-link-active router-link-exact-active toc-link level3">4.åˆ«åçš„ç”¨æ³•</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/huluhutublog/pages/DB/MyBatis/2-MyBatis%E4%BD%BF%E7%94%A8%E8%AF%A6%E8%A7%A3.html#_5-åˆ«åä¸åŒºåˆ†å¤§å°å†™" class="router-link-active router-link-exact-active toc-link level3">5.åˆ«åä¸åŒºåˆ†å¤§å°å†™</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/huluhutublog/pages/DB/MyBatis/2-MyBatis%E4%BD%BF%E7%94%A8%E8%AF%A6%E8%A7%A3.html#_6-mybatiså†…ç½®çš„åˆ«å" class="router-link-active router-link-exact-active toc-link level3">6.mybatiså†…ç½®çš„åˆ«å</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/huluhutublog/pages/DB/MyBatis/2-MyBatis%E4%BD%BF%E7%94%A8%E8%AF%A6%E8%A7%A3.html#_7-åˆ«åçš„åŸç†" class="router-link-active router-link-exact-active toc-link level3">7.åˆ«åçš„åŸç†</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/huluhutublog/pages/DB/MyBatis/2-MyBatis%E4%BD%BF%E7%94%A8%E8%AF%A6%E8%A7%A3.html#_8-åˆ«åä½¿ç”¨å»ºè®®" class="router-link-active router-link-exact-active toc-link level3">8.åˆ«åä½¿ç”¨å»ºè®®</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/huluhutublog/pages/DB/MyBatis/2-MyBatis%E4%BD%BF%E7%94%A8%E8%AF%A6%E8%A7%A3.html#_5-å±æ€§é…ç½®è¯¦è§£" class="router-link-active router-link-exact-active toc-link level2">5-å±æ€§é…ç½®è¯¦è§£</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/huluhutublog/pages/DB/MyBatis/2-MyBatis%E4%BD%BF%E7%94%A8%E8%AF%A6%E8%A7%A3.html#æ–¹å¼1-propertyå…ƒç´ ä¸­å®šä¹‰å±æ€§" class="router-link-active router-link-exact-active toc-link level3">æ–¹å¼1ï¼špropertyå…ƒç´ ä¸­å®šä¹‰å±æ€§</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/huluhutublog/pages/DB/MyBatis/2-MyBatis%E4%BD%BF%E7%94%A8%E8%AF%A6%E8%A7%A3.html#æ–¹å¼2-resourceå¼•å…¥é…ç½®æ–‡ä»¶" class="router-link-active router-link-exact-active toc-link level3">æ–¹å¼2ï¼šresourceå¼•å…¥é…ç½®æ–‡ä»¶</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/huluhutublog/pages/DB/MyBatis/2-MyBatis%E4%BD%BF%E7%94%A8%E8%AF%A6%E8%A7%A3.html#æ–¹å¼3-urlçš„æ–¹å¼å¼•å…¥è¿œç¨‹é…ç½®æ–‡ä»¶" class="router-link-active router-link-exact-active toc-link level3">æ–¹å¼3ï¼šurlçš„æ–¹å¼å¼•å…¥è¿œç¨‹é…ç½®æ–‡ä»¶</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/huluhutublog/pages/DB/MyBatis/2-MyBatis%E4%BD%BF%E7%94%A8%E8%AF%A6%E8%A7%A3.html#_6-mybatiså¼•å…¥mapperçš„ä¸‰ç§æ–¹å¼" class="router-link-active router-link-exact-active toc-link level2">6-mybatiså¼•å…¥mapperçš„ä¸‰ç§æ–¹å¼</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/huluhutublog/pages/DB/MyBatis/2-MyBatis%E4%BD%BF%E7%94%A8%E8%AF%A6%E8%A7%A3.html#æ–¹å¼1-ä½¿ç”¨mapper-resouceå±æ€§æ³¨å†Œmapper-xmlæ–‡ä»¶" class="router-link-active router-link-exact-active toc-link level3">æ–¹å¼1ï¼šä½¿ç”¨mapper resouceå±æ€§æ³¨å†Œmapper xmlæ–‡ä»¶</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/huluhutublog/pages/DB/MyBatis/2-MyBatis%E4%BD%BF%E7%94%A8%E8%AF%A6%E8%A7%A3.html#æ–¹å¼2-ä½¿ç”¨mapper-classå±æ€§æ³¨å†Œmapperæ¥å£" class="router-link-active router-link-exact-active toc-link level3">æ–¹å¼2ï¼šä½¿ç”¨mapper classå±æ€§æ³¨å†ŒMapperæ¥å£</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/huluhutublog/pages/DB/MyBatis/2-MyBatis%E4%BD%BF%E7%94%A8%E8%AF%A6%E8%A7%A3.html#æ–¹å¼3-ä½¿ç”¨packageå…ƒç´ æ‰¹é‡æ³¨å†Œmapperæ¥å£" class="router-link-active router-link-exact-active toc-link level3">æ–¹å¼3ï¼šä½¿ç”¨packageå…ƒç´ æ‰¹é‡æ³¨å†ŒMapperæ¥å£</a></li><!----><!--]--></ul><!--]--></ul></div></aside></div><!----><div class="theme-hope-content"><h1 id="mybatisä½¿ç”¨è¯¦è§£" tabindex="-1"><a class="header-anchor" href="#mybatisä½¿ç”¨è¯¦è§£" aria-hidden="true">#</a> Mybatisä½¿ç”¨è¯¦è§£</h1><h2 id="_1-å…¥é—¨è¯¦è§£" tabindex="-1"><a class="header-anchor" href="#_1-å…¥é—¨è¯¦è§£" aria-hidden="true">#</a> 1-å…¥é—¨è¯¦è§£</h2><h3 id="_1-å‡†å¤‡æ•°æ®åº“" tabindex="-1"><a class="header-anchor" href="#_1-å‡†å¤‡æ•°æ®åº“" aria-hidden="true">#</a> 1.å‡†å¤‡æ•°æ®åº“</h3><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">/*åˆ›å»ºæ•°æ®åº“javacode2018*/</span>
<span class="token keyword">DROP</span> <span class="token keyword">DATABASE</span> <span class="token keyword">IF</span> <span class="token keyword">EXISTS</span> <span class="token identifier"><span class="token punctuation">`</span>javacode2018<span class="token punctuation">`</span></span><span class="token punctuation">;</span>
<span class="token keyword">CREATE</span> <span class="token keyword">DATABASE</span> <span class="token identifier"><span class="token punctuation">`</span>javacode2018<span class="token punctuation">`</span></span><span class="token punctuation">;</span>
<span class="token keyword">USE</span> <span class="token identifier"><span class="token punctuation">`</span>javacode2018<span class="token punctuation">`</span></span><span class="token punctuation">;</span>
<span class="token comment">/*åˆ›å»ºè¡¨ç»“æ„*/</span>
<span class="token keyword">DROP</span> <span class="token keyword">TABLE</span> <span class="token keyword">IF</span> <span class="token keyword">EXISTS</span> <span class="token identifier"><span class="token punctuation">`</span>t_user<span class="token punctuation">`</span></span><span class="token punctuation">;</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> t_user <span class="token punctuation">(</span>
  id <span class="token keyword">BIGINT</span> <span class="token keyword">AUTO_INCREMENT</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token keyword">COMMENT</span> <span class="token string">&#39;ä¸»é”®ï¼Œç”¨æˆ·idï¼Œè‡ªåŠ¨å¢é•¿&#39;</span><span class="token punctuation">,</span>
  <span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span> <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token string">&#39;&#39;</span> <span class="token keyword">COMMENT</span> <span class="token string">&#39;å§“å&#39;</span><span class="token punctuation">,</span>
  <span class="token identifier"><span class="token punctuation">`</span>age<span class="token punctuation">`</span></span> <span class="token keyword">SMALLINT</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token number">1</span> <span class="token keyword">COMMENT</span> <span class="token string">&#39;å¹´é¾„&#39;</span><span class="token punctuation">,</span>
  <span class="token identifier"><span class="token punctuation">`</span>salary<span class="token punctuation">`</span></span> <span class="token keyword">DECIMAL</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token number">0</span> <span class="token keyword">COMMENT</span> <span class="token string">&#39;è–ªæ°´&#39;</span><span class="token punctuation">,</span>
  <span class="token identifier"><span class="token punctuation">`</span>sex<span class="token punctuation">`</span></span> <span class="token keyword">TINYINT</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token number">0</span> <span class="token keyword">COMMENT</span> <span class="token string">&#39;æ€§åˆ«,0:æœªçŸ¥,1:ç”·,2:å¥³&#39;</span>
<span class="token punctuation">)</span> <span class="token keyword">COMMENT</span> <span class="token string">&#39;ç”¨æˆ·è¡¨&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> t_user<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-å¼•å…¥mybatisä¾èµ–" tabindex="-1"><a class="header-anchor" href="#_2-å¼•å…¥mybatisä¾èµ–" aria-hidden="true">#</a> 2.å¼•å…¥mybatisä¾èµ–</h3><p>æˆ‘ä»¬åœ¨ä¸Šä¸€ç¯‡æ–‡ç« <code>mybatis-series</code>é¡¹ç›®ä¸­åˆ›å»ºå¦å¤–ä¸€ä¸ªæ¨¡å—<code>chat02</code>ï¼Œå†å¼•å…¥ä¾èµ–</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- mybatisä¾èµ– --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.mybatis<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mybatis<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- mysql é©±åŠ¨ --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>mysql<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mysql-connector-java<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- lombokæ”¯æŒ --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.projectlombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>lombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- å•å…ƒæµ‹è¯•junitæ”¯æŒ --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>junit<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>junit<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- å¼•å…¥logbackç”¨æ¥è¾“å‡ºæ—¥å¿— --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>ch.qos.logback<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>logback-classic<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸Šé¢æˆ‘ä»¬å¼•å…¥äº†ä¾èµ–<code>mybatisã€mysqlé©±åŠ¨ã€lombokæ”¯æŒã€junitã€logbackæ”¯æŒ</code>ï¼Œå…¶å®è¿è¡Œ<code>mybatis</code>åªéœ€è¦å¼•å…¥ä¸‹é¢è¿™ä¸€ä¸ªæ„ä»¶å°±è¡Œäº†ï¼š</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.mybatis<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mybatis<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ³¨æ„ï¼šä¸Šé¢pomå¼•å…¥çš„æ„å»ºä¸­æ²¡æœ‰å†™ç‰ˆæœ¬å·ï¼Œæ˜¯å› ä¸ºæ„ä»¶çš„ç‰ˆæœ¬å·åœ¨çˆ¶<code>pom.xml</code>ä¸­å·²ç»å£°æ˜äº†ï¼Œæ‰€ä»¥<code>chat03/pom.xml</code>ä¸­å°±ä¸éœ€è¦å†å»å†™äº†ã€‚</p><h3 id="_3-é…ç½®mybatiså…¨å±€é…ç½®æ–‡ä»¶" tabindex="-1"><a class="header-anchor" href="#_3-é…ç½®mybatiså…¨å±€é…ç½®æ–‡ä»¶" aria-hidden="true">#</a> 3.é…ç½®mybatiså…¨å±€é…ç½®æ–‡ä»¶</h3><p>ä½¿ç”¨mybatisæ“ä½œæ•°æ®åº“ï¼Œé‚£ä¹ˆå½“ç„¶éœ€è¦é…ç½®æ•°æ®åº“ç›¸å…³ä¿¡æ¯ï¼Œè¿™ä¸ªéœ€è¦åœ¨mybatiså…¨å±€é…ç½®æ–‡ä»¶ä¸­è¿›è¡Œé…ç½®ã€‚</p><p>mybatiséœ€æä¾›ä¸€ä¸ªå…¨å±€é…ç½®çš„xmlæ–‡ä»¶ï¼Œå¯ä»¥åœ¨è¿™ä¸ªé…ç½®æ–‡ä»¶ä¸­å¯¹mybatisè¿›è¡Œé…ç½®ï¼Œå¦‚äº‹åŠ¡çš„æ”¯æŒï¼Œæ•°æ®æºçš„é…ç½®ç­‰ç­‰ï¼Œè¿™ä¸ªå±äºé…ç½®æ–‡ä»¶ï¼Œæˆ‘ä»¬ä¸€èˆ¬æ”¾åœ¨<code>main/resource</code>ä¸­ã€‚</p><p>åœ¨<code>chat03/src/main/resource</code>ä¸­åˆ›å»º<code>mybatis-config.xml</code>æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
<span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">configuration</span>
        <span class="token name">PUBLIC</span> <span class="token string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span>
        <span class="token string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- ç¯å¢ƒé…ç½®ï¼Œå¯ä»¥é…ç½®å¤šä¸ªç¯å¢ƒ --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>environments</span> <span class="token attr-name">default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>chat03<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- 
            environmentç”¨æ¥å¯¹æŸä¸ªç¯å¢ƒè¿›è¡Œé…ç½®
            idï¼šç¯å¢ƒæ ‡è¯†ï¼Œå”¯ä¸€
         --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>environment</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>chat03<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token comment">&lt;!-- äº‹åŠ¡ç®¡ç†å™¨å·¥å‚é…ç½® --&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>transactionManager</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.apache.ibatis.transaction.jdbc.JdbcTransactionFactory<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
            <span class="token comment">&lt;!-- æ•°æ®æºå·¥å‚é…ç½®ï¼Œä½¿ç”¨å·¥å‚æ¥åˆ›å»ºæ•°æ®æº --&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dataSource</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.apache.ibatis.datasource.pooled.PooledDataSourceFactory<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>driver<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.mysql.jdbc.Driver<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>url<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>jdbc:mysql://localhost:3306/javacode2018?characterEncoding=UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>root<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>root123<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dataSource</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>environment</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>environments</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æˆ‘ä»¬åšä¸€ä¸‹è§£é‡Šã€‚</p><p><strong>configurationå…ƒç´ </strong></p><p>è¿™ä¸ªæ˜¯mybatiså…¨å±€é…ç½®æ–‡ä»¶çš„æ ¹å…ƒç´ ï¼Œæ¯ä¸ªé…ç½®æ–‡ä»¶åªæœ‰ä¸€ä¸ª</p><p><strong>environmentså…ƒç´ </strong></p><p>ç”¨æ¥é…ç½®mybatisçš„ç¯å¢ƒä¿¡æ¯ï¼Œä»€ä¹ˆæ˜¯ç¯å¢ƒï¼Ÿæ¯”å¦‚å¼€å‘ç¯å¢ƒã€æµ‹è¯•ç¯å¢ƒã€çº¿ä¸Šç¯å¢ƒï¼Œè¿™3ä¸ªç¯å¢ƒä¸­çš„æ•°æ®åº“å¯èƒ½æ˜¯ä¸ä¸€æ ·çš„ï¼Œå¯èƒ½è¿˜æœ‰æ›´å¤šçš„ç¯å¢ƒã€‚</p><p>environmentså…ƒç´ ä¸­ç”¨æ¥é…ç½®å¤šä¸ªç¯å¢ƒçš„ï¼Œå…·ä½“çš„ä¸€ä¸ªç¯å¢ƒä½¿ç”¨<code>environment</code>å…ƒç´ è¿›è¡Œé…ç½®ï¼Œenvironmentå…ƒç´ æœ‰ä¸ªidç”¨æ¥æ ‡è¯†æŸä¸ªå…·ä½“çš„ç¯å¢ƒã€‚</p><p>é…ç½®äº†è¿™ä¹ˆå¤šç¯å¢ƒï¼Œé‚£ä¹ˆmybatiså…·ä½“ä¼šä½¿ç”¨å“ªä¸ªå‘¢ï¼Ÿ</p><p><code>environments</code>å…ƒç´ æœ‰ä¸ª<code>default</code>å±æ€§ï¼Œç”¨æ¥æŒ‡å®šé»˜è®¤ä½¿ç”¨å“ªä¸ªç¯å¢ƒï¼Œå¦‚ä¸Šé¢é»˜è®¤ä½¿ç”¨çš„æ˜¯<code>chat03</code>ã€‚</p><p><strong>environmentå…ƒç´ </strong></p><p>ç”¨æ¥é…ç½®å…·ä½“çš„ç¯å¢ƒä¿¡æ¯ï¼Œè¿™ä¸ªå…ƒç´ ä¸‹é¢æœ‰ä¸¤ä¸ªå­å…ƒç´ ï¼š<strong>transactionManagerå’ŒdataSource</strong></p><ul><li><p>transactionManagerå…ƒç´ </p><p>ç”¨æ¥é…ç½®äº‹åŠ¡å·¥å‚çš„ï¼Œæœ‰ä¸ªtypeå±æ€§ï¼Œtypeçš„å€¼å¿…é¡»æ˜¯<code>org.apache.ibatis.transaction.TransactionFactory</code>æ¥å£çš„å®ç°ç±»ï¼Œ<code>TransactionFactory</code>çœ‹åå­—å°±çŸ¥é“æ˜¯ä¸€ä¸ªå·¥å‚ï¼Œç”¨æ¥åˆ›å»ºäº‹åŠ¡ç®¡ç†å™¨<code>org.apache.ibatis.transaction.Transaction</code>å¯¹è±¡çš„ï¼Œ<code>TransactionFactory</code>æ¥å£é»˜è®¤æœ‰2ä¸ªå®ç°ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>transaction<span class="token punctuation">.</span>managed<span class="token punctuation">.</span></span>ManagedTransactionFactory</span>
<span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>transaction<span class="token punctuation">.</span>jdbc<span class="token punctuation">.</span></span>JdbcTransactionFactory</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸€èˆ¬æƒ…å†µä¸‹æˆ‘ä»¬ä½¿ç”¨<code>org.apache.ibatis.transaction.jdbc.JdbcTransactionFactory</code>è¿™ä¸ªï¼Œmybatiså’Œå…¶ä»–æ¡†æ¶é›†æˆï¼Œæ¯”å¦‚å’Œspringé›†æˆï¼Œäº‹åŠ¡äº¤ç”±springå»æ§åˆ¶ï¼Œspringä¸­æœ‰<code>TransactionFactory</code>æ¥å£çš„ä¸€ä¸ªå®ç°<code>org.mybatis.spring.transaction.SpringManagedTransactionFactory</code>ï¼Œæœ‰å…´è¶£çš„æœ‹å‹å¯ä»¥å»ç ”ç©¶ä¸€ä¸‹ï¼Œè¿™ä¸ªåˆ°æ—¶å€™è®²åˆ°springçš„ä½¿ç”¨ä¼šè¯¦ç»†è¯´ã€‚</p></li><li><p>dataSourceå…ƒç´ </p><p>è¿™ä¸ªç”¨æ¥é…ç½®æ•°æ®æºçš„ï¼Œtypeå±æ€§çš„å€¼å¿…é¡»ä¸ºæ¥å£<code>org.apache.ibatis.datasource.DataSourceFactory</code>çš„å®ç°ç±»ï¼Œ<code>DataSourceFactory</code>ä¹Ÿæ˜¯ä¸€ä¸ªå·¥å‚ï¼Œç”¨æ¥åˆ›å»ºæ•°æ®æº<code>javax.sql.DataSource</code>å¯¹è±¡çš„ï¼Œmybatisä¸­è¿™ä¸ªæ¥å£é»˜è®¤æœ‰3ä¸ªå®ç°ç±»ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>datasource<span class="token punctuation">.</span>jndi<span class="token punctuation">.</span></span>JndiDataSourceFactory</span>
<span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>datasource<span class="token punctuation">.</span>pooled<span class="token punctuation">.</span></span>PooledDataSourceFactory</span>
<span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>datasource<span class="token punctuation">.</span>unpooled<span class="token punctuation">.</span></span>UnpooledDataSourceFactory</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æˆ‘ä»¬ä½¿ç”¨ç¬¬2ä¸ª<code>org.apache.ibatis.datasource.pooled.PooledDataSourceFactory</code>ï¼Œè¿™ä¸ªç”¨æ¥åˆ›å»ºä¸€ä¸ªæ•°æ®åº“è¿æ¥æ± ç±»å‹çš„æ•°æ®æºï¼Œå¯ä»¥å®ç°æ•°æ®åº“è¿æ¥å…±ç”¨ï¼Œå‡å°‘è¿æ¥é‡å¤åˆ›å»ºé”€æ¯çš„æ—¶é—´ã€‚</p><p>é…ç½®æ•°æ®æºéœ€è¦æŒ‡å®šæ•°æ®åº“è¿æ¥çš„å±æ€§ä¿¡æ¯ï¼Œæ¯”å¦‚ï¼šé©±åŠ¨ã€è¿æ¥dbçš„urlã€ç”¨æˆ·åã€å¯†ç ï¼Œè¿™ä¸ªåœ¨<code>dataSourceå…ƒç´ </code>ä¸‹é¢çš„<code>property</code>ä¸­é…ç½®ï¼Œ<code>property</code>å…ƒç´ çš„æ ¼å¼ï¼š</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>å±æ€§åç§°<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>å€¼<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li></ul><h3 id="_4-åˆ›å»ºmapper-xmlæ–‡ä»¶" tabindex="-1"><a class="header-anchor" href="#_4-åˆ›å»ºmapper-xmlæ–‡ä»¶" aria-hidden="true">#</a> 4.åˆ›å»ºmapper xmlæ–‡ä»¶</h3><p>æˆ‘ä»¬éœ€è¦å¯¹t_userè¡¨è¿›è¡Œæ“ä½œï¼Œéœ€è¦å†™sqlï¼Œsqlå†™åœ¨ä»€ä¹ˆåœ°æ–¹å‘¢ï¼Ÿ</p><p>åœ¨mybatisä¸­ä¸€èˆ¬æˆ‘ä»¬å°†ä¸€ä¸ªè¡¨çš„æ‰€æœ‰sqlæ“ä½œå†™åœ¨ä¸€ä¸ªmapper xmlä¸­ï¼Œä¸€èˆ¬å‘½åä¸º<code>XXXMapper.xml</code>æ ¼å¼ã€‚</p><p>åˆ›å»ºæ–‡ä»¶<code>chat02/src/main/resource/mapper/UserMapper.xml</code>ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
<span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">mapper</span> <span class="token name">PUBLIC</span> <span class="token string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span>
        <span class="token string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">namespace</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.javacode2018.chat02.UserMapper<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mapper</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>mapper xml</code>æ ¹å…ƒç´ ä¸º<code>mapper</code>ï¼Œè¿™ä¸ªå…ƒç´ æœ‰ä¸ª<code>namespace</code>å±æ€§ï¼Œç³»ç»Ÿä¸­ä¼šæœ‰å¾ˆå¤šè¡¨ï¼Œæ¯ä¸ªè¡¨å¯¹åº”ä¸€ä¸ª<code>Mapper xml</code>ï¼Œä¸ºäº†é˜²æ­¢mapperæ–‡ä»¶é‡å¤ï¼Œæˆ‘ä»¬éœ€è¦ç»™æ¯ä¸ªmapper xmlæ–‡ä»¶éœ€è¦æŒ‡å®šä¸€ä¸ªnamespaceï¼Œé€šè¿‡è¿™ä¸ªå¯ä»¥åŒºåˆ†æ¯ä¸ªmapper xmlæ–‡ä»¶ï¼Œä¸Šé¢æˆ‘ä»¬æŒ‡å®šä¸º<code>com.javacode2018.chat02.UserMapper</code>ã€‚</p><p>ä¸€ä¼šå¯¹<code>t_user</code>è¡¨çš„æ‰€æœ‰æ“ä½œç›¸å…³çš„sqlï¼Œæˆ‘ä»¬éƒ½ä¼šå†™åœ¨ä¸Šé¢è¿™ä¸ªxmlä¸­ã€‚</p><h3 id="_5-å¼•å…¥mapper-xmlæ–‡ä»¶" tabindex="-1"><a class="header-anchor" href="#_5-å¼•å…¥mapper-xmlæ–‡ä»¶" aria-hidden="true">#</a> 5.å¼•å…¥mapper xmlæ–‡ä»¶</h3><p>UserMapper.xmlæˆ‘ä»¬å†™å¥½äº†ï¼Œå¦‚ä½•è®©mybatisçŸ¥é“è¿™ä¸ªæ–‡ä»¶å‘¢ï¼Œæ­¤æ—¶æˆ‘ä»¬éœ€è¦åœ¨<code>mybatis-config.xml</code>å…¨å±€é…ç½®æ–‡ä»¶ä¸­å¼•å…¥<code>UserMapper.xml</code>ï¼Œåœ¨<code>mybatis-config.xml</code>åŠ å…¥ä¸‹é¢é…ç½®ï¼š</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mappers</span><span class="token punctuation">&gt;</span></span>   
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">resource</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mapper/UserMapper.xml<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mappers</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>mapperså…ƒç´ </code>ä¸‹é¢æœ‰å¤šä¸ª<code>mapper</code>å…ƒç´ ï¼Œé€šè¿‡<code>mapperå…ƒç´ </code>çš„<code>resourceå±æ€§</code>å¯ä»¥å¼•å…¥Mapper xmlæ–‡ä»¶ï¼Œ<code>resource</code>æ˜¯ç›¸å¯¹äºclassesçš„è·¯å¾„ã€‚</p><p>ä¸Šé¢è¯´çš„éƒ½æ˜¯ä¸€äº›é…ç½®æ–‡ä»¶ï¼Œé…ç½®æ–‡ä»¶éƒ½okäº†ï¼Œä¸‹é¢æˆ‘ä»¬å°±éœ€è¦å°†mybatisè·‘èµ·æ¥äº†ï¼Œæ­¤æ—¶éœ€è¦ä½¿ç”¨åˆ°mybatisä¸­çš„ä¸€äº›javaå¯¹è±¡äº†ã€‚</p><h3 id="_6-æ„å»ºsqlsessionfactoryå¯¹è±¡" tabindex="-1"><a class="header-anchor" href="#_6-æ„å»ºsqlsessionfactoryå¯¹è±¡" aria-hidden="true">#</a> 6.æ„å»ºSqlSessionFactoryå¯¹è±¡</h3><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//æŒ‡å®šmybatiså…¨å±€é…ç½®æ–‡ä»¶</span>
<span class="token class-name">String</span> resource <span class="token operator">=</span> <span class="token string">&quot;mybatis-config.xml&quot;</span><span class="token punctuation">;</span>
<span class="token comment">//è¯»å–å…¨å±€é…ç½®æ–‡ä»¶</span>
<span class="token class-name">InputStream</span> inputStream <span class="token operator">=</span> <span class="token class-name">Resources</span><span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span>resource<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//æ„å»ºSqlSessionFactoryå¯¹è±¡</span>
<span class="token class-name">SqlSessionFactory</span> sqlSessionFactory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SqlSessionFactoryBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span>inputStream<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>SqlSessionFactoryæ˜¯ä¸€ä¸ªæ¥å£ï¼Œæ˜¯ä¸€ä¸ªé‡é‡çº§çš„å¯¹è±¡ï¼ŒSqlSessionFactoryBuilderé€šè¿‡è¯»å–å…¨å±€é…ç½®æ–‡ä»¶æ¥åˆ›å»ºä¸€ä¸ª<code>SqlSessionFactory</code>ï¼Œåˆ›å»ºè¿™ä¸ªå¯¹è±¡æ˜¯æ¯”è¾ƒè€—æ—¶çš„ï¼Œä¸»è¦è€—æ—¶åœ¨å¯¹mybatiså…¨å±€é…ç½®æ–‡ä»¶çš„è§£æä¸Šé¢ï¼Œå…¨å±€é…ç½®æ–‡ä»¶ä¸­åŒ…å«å¾ˆå¤šå†…å®¹ï¼ŒSqlSessionFactoryBuilderé€šè¿‡è§£æè¿™äº›å†…å®¹ï¼Œåˆ›å»ºäº†ä¸€ä¸ªå¤æ‚çš„<code>SqlSessionFactory</code>å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸä¸€èˆ¬å’Œåº”ç”¨çš„ç”Ÿå‘½å‘¨æœŸæ˜¯ä¸€æ ·çš„ï¼Œéšç€åº”ç”¨çš„å¯åŠ¨è€Œåˆ›å»ºï¼Œéšç€åº”ç”¨çš„åœæ­¢è€Œç»“æŸï¼Œæ‰€ä»¥ä¸€èˆ¬æ˜¯ä¸€ä¸ªå…¨å±€å¯¹è±¡ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ä¸€ä¸ªdbå¯¹åº”ä¸€ä¸ªSqlSessionFactoryå¯¹è±¡ã€‚</p><h3 id="_7-æ„å»ºsqlsessionå¯¹è±¡" tabindex="-1"><a class="header-anchor" href="#_7-æ„å»ºsqlsessionå¯¹è±¡" aria-hidden="true">#</a> 7.æ„å»ºSqlSessionå¯¹è±¡</h3><p>SqlSessionç›¸å½“äºjdbcä¸­çš„Connectionå¯¹è±¡ï¼Œç›¸å½“äºæ•°æ®åº“çš„ä¸€ä¸ªè¿æ¥ï¼Œå¯ä»¥ç”¨SqlSessionæ¥å¯¹dbè¿›è¡Œæ“ä½œï¼š<strong>å¦‚æ‰§è¡Œsqlã€æäº¤äº‹åŠ¡ã€å…³é—­è¿æ¥ç­‰ç­‰</strong>ï¼Œéœ€è¦é€šè¿‡<code>SqlSessionFactory</code>æ¥åˆ›å»º<code>SqlSession</code>å¯¹è±¡ï¼Œ<code>SqlSessionFactory</code>ä¸­å¸¸ç”¨çš„æœ‰2ä¸ªæ–¹æ³•æ¥åˆ›å»º<code>SqlSessionå¯¹è±¡</code>ï¼Œå¦‚ä¸‹ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//åˆ›å»ºä¸€ä¸ªSqlSessionï¼Œé»˜è®¤ä¸ä¼šè‡ªåŠ¨æäº¤äº‹åŠ¡</span>
<span class="token class-name">SqlSession</span> <span class="token function">openSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//åˆ›å»ºä¸€ä¸ªSqlSession,autoCommitï¼šæŒ‡å®šæ˜¯å¦è‡ªåŠ¨æäº¤äº‹åŠ¡</span>
<span class="token class-name">SqlSession</span> <span class="token function">openSession</span><span class="token punctuation">(</span><span class="token keyword">boolean</span> autoCommit<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>SqlSessionæ¥å£ä¸­å¾ˆå¤šæ–¹æ³•ï¼Œç›´æ¥ç”¨æ¥æ“ä½œdbï¼Œæ–¹æ³•æ¸…å•å¦‚ä¸‹ï¼Œå¤§å®¶çœ¼ç†Ÿä¸€ä¸‹ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">T</span> <span class="token function">selectOne</span><span class="token punctuation">(</span><span class="token class-name">String</span> statement<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">T</span> <span class="token function">selectOne</span><span class="token punctuation">(</span><span class="token class-name">String</span> statement<span class="token punctuation">,</span> <span class="token class-name">Object</span> parameter<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token function">selectList</span><span class="token punctuation">(</span><span class="token class-name">String</span> statement<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token function">selectList</span><span class="token punctuation">(</span><span class="token class-name">String</span> statement<span class="token punctuation">,</span> <span class="token class-name">Object</span> parameter<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token function">selectList</span><span class="token punctuation">(</span><span class="token class-name">String</span> statement<span class="token punctuation">,</span> <span class="token class-name">Object</span> parameter<span class="token punctuation">,</span> <span class="token class-name">RowBounds</span> rowBounds<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span> <span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span> <span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> <span class="token function">selectMap</span><span class="token punctuation">(</span><span class="token class-name">String</span> statement<span class="token punctuation">,</span> <span class="token class-name">String</span> mapKey<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span> <span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span> <span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> <span class="token function">selectMap</span><span class="token punctuation">(</span><span class="token class-name">String</span> statement<span class="token punctuation">,</span> <span class="token class-name">Object</span> parameter<span class="token punctuation">,</span> <span class="token class-name">String</span> mapKey<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span> <span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span> <span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> <span class="token function">selectMap</span><span class="token punctuation">(</span><span class="token class-name">String</span> statement<span class="token punctuation">,</span> <span class="token class-name">Object</span> parameter<span class="token punctuation">,</span> <span class="token class-name">String</span> mapKey<span class="token punctuation">,</span> <span class="token class-name">RowBounds</span> rowBounds<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">Cursor</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token function">selectCursor</span><span class="token punctuation">(</span><span class="token class-name">String</span> statement<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">Cursor</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token function">selectCursor</span><span class="token punctuation">(</span><span class="token class-name">String</span> statement<span class="token punctuation">,</span> <span class="token class-name">Object</span> parameter<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">Cursor</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token function">selectCursor</span><span class="token punctuation">(</span><span class="token class-name">String</span> statement<span class="token punctuation">,</span> <span class="token class-name">Object</span> parameter<span class="token punctuation">,</span> <span class="token class-name">RowBounds</span> rowBounds<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">void</span> <span class="token function">select</span><span class="token punctuation">(</span><span class="token class-name">String</span> statement<span class="token punctuation">,</span> <span class="token class-name">Object</span> parameter<span class="token punctuation">,</span> <span class="token class-name">ResultHandler</span> handler<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">void</span> <span class="token function">select</span><span class="token punctuation">(</span><span class="token class-name">String</span> statement<span class="token punctuation">,</span> <span class="token class-name">ResultHandler</span> handler<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">void</span> <span class="token function">select</span><span class="token punctuation">(</span><span class="token class-name">String</span> statement<span class="token punctuation">,</span> <span class="token class-name">Object</span> parameter<span class="token punctuation">,</span> <span class="token class-name">RowBounds</span> rowBounds<span class="token punctuation">,</span> <span class="token class-name">ResultHandler</span> handler<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token function">insert</span><span class="token punctuation">(</span><span class="token class-name">String</span> statement<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token function">insert</span><span class="token punctuation">(</span><span class="token class-name">String</span> statement<span class="token punctuation">,</span> <span class="token class-name">Object</span> parameter<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token class-name">String</span> statement<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token class-name">String</span> statement<span class="token punctuation">,</span> <span class="token class-name">Object</span> parameter<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token function">delete</span><span class="token punctuation">(</span><span class="token class-name">String</span> statement<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token function">delete</span><span class="token punctuation">(</span><span class="token class-name">String</span> statement<span class="token punctuation">,</span> <span class="token class-name">Object</span> parameter<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">void</span> <span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">void</span> <span class="token function">commit</span><span class="token punctuation">(</span><span class="token keyword">boolean</span> force<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">void</span> <span class="token function">rollback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">void</span> <span class="token function">rollback</span><span class="token punctuation">(</span><span class="token keyword">boolean</span> force<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">BatchResult</span><span class="token punctuation">&gt;</span></span> <span class="token function">flushStatements</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">void</span> <span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">void</span> <span class="token function">clearCache</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Configuration</span> <span class="token function">getConfiguration</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">T</span> <span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> type<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Connection</span> <span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸Šé¢ä»¥<code>select</code>å¼€å¤´çš„å¯ä»¥å¯¹dbè¿›è¡ŒæŸ¥è¯¢æ“ä½œï¼Œ<code>insert</code>ç›¸å…³çš„å¯ä»¥å¯¹dbè¿›è¡Œæ’å…¥æ“ä½œï¼Œupdateç›¸å…³çš„å¯ä»¥å¯¹dbè¿›è¡Œæ›´æ–°æ“ä½œã€‚</p><h3 id="_8-å¼•å…¥lombok-éå¿…é¡»" tabindex="-1"><a class="header-anchor" href="#_8-å¼•å…¥lombok-éå¿…é¡»" aria-hidden="true">#</a> 8.å¼•å…¥Lombokï¼ˆéå¿…é¡»ï¼‰</h3><p><strong>å£°æ˜ä¸€ä¸‹ï¼šlombokä¸æ˜¯mybatiså¿…é¡»çš„ï¼Œä¸ºäº†ç®€åŒ–ä»£ç è€Œä½¿ç”¨çš„ï¼Œä»¥åæˆ‘ä»¬ä¼šç»å¸¸ä½¿ç”¨ã€‚</strong></p><p>Lombokèƒ½ä»¥ç®€å•çš„æ³¨è§£å½¢å¼æ¥ç®€åŒ–javaä»£ç ï¼Œæé«˜å¼€å‘äººå‘˜çš„å¼€å‘æ•ˆç‡ã€‚ä¾‹å¦‚å¼€å‘ä¸­ç»å¸¸éœ€è¦å†™çš„javabeanï¼Œéƒ½éœ€è¦èŠ±æ—¶é—´å»æ·»åŠ ç›¸åº”çš„getter/setterï¼Œä¹Ÿè®¸è¿˜è¦å»å†™æ„é€ å™¨ã€equalsç­‰æ–¹æ³•ï¼Œè€Œä¸”éœ€è¦ç»´æŠ¤ï¼Œå½“å±æ€§å¤šæ—¶ä¼šå‡ºç°å¤§é‡çš„getter/setteræ–¹æ³•ï¼Œè¿™äº›æ˜¾å¾—å¾ˆå†—é•¿ä¹Ÿæ²¡æœ‰å¤ªå¤šæŠ€æœ¯å«é‡ï¼Œä¸€æ—¦ä¿®æ”¹å±æ€§ï¼Œå°±å®¹æ˜“å‡ºç°å¿˜è®°ä¿®æ”¹å¯¹åº”æ–¹æ³•çš„å¤±è¯¯ã€‚</p><p>Lombokèƒ½é€šè¿‡æ³¨è§£çš„æ–¹å¼ï¼Œåœ¨ç¼–è¯‘æ—¶è‡ªåŠ¨ä¸ºå±æ€§ç”Ÿæˆæ„é€ å™¨ã€getter/setterã€equalsã€hashcodeã€toStringæ–¹æ³•ã€‚å‡ºç°çš„ç¥å¥‡å°±æ˜¯åœ¨æºç ä¸­æ²¡æœ‰getterå’Œsetteræ–¹æ³•ï¼Œä½†æ˜¯åœ¨ç¼–è¯‘ç”Ÿæˆçš„å­—èŠ‚ç æ–‡ä»¶ä¸­æœ‰getterå’Œsetteræ–¹æ³•ã€‚è¿™æ ·å°±çœå»äº†æ‰‹åŠ¨é‡å»ºè¿™äº›ä»£ç çš„éº»çƒ¦ï¼Œä½¿ä»£ç çœ‹èµ·æ¥æ›´ç®€æ´äº›ã€‚</p><h5 id="lombokçš„ä½¿ç”¨æ­¥éª¤" tabindex="-1"><a class="header-anchor" href="#lombokçš„ä½¿ç”¨æ­¥éª¤" aria-hidden="true">#</a> lombokçš„ä½¿ç”¨æ­¥éª¤</h5><ol><li><p>å…ˆåœ¨ideaä¸­å®‰è£…lombokæ’ä»¶</p><p>æ‰“å¼€ideaï¼Œç‚¹å‡»<code>File-&gt;Settings-&gt;plugins</code>ï¼Œç„¶åæœç´¢<code>Lombok Plugin</code>ï¼Œç‚¹å‡»å®‰è£…å°±å¯ä»¥äº†ã€‚</p></li><li><p>mavenä¸­å¼•å…¥lombokæ”¯æŒ</p></li></ol><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.projectlombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>lombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.18.10<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>provided<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_9-å¼•å…¥logback-éå¿…é¡»" tabindex="-1"><a class="header-anchor" href="#_9-å¼•å…¥logback-éå¿…é¡»" aria-hidden="true">#</a> 9.å¼•å…¥Logbackï¼ˆéå¿…é¡»ï¼‰</h3><p><strong>å£°æ˜ä¸€ä¸‹ï¼šæ—¥å¿—æ¡†æ¶mybatisä¸­ä¹Ÿä¸æ˜¯å¿…é¡»çš„ï¼Œä¸ç”¨é…ç½®ä¹Ÿå¯ä»¥æ­£å¸¸è¿è¡Œã€‚</strong></p><p>ä¸ºäº†æ–¹ä¾¿æŸ¥çœ‹mybatisè¿è¡Œè¿‡ç¨‹ä¸­äº§ç”Ÿçš„æ—¥å¿—ï¼Œæ¯”å¦‚ï¼šæ‰§è¡Œçš„sqlã€sqlçš„å‚æ•°ã€sqlçš„æ‰§è¡Œç»“æœç­‰ç­‰è°ƒè¯•ä¿¡æ¯ï¼Œæˆ‘ä»¬éœ€è¦å¼•å…¥æ—¥å¿—æ¡†æ¶çš„æ”¯æŒï¼Œlogbackæ˜¯ä¸€ä¸ªå¾ˆå¥½çš„æ—¥å¿—æ¡†æ¶ï¼Œæ­¤å¤„æˆ‘ä»¬å°±ä½¿ç”¨è¿™ä¸ª</p><h5 id="mybatisä¸­é›†æˆlogbackæ­¥éª¤" tabindex="-1"><a class="header-anchor" href="#mybatisä¸­é›†æˆlogbackæ­¥éª¤" aria-hidden="true">#</a> mybatisä¸­é›†æˆlogbackæ­¥éª¤</h5><ol><li><p>mavenä¸­å¼•å…¥logbackæ”¯æŒ</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>ch.qos.logback<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>logback-classic<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.2.3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>src/main/resourcesä¸­åˆ›å»º<code>logback.xml</code>æ–‡ä»¶ï¼š</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appender</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>STDOUT<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ch.qos.logback.core.ConsoleAppender<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>encoder</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>pattern</span><span class="token punctuation">&gt;</span></span>%d{mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>pattern</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>encoder</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>appender</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>logger</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.javacode2018<span class="token punctuation">&quot;</span></span> <span class="token attr-name">level</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>debug<span class="token punctuation">&quot;</span></span> <span class="token attr-name">additivity</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>false<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appender-ref</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>STDOUT<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>logger</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>logback.xmlå…·ä½“çš„å†™æ³•ä¸æ˜¯æœ¬æ–‡è®¨è®ºçš„èŒƒå›´ï¼Œæœ‰å…´è¶£çš„æœ‹å‹å¯ä»¥å»ç ”ç©¶ä¸€ä¸‹logbackå…·ä½“çš„ç”¨æ³•ã€‚</p><p>ä¸Šé¢xmlä¸­é…ç½®äº†<code>com.javacode2018</code>åŒ…ä¸­æ‰€æœ‰çš„ç±»ï¼Œä½¿ç”¨logbackè¾“å‡ºæ—¥å¿—çš„æ—¶å€™ï¼Œdebugçº§åˆ«åŠä»¥ä¸Šçº§åˆ«çš„æ—¥å¿—ä¼šè¾“å‡ºåˆ°æ§åˆ¶å°ï¼Œæ–¹ä¾¿æˆ‘ä»¬æŸ¥çœ‹ã€‚</p></blockquote></li></ol><h3 id="_10-æµ‹è¯•ç”¨ä¾‹" tabindex="-1"><a class="header-anchor" href="#_10-æµ‹è¯•ç”¨ä¾‹" aria-hidden="true">#</a> 10.æµ‹è¯•ç”¨ä¾‹</h3><p>åœ¨<code>chat02/src/test</code>ä¸‹åˆ›å»ºä¸€ä¸ªç±»:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>com.javacode2018.chat02.UserTest
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>å†…å®¹å¦‚ä¸‹ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>javacode2018<span class="token punctuation">.</span>chat02</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span>extern<span class="token punctuation">.</span>slf4j<span class="token punctuation">.</span></span><span class="token class-name">Slf4j</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">Resources</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>session<span class="token punctuation">.</span></span><span class="token class-name">SqlSession</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>session<span class="token punctuation">.</span></span><span class="token class-name">SqlSessionFactory</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>session<span class="token punctuation">.</span></span><span class="token class-name">SqlSessionFactoryBuilder</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span></span><span class="token class-name">Before</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span></span><span class="token class-name">Test</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">InputStream</span></span><span class="token punctuation">;</span>
<span class="token annotation punctuation">@Slf4j</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserTest</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">SqlSessionFactory</span> sqlSessionFactory<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@Before</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">before</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token comment">//æŒ‡å®šmybatiså…¨å±€é…ç½®æ–‡ä»¶</span>
        <span class="token class-name">String</span> resource <span class="token operator">=</span> <span class="token string">&quot;mybatis-config.xml&quot;</span><span class="token punctuation">;</span>
        <span class="token comment">//è¯»å–å…¨å±€é…ç½®æ–‡ä»¶</span>
        <span class="token class-name">InputStream</span> inputStream <span class="token operator">=</span> <span class="token class-name">Resources</span><span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span>resource<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//æ„å»ºSqlSessionFactoryå¯¹è±¡</span>
        <span class="token class-name">SqlSessionFactory</span> sqlSessionFactory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SqlSessionFactoryBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span>inputStream<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>sqlSessionFactory <span class="token operator">=</span> sqlSessionFactory<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sqlSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SqlSession</span> sqlSession <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>sqlSessionFactory<span class="token punctuation">.</span><span class="token function">openSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;{}&quot;</span><span class="token punctuation">,</span> sqlSession<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸Šé¢ä»£ç ä¸­æœ‰ä¸ª<code>@Slf4j</code>æ³¨è§£ï¼Œè¿™ä¸ªæ˜¯lombokæä¾›çš„ï¼Œå¯ä»¥åœ¨è¿™ä¸ªç±»ä¸­ç”Ÿæˆä¸‹é¢ä»£ç ï¼šj</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>slf4j<span class="token punctuation">.</span></span>Logger</span> log <span class="token operator">=</span> <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>slf4j<span class="token punctuation">.</span></span>LoggerFactory</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token class-name">UserTest</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>è¿è¡Œä¸€ä¸‹ä¸Šé¢çš„ç”¨ä¾‹ï¼š<code>sqlSession</code>æ–¹æ³•ï¼Œè¾“å‡ºå¦‚ä¸‹ï¼š</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>45:51.289 [main] INFO  com.javacode2018.chat02.UserTest - org.apache.ibatis.session.defaults.DefaultSqlSession@1f021e6c
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="_2-sqlsessionçš„sqlæ“ä½œ" tabindex="-1"><a class="header-anchor" href="#_2-sqlsessionçš„sqlæ“ä½œ" aria-hidden="true">#</a> 2-SqlSessionçš„sqlæ“ä½œ</h2><h3 id="_1-sqlsessionå¸¸è§ç”¨æ³•" tabindex="-1"><a class="header-anchor" href="#_1-sqlsessionå¸¸è§ç”¨æ³•" aria-hidden="true">#</a> 1.SqlSessionå¸¸è§ç”¨æ³•</h3><p>SqlSessionç›¸å½“äºä¸€ä¸ªè¿æ¥ï¼Œå¯ä»¥ä½¿ç”¨è¿™ä¸ªå¯¹è±¡å¯¹dbæ‰§è¡Œå¢åˆ æ”¹æŸ¥æ“ä½œï¼Œæ“ä½œå®Œæ¯•ä¹‹åéœ€è¦å…³é—­ï¼Œä½¿ç”¨æ­¥éª¤ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token number">1.</span>è·å–<span class="token class-name">SqlSession</span>å¯¹è±¡ï¼šé€šè¿‡è¯¥sqlSessionFactory<span class="token punctuation">.</span>openSessionæ–¹æ³•è·å–<span class="token class-name">SqlSession</span>å¯¹è±¡
<span class="token number">2.</span>å¯¹dbè¿›è¡Œæ“ä½œï¼šä½¿ç”¨<span class="token class-name">SqlSession</span>å¯¹è±¡è¿›è¡Œdbæ“ä½œ
<span class="token number">3.</span>å…³é—­<span class="token class-name">SqlSession</span>å¯¹è±¡ï¼šsqlSession<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¸¸è§çš„ä½¿ç”¨æ–¹å¼å¦‚ä¸‹ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//è·å–SqlSession</span>
<span class="token class-name">SqlSession</span> sqlSession <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>sqlSessionFactory<span class="token punctuation">.</span><span class="token function">openSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token comment">//æ‰§è¡Œä¸šåŠ¡æ“ä½œï¼Œå¦‚ï¼šå¢åˆ æ”¹æŸ¥</span>
<span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
    <span class="token comment">//å…³é—­SqlSession</span>
    sqlSession<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸Šé¢æˆ‘ä»¬å°†SqlSessionçš„å…³é—­æ”¾åœ¨<code>finally</code>å—ä¸­ï¼Œç¡®ä¿close()ä¸€å®šä¼šæ‰§è¡Œã€‚æ›´ç®€å•çš„æ–¹å¼æ˜¯ä½¿ç”¨javaä¸­çš„<code>try()</code>çš„æ–¹å¼ï¼Œå¦‚ä¸‹ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">try</span> <span class="token punctuation">(</span><span class="token class-name">SqlSession</span> sqlSession <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>sqlSessionFactory<span class="token punctuation">.</span><span class="token function">openSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//æ‰§è¡Œä¸šåŠ¡æ“ä½œï¼Œå¦‚ï¼šå¢åˆ æ”¹æŸ¥</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-æ–°å¢æ“ä½œ" tabindex="-1"><a class="header-anchor" href="#_2-æ–°å¢æ“ä½œ" aria-hidden="true">#</a> 2.æ–°å¢æ“ä½œ</h3><p>éœ€æ±‚ï¼šä¼ å…¥<code>UserModel</code>å¯¹è±¡ï¼Œç„¶åå°†è¿™ä¸ªå¯¹è±¡çš„æ•°æ®æ’å…¥åˆ°<code>t_user</code>è¡¨ä¸­ã€‚</p><h4 id="åˆ›å»ºç±»usermodel" tabindex="-1"><a class="header-anchor" href="#åˆ›å»ºç±»usermodel" aria-hidden="true">#</a> åˆ›å»ºç±»UserModel</h4><p>æ–°å»ºä¸€ä¸ª<code>com.javacode2018.chat02.UserModel</code>ç±»ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>javacode2018<span class="token punctuation">.</span>chat02</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token doc-comment comment">/**
 * å…¬ä¼—å·ï¼šè·¯äººç”²Javaï¼Œå·¥ä½œ10å¹´çš„å‰é˜¿é‡ŒP7åˆ†äº«Javaã€ç®—æ³•ã€æ•°æ®åº“æ–¹é¢çš„æŠ€æœ¯å¹²è´§ï¼åšä¿¡ç”¨æŠ€æœ¯æ”¹å˜å‘½è¿ï¼Œè®©å®¶äººè¿‡ä¸Šæ›´ä½“é¢çš„ç”Ÿæ´»!
 */</span>
<span class="token annotation punctuation">@Getter</span>
<span class="token annotation punctuation">@Setter</span>
<span class="token annotation punctuation">@NoArgsConstructor</span>
<span class="token annotation punctuation">@AllArgsConstructor</span>
<span class="token annotation punctuation">@Builder</span>
<span class="token annotation punctuation">@ToString</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserModel</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">Long</span> id<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> age<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Double</span> salary<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> sex<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™ä¸ªç±»çš„å­—æ®µå’Œ<code>t_user</code>è¡¨å¯¹åº”ã€‚</p><h4 id="usermapper-xmlä¸­å®šä¹‰æ’å…¥æ“ä½œ" tabindex="-1"><a class="header-anchor" href="#usermapper-xmlä¸­å®šä¹‰æ’å…¥æ“ä½œ" aria-hidden="true">#</a> UserMapper.xmlä¸­å®šä¹‰æ’å…¥æ“ä½œ</h4><p>æˆ‘ä»¬è¯´è¿‡äº†ï¼Œå¯¹<code>t_user</code>è¡¨çš„æ‰€æœ‰sqlæ“ä½œï¼Œæˆ‘ä»¬éƒ½æ”¾åœ¨<code>UserMapper.xml</code>ä¸­ï¼Œæˆ‘ä»¬åœ¨<code>UserMapper.xml</code>ä¸­åŠ å…¥ä¸‹é¢é…ç½®ï¼Œä½¿ç”¨<code>insertå…ƒç´ </code>å®šä¹‰æ’å…¥æ“ä½œï¼š</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!-- insertç”¨æ¥å®šä¹‰ä¸€ä¸ªæ’å…¥æ“ä½œ
     idï¼šæ“ä½œçš„å…·ä½“æ ‡è¯†
     parameterTypeï¼šæŒ‡å®šæ’å…¥æ“ä½œæ¥å—çš„å‚æ•°ç±»å‹
 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>insert</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>insertUser<span class="token punctuation">&quot;</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.javacode2018.chat02.UserModel<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token cdata">&lt;![CDATA[
    INSERT INTO t_user (id,name,age,salary,sex) VALUES (#{id},#{name},#{age},#{salary},#{sex})
     ]]&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>insert</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>insert</code>å…ƒç´ ç”¨æ¥å®šä¹‰äº†ä¸€ä¸ªå¯¹dbçš„insertæ“ä½œ</p><p><strong>id</strong>ï¼šæ˜¯è¿™ä¸ªæ“ä½œçš„ä¸€ä¸ªæ ‡è¯†ï¼Œä¸€ä¼šé€šè¿‡mybatisæ‰§è¡Œæ“ä½œçš„æ—¶å€™ä¼šé€šè¿‡è¿™ä¸ªnamespaceå’Œidå¼•ç”¨åˆ°è¿™ä¸ªinsertæ“ä½œï¼Œ</p><p><strong>parameterType</strong>ï¼šç”¨æ¥æŒ‡å®šè¿™ä¸ªinsertæ“ä½œæ¥å—çš„å‚æ•°çš„ç±»å‹ï¼Œå¯ä»¥æ˜¯ï¼š<strong>å„ç§javabeanã€mapã€listã€collectionç±»å‹çš„javaå¯¹è±¡</strong>ï¼Œæˆ‘ä»¬è¿™ä¸ªæ’å…¥æ¥å—çš„æ˜¯<code>UserModel</code>å¯¹è±¡ã€‚</p><p>insertå…ƒç´ å†…éƒ¨å®šä¹‰äº†å…·ä½“çš„sqlï¼Œå¯ä»¥çœ‹åˆ°æ˜¯ä¸€ä¸ªinsertçš„sqlï¼Œå‘t_userè¡¨æ’å…¥æ•°æ®ã€‚</p><p>éœ€è¦æ’å…¥çš„å€¼ä»UserModelå¯¹è±¡ä¸­è·å–ï¼Œå–<code>UserModel</code>å¯¹è±¡çš„çš„å­—æ®µï¼Œä½¿ç”¨**#{å­—æ®µ}**è¿™ç§æ ¼å¼å¯ä»¥è·å–åˆ°UserModelä¸­å­—æ®µçš„å€¼ã€‚</p><h4 id="è°ƒç”¨sqlsession-insertæ–¹æ³•æ‰§è¡Œæ’å…¥æ“ä½œ" tabindex="-1"><a class="header-anchor" href="#è°ƒç”¨sqlsession-insertæ–¹æ³•æ‰§è¡Œæ’å…¥æ“ä½œ" aria-hidden="true">#</a> è°ƒç”¨SqlSession.insertæ–¹æ³•æ‰§è¡Œæ’å…¥æ“ä½œ</h4><p>t_useræ’å…¥çš„sqlæˆ‘ä»¬å·²ç»åœ¨UserMapperä¸­å†™å¥½ï¼Œæ­¤æ—¶æˆ‘ä»¬æ€ä¹ˆè°ƒç”¨å‘¢ï¼Ÿ</p><p>éœ€è¦è°ƒç”¨<code>SqlSession.insert</code>æ–¹æ³•ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">int</span> <span class="token function">insert</span><span class="token punctuation">(</span><span class="token class-name">String</span> statement<span class="token punctuation">,</span> <span class="token class-name">Object</span> parameter<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>è¿™ä¸ªæ–¹æ³•æœ‰2ä¸ªå‚æ•°:</p><p><strong>statement</strong>ï¼šè¡¨ç¤ºé‚£ä¸ªæ“ä½œï¼Œå€¼ä¸ºMapper xmlçš„<code>namespace.å…·ä½“æ“ä½œçš„id</code>ï¼Œå¦‚éœ€è¦è°ƒç”¨<code>UserMapper.xml</code>ä¸­çš„<code>insertUser</code>æ“ä½œï¼Œè¿™ä¸ªå€¼å°±æ˜¯ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>javacode2018<span class="token punctuation">.</span>chat02<span class="token punctuation">.</span></span>UserMapper</span><span class="token punctuation">.</span>insertUser
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>parameter</strong>ï¼šinsertæ“ä½œçš„å‚æ•°ï¼Œå’ŒMapper xmlä¸­çš„insertä¸­çš„<code>parameterType</code>æŒ‡å®šçš„ç±»å‹ä¸€è‡´ã€‚</p><p>è¿”å›å€¼ä¸ºæ’å…¥çš„è¡Œæ•°ã€‚</p><p><code>UserTest</code>ç±»ä¸­æ–°å¢ä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">insertUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">(</span><span class="token class-name">SqlSession</span> sqlSession <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>sqlSessionFactory<span class="token punctuation">.</span><span class="token function">openSession</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//åˆ›å»ºUserModelå¯¹è±¡</span>
        <span class="token class-name">UserModel</span> userModel <span class="token operator">=</span> <span class="token class-name">UserModel</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">id</span><span class="token punctuation">(</span><span class="token number">2L</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token string">&quot;javacode2018&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">age</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">salary</span><span class="token punctuation">(</span><span class="token number">50000D</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sex</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//æ‰§è¡Œæ’å…¥æ“ä½œ</span>
        <span class="token keyword">int</span> result <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token string">&quot;com.javacode2018.chat02.UserMapper.insertUser&quot;</span><span class="token punctuation">,</span> userModel<span class="token punctuation">)</span><span class="token punctuation">;</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;æ’å…¥å½±å“è¡Œæ•°ï¼š{}&quot;</span><span class="token punctuation">,</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//æäº¤äº‹åŠ¡</span>
        sqlSession<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>01:46.683 [main] DEBUG c.j.chat02.UserMapper.insertUser - ==&gt;  Preparing: INSERT INTO t_user (id,name,age,salary,sex) VALUES (?,?,?,?,?) 
01:46.745 [main] DEBUG c.j.chat02.UserMapper.insertUser - ==&gt; Parameters: 2(Long), javacode2018(String), 30(Integer), 50000.0(Double), 1(Integer)
01:46.751 [main] DEBUG c.j.chat02.UserMapper.insertUser - &lt;==    Updates: 1
01:46.751 [main] INFO  com.javacode2018.chat02.UserTest - å½±å“è¡Œæ•°ï¼š1
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>è¾“å‡ºä¸­æ‰“å°äº†è¯¦ç»†çš„sqlè¯­å¥ï¼Œä»¥åŠsqlçš„å‚æ•°ä¿¡æ¯ï¼Œå¯ä»¥çœ‹åˆ°Mapper xmlä¸­çš„<code>#{}</code>è¢«æ›¿æ¢ä¸ºäº†<code>?</code>ï¼Œè¿™ä¸ªä½¿ç”¨åˆ°äº†jdbcä¸­çš„<code>PreparedStatement</code>æ¥å¯¹å‚æ•°è®¾ç½®å€¼ã€‚</p><p>è¾“å‡ºä¸­çš„ç¬¬äºŒè¡Œè¯¦ç»†åˆ—å‡ºäº†å‚æ•°çš„å€¼ä»¥åŠæ¯ä¸ªå€¼çš„ç±»å‹ã€‚</p><p>ç¬¬ä¸‰è¡Œè¾“å‡ºäº†insertçš„ç»“æœä¸º1ï¼Œè¡¨ç¤ºæ’å…¥æˆåŠŸäº†1è¡Œè®°å½•ã€‚</p></blockquote><p>å»dbä¸­çœ‹ä¸€ä¸‹ï¼Œå¦‚ä¸‹ï¼Œæ’å…¥æˆåŠŸï¼š</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code>mysql<span class="token operator">&gt;</span> <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> t_user<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">----+---------------+-----+----------+-----+</span>
<span class="token operator">|</span> id <span class="token operator">|</span> name          <span class="token operator">|</span> age <span class="token operator">|</span> salary   <span class="token operator">|</span> sex <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----+---------------+-----+----------+-----+</span>
<span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> è·¯äººç”²Java    <span class="token operator">|</span>  <span class="token number">30</span> <span class="token operator">|</span> <span class="token number">50000.00</span> <span class="token operator">|</span>   <span class="token number">1</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----+---------------+-----+----------+-----+</span>
<span class="token number">1</span> <span class="token keyword">row</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸Šé¢ä»£ç ä¸­åˆ›å»ºSqlSessionï¼Œæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯<code>sqlSessionFactory.openSession()</code>åˆ›å»ºçš„ï¼Œè¿™ä¸ªæ–¹æ³•åˆ›å»ºçš„SqlSessionï¼Œå†…éƒ¨äº‹åŠ¡æ˜¯éè‡ªåŠ¨æäº¤çš„æ–¹å¼ï¼Œæ‰€ä»¥éœ€è¦æˆ‘ä»¬æ‰‹åŠ¨æäº¤ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>sqlSession<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>å¦‚æœæƒ³è‡ªåŠ¨æäº¤äº‹åŠ¡ï¼Œå¯ä»¥å°†ä¸Šé¢çš„æµ‹è¯•ç”¨ä¾‹æ”¹æˆä¸‹é¢è¿™æ ·ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">insertUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">(</span><span class="token class-name">SqlSession</span> sqlSession <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>sqlSessionFactory<span class="token punctuation">.</span><span class="token function">openSession</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//åˆ›å»ºUserModelå¯¹è±¡</span>
        <span class="token class-name">UserModel</span> userModel <span class="token operator">=</span> <span class="token class-name">UserModel</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">id</span><span class="token punctuation">(</span><span class="token number">1L</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token string">&quot;è·¯äººç”²Java&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">age</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">salary</span><span class="token punctuation">(</span><span class="token number">50000D</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sex</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//æ‰§è¡Œæ’å…¥æ“ä½œ</span>
        <span class="token keyword">int</span> result <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token string">&quot;com.javacode2018.chat02.UserMapper.insertUser&quot;</span><span class="token punctuation">,</span> userModel<span class="token punctuation">)</span><span class="token punctuation">;</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;å½±å“è¡Œæ•°ï¼š{}&quot;</span><span class="token punctuation">,</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸Šé¢åœ¨åˆ›å»ºSqlSessionçš„æ—¶å€™è°ƒç”¨äº†<code>sqlSessionFactory.openSession(true)</code>ï¼ŒæŒ‡å®šäº‹åŠ¡ä¸ºè‡ªåŠ¨æäº¤æ¨¡å¼ï¼Œæ‰€ä»¥æœ€åæˆ‘ä»¬ä¸éœ€è¦æ‰‹åŠ¨æäº¤äº‹åŠ¡äº†ã€‚</p><h3 id="_3-æ›´æ–°æ“ä½œ" tabindex="-1"><a class="header-anchor" href="#_3-æ›´æ–°æ“ä½œ" aria-hidden="true">#</a> 3.æ›´æ–°æ“ä½œ</h3><p>éœ€æ±‚ï¼šä¼ å…¥<code>UserModel</code>å¯¹è±¡ï¼Œç„¶åé€šè¿‡idæ›´æ–°æ•°æ®ã€‚</p><h4 id="usermapper-xmlä¸­å®šä¹‰updateæ“ä½œ" tabindex="-1"><a class="header-anchor" href="#usermapper-xmlä¸­å®šä¹‰updateæ“ä½œ" aria-hidden="true">#</a> UserMapper.xmlä¸­å®šä¹‰Updateæ“ä½œ</h4><p>ä½¿ç”¨updateå®šä¹‰æ›´æ–°æ“ä½œï¼š</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!-- updateç”¨æ¥å®šä¹‰ä¸€ä¸ªæ›´æ–°æ“ä½œ
     idï¼šæ“ä½œçš„å…·ä½“æ ‡è¯†
     parameterTypeï¼šæŒ‡å®šæ“ä½œæ¥å—çš„å‚æ•°ç±»å‹
 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>update</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>updateUser<span class="token punctuation">&quot;</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.javacode2018.chat02.UserModel<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token cdata">&lt;![CDATA[
    UPDATE t_user SET name = #{name},age = #{age},salary = #{salary},sex = #{sex} WHERE id = #{id}
    ]]&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>update</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å†™æ³•å’Œinsertæ“ä½œçš„å†™æ³•ç±»ä¼¼ï¼ŒæŒ‡å®šidæ ‡è¯†ã€parameterTypeæŒ‡å®šæ“ä½œçš„å‚æ•°ç±»å‹ï¼Œå…ƒç´ ä½“ä¸­æ˜¯å…·ä½“çš„sqlè¯­å¥ã€‚</p><h4 id="è°ƒç”¨sqlsession-updateæ–¹æ³•æ‰§è¡Œæ›´æ–°æ“ä½œ" tabindex="-1"><a class="header-anchor" href="#è°ƒç”¨sqlsession-updateæ–¹æ³•æ‰§è¡Œæ›´æ–°æ“ä½œ" aria-hidden="true">#</a> è°ƒç”¨SqlSession.updateæ–¹æ³•æ‰§è¡Œæ›´æ–°æ“ä½œ</h4><p>éœ€è¦è°ƒç”¨<code>SqlSession.update</code>æ–¹æ³•ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">int</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token class-name">String</span> statement<span class="token punctuation">,</span> <span class="token class-name">Object</span> parameter<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>è¿™ä¸ªæ–¹æ³•æœ‰2ä¸ªå‚æ•°:</p><p><strong>statement</strong>ï¼šè¡¨ç¤ºå“ªä¸ªæ“ä½œï¼Œå€¼ä¸ºMapper xmlçš„<code>namespace.å…·ä½“æ“ä½œçš„id</code>ï¼Œå¦‚éœ€è¦è°ƒç”¨<code>UserMapper.xml</code>ä¸­çš„<code>updateUser</code>æ“ä½œï¼Œè¿™ä¸ªå€¼å°±æ˜¯ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>javacode2018<span class="token punctuation">.</span>chat02<span class="token punctuation">.</span></span>UserMapper</span><span class="token punctuation">.</span>updateUser
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>parameter</strong>ï¼šupdateæ“ä½œçš„å‚æ•°ï¼Œå’ŒMapper xmlä¸­çš„updateä¸­çš„<code>parameterType</code>æŒ‡å®šçš„ç±»å‹ä¸€è‡´ã€‚</p><p>è¿”å›å€¼ä¸ºupdateå½±å“è¡Œæ•°ã€‚</p><p><code>UserTest</code>ç±»ä¸­æ–°å¢ä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">updateUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">(</span><span class="token class-name">SqlSession</span> sqlSession <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>sqlSessionFactory<span class="token punctuation">.</span><span class="token function">openSession</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//åˆ›å»ºUserModelå¯¹è±¡</span>
        <span class="token class-name">UserModel</span> userModel <span class="token operator">=</span> <span class="token class-name">UserModel</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">id</span><span class="token punctuation">(</span><span class="token number">1L</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token string">&quot;è·¯äººç”²Javaï¼Œä½ å¥½&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">age</span><span class="token punctuation">(</span><span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">salary</span><span class="token punctuation">(</span><span class="token number">5000D</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sex</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//æ‰§è¡Œæ›´æ–°æ“ä½œ</span>
        <span class="token keyword">int</span> result <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token string">&quot;com.javacode2018.chat02.UserMapper.updateUser&quot;</span><span class="token punctuation">,</span> userModel<span class="token punctuation">)</span><span class="token punctuation">;</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;å½±å“è¡Œæ•°ï¼š{}&quot;</span><span class="token punctuation">,</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>14:09.051 [main] DEBUG c.j.chat02.UserMapper.updateUser - ==&gt;  Preparing: UPDATE t_user SET name = ?,age = ?,salary = ?,sex = ? WHERE id = ? 
14:09.095 [main] DEBUG c.j.chat02.UserMapper.updateUser - ==&gt; Parameters: è·¯äººç”²Javaï¼Œä½ å¥½(String), 18(Integer), 5000.0(Double), 0(Integer), 1(Long)
14:09.100 [main] DEBUG c.j.chat02.UserMapper.updateUser - &lt;==    Updates: 1
14:09.101 [main] INFO  com.javacode2018.chat02.UserTest - å½±å“è¡Œæ•°ï¼š1
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code>mysql<span class="token operator">&gt;</span> <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> t_user<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">----+------------------------+-----+----------+-----+</span>
<span class="token operator">|</span> id <span class="token operator">|</span> name                   <span class="token operator">|</span> age <span class="token operator">|</span> salary   <span class="token operator">|</span> sex <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----+------------------------+-----+----------+-----+</span>
<span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> è·¯äººç”²Javaï¼Œä½ å¥½       <span class="token operator">|</span>  <span class="token number">18</span> <span class="token operator">|</span>  <span class="token number">5000.00</span> <span class="token operator">|</span>   <span class="token number">0</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">2</span> <span class="token operator">|</span> javacode2018           <span class="token operator">|</span>  <span class="token number">30</span> <span class="token operator">|</span> <span class="token number">50000.00</span> <span class="token operator">|</span>   <span class="token number">1</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----+------------------------+-----+----------+-----+</span>
<span class="token number">2</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-åˆ é™¤æ“ä½œ" tabindex="-1"><a class="header-anchor" href="#_4-åˆ é™¤æ“ä½œ" aria-hidden="true">#</a> 4.åˆ é™¤æ“ä½œ</h3><p>éœ€æ±‚ï¼šæ ¹æ®ç”¨æˆ·çš„idåˆ é™¤å¯¹åº”çš„ç”¨æˆ·è®°å½•</p><h4 id="usermapper-xmlä¸­å®šä¹‰deleteæ“ä½œ" tabindex="-1"><a class="header-anchor" href="#usermapper-xmlä¸­å®šä¹‰deleteæ“ä½œ" aria-hidden="true">#</a> UserMapper.xmlä¸­å®šä¹‰Deleteæ“ä½œ</h4><p>ä½¿ç”¨updateå…ƒç´ å®šä¹‰åˆ é™¤æ“ä½œï¼š</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!-- updateç”¨æ¥å®šä¹‰ä¸€ä¸ªåˆ é™¤æ“ä½œ
     idï¼šæ“ä½œçš„å…·ä½“æ ‡è¯†
     parameterTypeï¼šæŒ‡å®šæ“ä½œæ¥å—çš„å‚æ•°ç±»å‹
 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>update</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>deleteUser<span class="token punctuation">&quot;</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>java.lang.Long<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token cdata">&lt;![CDATA[
    DELETE FROM t_user WHERE id = #{id}
    ]]&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>update</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å†™æ³•å’Œupdateæ“ä½œçš„å†™æ³•ç±»ä¼¼ï¼ŒæŒ‡å®šidæ ‡è¯†ã€parameterTypeæŒ‡å®šæ“ä½œçš„å‚æ•°ç±»å‹ï¼Œç”¨æˆ·idä¸º<code>Long</code>ç±»å‹çš„ï¼Œå…ƒç´ ä½“ä¸­æ˜¯å…·ä½“çš„deleteè¯­å¥ã€‚</p><h4 id="è°ƒç”¨sqlsession-updateæ–¹æ³•æ‰§è¡Œæ›´æ–°æ“ä½œ-1" tabindex="-1"><a class="header-anchor" href="#è°ƒç”¨sqlsession-updateæ–¹æ³•æ‰§è¡Œæ›´æ–°æ“ä½œ-1" aria-hidden="true">#</a> è°ƒç”¨SqlSession.updateæ–¹æ³•æ‰§è¡Œæ›´æ–°æ“ä½œ</h4><p>éœ€è¦è°ƒç”¨<code>SqlSession.delete</code>æ–¹æ³•ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">int</span> <span class="token function">delete</span><span class="token punctuation">(</span><span class="token class-name">String</span> statement<span class="token punctuation">,</span> <span class="token class-name">Object</span> parameter<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>è¿™ä¸ªæ–¹æ³•æœ‰2ä¸ªå‚æ•°:</p><p><strong>statement</strong>ï¼šè¡¨ç¤ºå“ªä¸ªæ“ä½œï¼Œå€¼ä¸ºMapper xmlçš„<code>namespace.å…·ä½“æ“ä½œçš„id</code>ï¼Œå¦‚éœ€è¦è°ƒç”¨<code>UserMapper.xml</code>ä¸­çš„<code>deleteUser</code>æ“ä½œï¼Œè¿™ä¸ªå€¼å°±æ˜¯ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>javacode2018<span class="token punctuation">.</span>chat02<span class="token punctuation">.</span></span>UserMapper</span><span class="token punctuation">.</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>parameter</strong>ï¼šdeleteæ“ä½œçš„å‚æ•°ï¼Œå’ŒMapper xmlä¸­çš„deleteä¸­çš„<code>parameterType</code>æŒ‡å®šçš„ç±»å‹ä¸€è‡´ã€‚</p><p>è¿”å›å€¼ä¸ºdeleteå½±å“è¡Œæ•°ã€‚</p><p><code>UserTest</code>ç±»ä¸­æ–°å¢ä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">deleteUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">(</span><span class="token class-name">SqlSession</span> sqlSession <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>sqlSessionFactory<span class="token punctuation">.</span><span class="token function">openSession</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//å®šä¹‰éœ€è¦åˆ é™¤çš„ç”¨æˆ·id</span>
        <span class="token class-name">Long</span> userId <span class="token operator">=</span> <span class="token number">1L</span><span class="token punctuation">;</span>
        <span class="token comment">//æ‰§è¡Œåˆ é™¤æ“ä½œ</span>
        <span class="token keyword">int</span> result <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token string">&quot;com.javacode2018.chat02.UserMapper.deleteUser&quot;</span><span class="token punctuation">,</span> userId<span class="token punctuation">)</span><span class="token punctuation">;</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;å½±å“è¡Œæ•°ï¼š{}&quot;</span><span class="token punctuation">,</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>24:45.427 [main] DEBUG c.j.chat02.UserMapper.deleteUser - ==&gt;  Preparing: DELETE FROM t_user WHERE id = ? 
24:45.476 [main] DEBUG c.j.chat02.UserMapper.deleteUser - ==&gt; Parameters: 1(Long)
24:45.485 [main] DEBUG c.j.chat02.UserMapper.deleteUser - &lt;==    Updates: 1
24:45.485 [main] INFO  com.javacode2018.chat02.UserTest - å½±å“è¡Œæ•°ï¼š1
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_5-æŸ¥è¯¢æ“ä½œ" tabindex="-1"><a class="header-anchor" href="#_5-æŸ¥è¯¢æ“ä½œ" aria-hidden="true">#</a> 5.æŸ¥è¯¢æ“ä½œ</h3><p>éœ€æ±‚ï¼šæŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·ä¿¡æ¯</p><h4 id="usermapper-xmlä¸­å®šä¹‰selectæ“ä½œ" tabindex="-1"><a class="header-anchor" href="#usermapper-xmlä¸­å®šä¹‰selectæ“ä½œ" aria-hidden="true">#</a> UserMapper.xmlä¸­å®šä¹‰Selectæ“ä½œ</h4><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!-- selectç”¨æ¥å®šä¹‰ä¸€ä¸ªæŸ¥è¯¢æ“ä½œ
     idï¼šæ“ä½œçš„å…·ä½“æ ‡è¯†
     resultTypeï¼šæŒ‡å®šæŸ¥è¯¢ç»“æœä¿å­˜çš„ç±»å‹
 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>getUserList<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.javacode2018.chat02.UserModel<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token cdata">&lt;![CDATA[
    SELECT * FROM t_user
    ]]&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å†™æ³•å’Œupdateæ“ä½œçš„å†™æ³•ç±»ä¼¼ï¼ŒæŒ‡å®šidæ ‡è¯†ã€parameterTypeæŒ‡å®šæ“ä½œçš„å‚æ•°ç±»å‹ï¼ŒresultTypeæŒ‡å®šæŸ¥è¯¢ç»“æœçš„ç±»å‹ï¼Œå…ƒç´ ä½“ä¸­æ˜¯å…·ä½“çš„selectè¯­å¥ã€‚</p><h4 id="è°ƒç”¨sqlsession-selectæ–¹æ³•æ‰§è¡Œæ›´æ–°æ“ä½œ" tabindex="-1"><a class="header-anchor" href="#è°ƒç”¨sqlsession-selectæ–¹æ³•æ‰§è¡Œæ›´æ–°æ“ä½œ" aria-hidden="true">#</a> è°ƒç”¨SqlSession.selectæ–¹æ³•æ‰§è¡Œæ›´æ–°æ“ä½œ</h4><p>UserTestæ·»åŠ ä¸€ä¸ªç”¨ä¾‹ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">getUserList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">(</span><span class="token class-name">SqlSession</span> sqlSession <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>sqlSessionFactory<span class="token punctuation">.</span><span class="token function">openSession</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//æ‰§è¡ŒæŸ¥è¯¢æ“ä½œ</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">UserModel</span><span class="token punctuation">&gt;</span></span> userModelList <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">selectList</span><span class="token punctuation">(</span><span class="token string">&quot;com.javacode2018.chat02.UserMapper.getUserList&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;ç»“æœï¼š{}&quot;</span><span class="token punctuation">,</span> userModelList<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¤šæ’å…¥å‡ è¡Œï¼Œç„¶åè¿è¡Œä¸Šé¢çš„ç”¨ä¾‹ï¼Œè¾“å‡ºå¦‚ä¸‹ï¼š</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>36:39.015 [main] DEBUG c.j.chat02.UserMapper.getUserList - ==&gt;  Preparing: SELECT * FROM t_user 
36:39.048 [main] DEBUG c.j.chat02.UserMapper.getUserList - ==&gt; Parameters: 
36:39.066 [main] DEBUG c.j.chat02.UserMapper.getUserList - &lt;==      Total: 3
36:39.067 [main] INFO  com.javacode2018.chat02.UserTest - UserModel(id=2, name=javacode2018, age=30, salary=50000.0, sex=1)
36:39.069 [main] INFO  com.javacode2018.chat02.UserTest - UserModel(id=1575621274235, name=è·¯äººç”²Java, age=30, salary=50000.0, sex=1)
36:39.069 [main] INFO  com.javacode2018.chat02.UserTest - UserModel(id=1575621329823, name=è·¯äººç”²Java, age=30, salary=50000.0, sex=1)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_3-mapperæ¥å£çš„ä½¿ç”¨" tabindex="-1"><a class="header-anchor" href="#_3-mapperæ¥å£çš„ä½¿ç”¨" aria-hidden="true">#</a> 3-Mapperæ¥å£çš„ä½¿ç”¨</h2><h3 id="_1-ä¸ºä»€ä¹ˆä½¿ç”¨mapperæ¥å£" tabindex="-1"><a class="header-anchor" href="#_1-ä¸ºä»€ä¹ˆä½¿ç”¨mapperæ¥å£" aria-hidden="true">#</a> 1.ä¸ºä»€ä¹ˆä½¿ç”¨Mapperæ¥å£</h3><p>ä¸Šé¢æˆ‘ä»¬è®²è§£äº†å¯¹ä¸€ä¸ªè¡¨çš„å¢åˆ æ”¹æŸ¥æ“ä½œï¼Œéƒ½æ˜¯é€šè¿‡è°ƒç”¨SqlSessionä¸­çš„æ–¹æ³•æ¥å®Œæˆçš„ï¼Œå¤§å®¶å†æ¥çœ‹ä¸€ä¸‹SqlSessionæ¥å£ä¸­åˆšæ‰ç”¨åˆ°çš„å‡ ä¸ªæ–¹æ³•çš„å®šä¹‰ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">int</span> <span class="token function">insert</span><span class="token punctuation">(</span><span class="token class-name">String</span> statement<span class="token punctuation">,</span> <span class="token class-name">Object</span> parameter<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token class-name">String</span> statement<span class="token punctuation">,</span> <span class="token class-name">Object</span> parameter<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token function">delete</span><span class="token punctuation">(</span><span class="token class-name">String</span> statement<span class="token punctuation">,</span> <span class="token class-name">Object</span> parameter<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token function">selectList</span><span class="token punctuation">(</span><span class="token class-name">String</span> statement<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™äº›æ–¹æ³•çš„ç‰¹ç‚¹æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ï¼š</p><ol><li>è°ƒç”¨è¿™äº›æ–¹æ³•ï¼Œéœ€è¦æ˜ç¡®çŸ¥é“<code>statement</code>çš„å€¼ï¼Œstatementçš„å€¼ä¸º<code>namespace.å…·ä½“æ“ä½œçš„id</code>ï¼Œè¿™äº›éœ€è¦æ‰“å¼€<code>Mapper xml</code>ä¸­å»æŸ¥çœ‹äº†æ‰çŸ¥é“ï¼Œå†™èµ·æ¥ä¸æ–¹ä¾¿</li><li>parameterå‚æ•°éƒ½æ˜¯Objectç±»å‹çš„ï¼Œæˆ‘ä»¬æ ¹æœ¬ä¸çŸ¥é“è¿™ä¸ªæ“ä½œå…·ä½“ç±»å‹æ˜¯ä»€ä¹ˆï¼Œéœ€è¦æŸ¥çœ‹<code>Mapper xml</code>æ‰çŸ¥é“ï¼Œéšä¾¿ä¼ é€’ä¸ªå€¼ï¼Œå¯èƒ½ç±»å‹ä¸åŒ¹é…ï¼Œä½†æ˜¯åªæœ‰åœ¨è¿è¡Œçš„æ—¶å€™æ‰çŸ¥é“æœ‰é—®é¢˜</li><li>selectListæ–¹æ³•è¿”å›çš„æ˜¯ä¸€ä¸ªæ³›å‹ç±»å‹çš„ï¼Œé€šè¿‡è¿™ä¸ªæ–¹æ³•æˆ‘ä»¬æ ¹æœ¬ä¸çŸ¥é“è¿”å›çš„ç»“æœçš„å…·ä½“ç±»å‹ï¼Œä¹Ÿéœ€è¦å»æŸ¥çœ‹<code>Mapper xml</code>æ‰çŸ¥é“</li></ol><p>ä»¥ä¸Šè¿™å‡ ç‚¹ä½¿ç”¨éƒ½ä¸æ˜¯å¤ªæ–¹ä¾¿ï¼Œæœ‰ä»€ä¹ˆæ–¹æ³•èƒ½è§£å†³ä¸Šé¢è¿™äº›é—®é¢˜ä¹ˆï¼Ÿ</p><p>æœ‰ï¼Œè¿™å°±æ˜¯mybatisä¸­çš„Mapperæ¥å£ï¼Œæˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€ä¸ªinterfaceï¼Œç„¶åå’ŒMapper xmlå…³è”èµ·æ¥ï¼ŒMapper xmlä¸­çš„æ“ä½œå’ŒMapperæ¥å£ä¸­çš„æ–¹æ³•ä¼šè¿›è¡Œç»‘å®šï¼Œå½“æˆ‘ä»¬è°ƒç”¨Mapperæ¥å£çš„æ–¹æ³•çš„æ—¶å€™ï¼Œä¼šé—´æ¥è°ƒç”¨åˆ°Mapper xmlä¸­çš„æ“ä½œï¼Œæ¥å£çš„å®Œæ•´ç±»åéœ€è¦å’ŒMapper xmlä¸­çš„namespaceä¸€è‡´ã€‚</p><h3 id="_2-å¦‚ä½•ä½¿ç”¨mapperæ¥å£" tabindex="-1"><a class="header-anchor" href="#_2-å¦‚ä½•ä½¿ç”¨mapperæ¥å£" aria-hidden="true">#</a> 2.å¦‚ä½•ä½¿ç”¨mapperæ¥å£</h3><h4 id="æ­¥éª¤1-å®šä¹‰mapperæ¥å£" tabindex="-1"><a class="header-anchor" href="#æ­¥éª¤1-å®šä¹‰mapperæ¥å£" aria-hidden="true">#</a> æ­¥éª¤1ï¼šå®šä¹‰Mapperæ¥å£</h4><p>å»çœ‹ä¸€ä¸‹ï¼ŒUserMapper.xmlä¸­çš„namespaceï¼Œæ˜¯ï¼š</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">namespace</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.javacode2018.chat02.UserMapper<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>æˆ‘ä»¬åˆ›å»ºçš„æ¥å£å®Œæ•´çš„åç§°éœ€è¦å’Œä¸Šé¢çš„namespaceçš„å€¼ä¸€æ ·ï¼Œä¸‹é¢æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ¥å£<code>com.javacode2018.chat02.UserMapper</code>ï¼Œå¦‚ä¸‹ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>javacode2018<span class="token punctuation">.</span>chat02</span><span class="token punctuation">;</span>
<span class="token doc-comment comment">/**
 * å…¬ä¼—å·ï¼šè·¯äººç”²Javaï¼Œå·¥ä½œ10å¹´çš„å‰é˜¿é‡ŒP7åˆ†äº«Javaã€ç®—æ³•ã€æ•°æ®åº“æ–¹é¢çš„æŠ€æœ¯å¹²è´§ï¼åšä¿¡ç”¨æŠ€æœ¯æ”¹å˜å‘½è¿ï¼Œè®©å®¶äººè¿‡ä¸Šæ›´ä½“é¢çš„ç”Ÿæ´»!
 */</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">UserMapper</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>UserMapper.xmlä¸­æœ‰4ä¸ªæ“ä½œï¼Œæˆ‘ä»¬éœ€è¦åœ¨UserMapperæ¥å£ä¸­ä¹Ÿå®šä¹‰4ä¸ªæ“ä½œï¼Œå’ŒUserMapper.xmlçš„4ä¸ªæ“ä½œå¯¹åº”ï¼Œå¦‚ä¸‹ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>javacode2018<span class="token punctuation">.</span>chat02</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span>
<span class="token doc-comment comment">/**
 * å…¬ä¼—å·ï¼šè·¯äººç”²Javaï¼Œå·¥ä½œ10å¹´çš„å‰é˜¿é‡ŒP7åˆ†äº«Javaã€ç®—æ³•ã€æ•°æ®åº“æ–¹é¢çš„æŠ€æœ¯å¹²è´§ï¼åšä¿¡ç”¨æŠ€æœ¯æ”¹å˜å‘½è¿ï¼Œè®©å®¶äººè¿‡ä¸Šæ›´ä½“é¢çš„ç”Ÿæ´»!
 */</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">UserMapper</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> <span class="token function">insertUser</span><span class="token punctuation">(</span><span class="token class-name">UserModel</span> model<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> <span class="token function">updateUser</span><span class="token punctuation">(</span><span class="token class-name">UserModel</span> model<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> <span class="token function">deleteUser</span><span class="token punctuation">(</span><span class="token class-name">Long</span> userId<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">UserModel</span><span class="token punctuation">&gt;</span></span> <span class="token function">getUserList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>UserMapperæ¥å£ä¸­å®šä¹‰äº†4ä¸ªæ–¹æ³•ï¼Œæ–¹æ³•çš„åç§°éœ€è¦å’ŒUserMapper.xmlå…·ä½“æ“ä½œçš„idå€¼ä¸€æ ·ï¼Œè¿™æ ·è°ƒç”¨UserMapperæ¥å£ä¸­çš„æ–¹æ³•çš„æ—¶å€™ï¼Œæ‰ä¼šå¯¹åº”çš„æ‰¾åˆ°UserMapper.xmlä¸­å…·ä½“çš„æ“ä½œã€‚</p><p>æ¯”å¦‚è°ƒç”¨<code>UserMapper</code>æ¥å£ä¸­çš„<code>insertUser</code>æ–¹æ³•ï¼ŒmybatisæŸ¥æ‰¾çš„è§„åˆ™æ˜¯ï¼šé€šè¿‡<code>æ¥å£å®Œæ•´åç§°.æ–¹æ³•</code>åç§°å»Mapper xmlä¸­æ‰¾åˆ°å¯¹åº”çš„æ“ä½œã€‚</p><h4 id="æ­¥éª¤2-é€šè¿‡sqlsessionè·å–mapperæ¥å£å¯¹è±¡" tabindex="-1"><a class="header-anchor" href="#æ­¥éª¤2-é€šè¿‡sqlsessionè·å–mapperæ¥å£å¯¹è±¡" aria-hidden="true">#</a> æ­¥éª¤2ï¼šé€šè¿‡SqlSessionè·å–Mapperæ¥å£å¯¹è±¡</h4><p>SqlSessionä¸­æœ‰ä¸ª<code>getMapper</code>æ–¹æ³•ï¼Œå¯ä»¥ä¼ å…¥æ¥å£çš„ç±»å‹ï¼Œè·å–å…·ä½“çš„Mapperæ¥å£å¯¹è±¡ï¼Œå¦‚ä¸‹ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code> <span class="token doc-comment comment">/**
   * Retrieves a mapper.
   * <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">&lt;</span>T<span class="token punctuation">&gt;</span></span> the mapper type
   * <span class="token keyword">@param</span> <span class="token parameter">type</span> Mapper interface class
   * <span class="token keyword">@return</span> a mapper bound to this SqlSession
   */</span>
  <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">T</span> <span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> type<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦‚è·å–UserMapperæ¥å£å¯¹è±¡ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">UserMapper</span> mapper <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">UserMapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="æ­¥éª¤3-è°ƒç”¨mapperæ¥å£çš„æ–¹æ³•å¯¹dbè¿›è¡Œæ“ä½œ" tabindex="-1"><a class="header-anchor" href="#æ­¥éª¤3-è°ƒç”¨mapperæ¥å£çš„æ–¹æ³•å¯¹dbè¿›è¡Œæ“ä½œ" aria-hidden="true">#</a> æ­¥éª¤3ï¼šè°ƒç”¨Mapperæ¥å£çš„æ–¹æ³•å¯¹dbè¿›è¡Œæ“ä½œ</h4><p>å¦‚è°ƒç”¨UserMapperæ¥å£çš„insertæ“ä½œï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">insertUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">(</span><span class="token class-name">SqlSession</span> sqlSession <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>sqlSessionFactory<span class="token punctuation">.</span><span class="token function">openSession</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">UserMapper</span> mapper <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">UserMapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//åˆ›å»ºUserModelå¯¹è±¡</span>
        <span class="token class-name">UserModel</span> userModel <span class="token operator">=</span> <span class="token class-name">UserModel</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">id</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token string">&quot;è·¯äººç”²Java&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">age</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">salary</span><span class="token punctuation">(</span><span class="token number">50000D</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sex</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//æ‰§è¡Œæ’å…¥æ“ä½œ</span>
        <span class="token keyword">int</span> insert <span class="token operator">=</span> mapper<span class="token punctuation">.</span><span class="token function">insertUser</span><span class="token punctuation">(</span>userModel<span class="token punctuation">)</span><span class="token punctuation">;</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;å½±å“è¡Œæ•°ï¼š{}&quot;</span><span class="token punctuation">,</span> insert<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-æ¡ˆä¾‹" tabindex="-1"><a class="header-anchor" href="#_3-æ¡ˆä¾‹" aria-hidden="true">#</a> 3.æ¡ˆä¾‹</h3><p>chat02/src/test/javaä¸­åˆ›å»ºä¸€ä¸ªæµ‹è¯•ç±»ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>javacode2018<span class="token punctuation">.</span>chat02</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span>extern<span class="token punctuation">.</span>slf4j<span class="token punctuation">.</span></span><span class="token class-name">Slf4j</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">Resources</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>session<span class="token punctuation">.</span></span><span class="token class-name">SqlSession</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>session<span class="token punctuation">.</span></span><span class="token class-name">SqlSessionFactory</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>session<span class="token punctuation">.</span></span><span class="token class-name">SqlSessionFactoryBuilder</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span></span><span class="token class-name">Before</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span></span><span class="token class-name">Test</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">InputStream</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span>
<span class="token doc-comment comment">/**
 * å…¬ä¼—å·ï¼šè·¯äººç”²Javaï¼Œå·¥ä½œ10å¹´çš„å‰é˜¿é‡ŒP7åˆ†äº«Javaã€ç®—æ³•ã€æ•°æ®åº“æ–¹é¢çš„æŠ€æœ¯å¹²è´§ï¼åšä¿¡ç”¨æŠ€æœ¯æ”¹å˜å‘½è¿ï¼Œè®©å®¶äººè¿‡ä¸Šæ›´ä½“é¢çš„ç”Ÿæ´»!
 */</span>
<span class="token annotation punctuation">@Slf4j</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserMapperTest</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">SqlSessionFactory</span> sqlSessionFactory<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@Before</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">before</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token comment">//æŒ‡å®šmybatiså…¨å±€é…ç½®æ–‡ä»¶</span>
        <span class="token class-name">String</span> resource <span class="token operator">=</span> <span class="token string">&quot;mybatis-config.xml&quot;</span><span class="token punctuation">;</span>
        <span class="token comment">//è¯»å–å…¨å±€é…ç½®æ–‡ä»¶</span>
        <span class="token class-name">InputStream</span> inputStream <span class="token operator">=</span> <span class="token class-name">Resources</span><span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span>resource<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//æ„å»ºSqlSessionFactoryå¯¹è±¡</span>
        <span class="token class-name">SqlSessionFactory</span> sqlSessionFactory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SqlSessionFactoryBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span>inputStream<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>sqlSessionFactory <span class="token operator">=</span> sqlSessionFactory<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">insertUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">(</span><span class="token class-name">SqlSession</span> sqlSession <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>sqlSessionFactory<span class="token punctuation">.</span><span class="token function">openSession</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">UserMapper</span> mapper <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">UserMapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//åˆ›å»ºUserModelå¯¹è±¡</span>
            <span class="token class-name">UserModel</span> userModel <span class="token operator">=</span> <span class="token class-name">UserModel</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">id</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token string">&quot;è·¯äººç”²Java&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">age</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">salary</span><span class="token punctuation">(</span><span class="token number">50000D</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sex</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//æ‰§è¡Œæ’å…¥æ“ä½œ</span>
            <span class="token keyword">int</span> insert <span class="token operator">=</span> mapper<span class="token punctuation">.</span><span class="token function">insertUser</span><span class="token punctuation">(</span>userModel<span class="token punctuation">)</span><span class="token punctuation">;</span>
            log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;å½±å“è¡Œæ•°ï¼š{}&quot;</span><span class="token punctuation">,</span> insert<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">updateUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">(</span><span class="token class-name">SqlSession</span> sqlSession <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>sqlSessionFactory<span class="token punctuation">.</span><span class="token function">openSession</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">UserMapper</span> mapper <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">UserMapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//åˆ›å»ºUserModelå¯¹è±¡</span>
            <span class="token class-name">UserModel</span> userModel <span class="token operator">=</span> <span class="token class-name">UserModel</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">id</span><span class="token punctuation">(</span><span class="token number">1L</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token string">&quot;è·¯äººç”²Javaï¼Œä½ å¥½&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">age</span><span class="token punctuation">(</span><span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">salary</span><span class="token punctuation">(</span><span class="token number">5000D</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sex</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//æ‰§è¡Œæ›´æ–°æ“ä½œ</span>
            <span class="token keyword">int</span> result <span class="token operator">=</span> mapper<span class="token punctuation">.</span><span class="token function">updateUser</span><span class="token punctuation">(</span>userModel<span class="token punctuation">)</span><span class="token punctuation">;</span>
            log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;å½±å“è¡Œæ•°ï¼š{}&quot;</span><span class="token punctuation">,</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">deleteUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">(</span><span class="token class-name">SqlSession</span> sqlSession <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>sqlSessionFactory<span class="token punctuation">.</span><span class="token function">openSession</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">UserMapper</span> mapper <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">UserMapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//å®šä¹‰éœ€è¦åˆ é™¤çš„ç”¨æˆ·id</span>
            <span class="token class-name">Long</span> userId <span class="token operator">=</span> <span class="token number">1L</span><span class="token punctuation">;</span>
            <span class="token comment">//æ‰§è¡Œåˆ é™¤æ“ä½œ</span>
            <span class="token keyword">int</span> result <span class="token operator">=</span> mapper<span class="token punctuation">.</span><span class="token function">deleteUser</span><span class="token punctuation">(</span>userId<span class="token punctuation">)</span><span class="token punctuation">;</span>
            log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;å½±å“è¡Œæ•°ï¼š{}&quot;</span><span class="token punctuation">,</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">getUserList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">(</span><span class="token class-name">SqlSession</span> sqlSession <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>sqlSessionFactory<span class="token punctuation">.</span><span class="token function">openSession</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">UserMapper</span> mapper <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">UserMapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//æ‰§è¡ŒæŸ¥è¯¢æ“ä½œ</span>
            <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">UserModel</span><span class="token punctuation">&gt;</span></span> userModelList <span class="token operator">=</span> mapper<span class="token punctuation">.</span><span class="token function">getUserList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            userModelList<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>item <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
                log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;{}&quot;</span><span class="token punctuation">,</span> item<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="mapperæ¥å£ä½¿ç”¨æ—¶æ³¨æ„çš„å‡ ç‚¹" tabindex="-1"><a class="header-anchor" href="#mapperæ¥å£ä½¿ç”¨æ—¶æ³¨æ„çš„å‡ ç‚¹" aria-hidden="true">#</a> Mapperæ¥å£ä½¿ç”¨æ—¶æ³¨æ„çš„å‡ ç‚¹</h4><ol><li>Mapperæ¥å£çš„å®Œæ•´ç±»åå¿…é¡»å’Œå¯¹åº”çš„Mapper xmlä¸­çš„namespaceçš„å€¼ä¸€è‡´</li><li>Mapperæ¥å£ä¸­æ–¹æ³•çš„åç§°éœ€è¦å’ŒMapper xmlä¸­å…·ä½“æ“ä½œçš„idå€¼ä¸€è‡´</li><li>Mapperæ¥å£ä¸­æ–¹æ³•çš„å‚æ•°ã€è¿”å›å€¼å¯ä»¥ä¸å’ŒMapper xmlä¸­çš„ä¸€è‡´</li></ol><h4 id="mapperæ¥å£çš„åŸç†" tabindex="-1"><a class="header-anchor" href="#mapperæ¥å£çš„åŸç†" aria-hidden="true">#</a> Mapperæ¥å£çš„åŸç†</h4><p>è¿™ä¸ªä½¿ç”¨javaä¸­çš„åŠ¨æ€ä»£ç†å®ç°çš„ï¼Œmybatiså¯åŠ¨çš„æ—¶å€™ä¼šåŠ è½½å…¨å±€é…ç½®æ–‡ä»¶<code>mybatis-config.xml</code>ï¼Œç„¶åè§£æè¿™ä¸ªæ–‡ä»¶ä¸­çš„<code>mapperå…ƒç´ æŒ‡å®šçš„UserMapper.xml</code>ï¼Œä¼šæ ¹æ®<code>UserMapper.xmlçš„namespaceçš„å€¼</code>åˆ›å»ºè¿™ä¸ªæ¥å£çš„ä¸€ä¸ªåŠ¨æ€ä»£ç†ï¼Œå…·ä½“å¯ä»¥å»çœ‹ä¸€ä¸‹mybatisçš„æºç ï¼Œä¸»è¦ä½¿ç”¨javaä¸­çš„Proxyå®ç°çš„ï¼Œä½¿ç”¨<code>java.lang.reflect.Proxy</code>ç±»ä¸­çš„<code>newProxyInstance</code>æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºä»»æ„ä¸€ä¸ªæ¥å£çš„ä¸€ä¸ªä»£ç†å¯¹è±¡ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Object</span> <span class="token function">newProxyInstance</span><span class="token punctuation">(</span><span class="token class-name">ClassLoader</span> loader<span class="token punctuation">,</span>
                                          <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> interfaces<span class="token punctuation">,</span>
                                          <span class="token class-name">InvocationHandler</span> h<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æˆ‘ä»¬ä½¿ç”¨Proxyæ¥æ¨¡ä»¿Mapperæ¥å£çš„å®ç°ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>javacode2018<span class="token punctuation">.</span>chat02</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span>extern<span class="token punctuation">.</span>slf4j<span class="token punctuation">.</span></span><span class="token class-name">Slf4j</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">Resources</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>session<span class="token punctuation">.</span></span><span class="token class-name">SqlSession</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>session<span class="token punctuation">.</span></span><span class="token class-name">SqlSessionFactory</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>session<span class="token punctuation">.</span></span><span class="token class-name">SqlSessionFactoryBuilder</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span></span><span class="token class-name">Before</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span></span><span class="token class-name">Test</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">InputStream</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span><span class="token class-name">InvocationHandler</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span><span class="token class-name">Method</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span><span class="token class-name">Proxy</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span>
<span class="token doc-comment comment">/**
 * å…¬ä¼—å·ï¼šè·¯äººç”²Javaï¼Œå·¥ä½œ10å¹´çš„å‰é˜¿é‡ŒP7åˆ†äº«Javaã€ç®—æ³•ã€æ•°æ®åº“æ–¹é¢çš„æŠ€æœ¯å¹²è´§ï¼åšä¿¡ç”¨æŠ€æœ¯æ”¹å˜å‘½è¿ï¼Œè®©å®¶äººè¿‡ä¸Šæ›´ä½“é¢çš„ç”Ÿæ´»!
 */</span>
<span class="token annotation punctuation">@Slf4j</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ProxyTest</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">UserMapperProxy</span> <span class="token keyword">implements</span> <span class="token class-name">InvocationHandler</span> <span class="token punctuation">{</span>
        <span class="token keyword">private</span> <span class="token class-name">SqlSession</span> sqlSession<span class="token punctuation">;</span>
        <span class="token keyword">private</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> mapperClass<span class="token punctuation">;</span>
        <span class="token keyword">public</span> <span class="token class-name">UserMapperProxy</span><span class="token punctuation">(</span><span class="token class-name">SqlSession</span> sqlSession<span class="token punctuation">,</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> mapperClass<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>sqlSession <span class="token operator">=</span> sqlSession<span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>mapperClass <span class="token operator">=</span> mapperClass<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">invoke</span><span class="token punctuation">(</span><span class="token class-name">Object</span> proxy<span class="token punctuation">,</span> <span class="token class-name">Method</span> method<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Throwable</span> <span class="token punctuation">{</span>
            log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;invoke start&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">String</span> statement <span class="token operator">=</span> mapperClass<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;.&quot;</span> <span class="token operator">+</span> method<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> result <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">selectList</span><span class="token punctuation">(</span>statement<span class="token punctuation">)</span><span class="token punctuation">;</span>
            log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;invoke end&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> result<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">private</span> <span class="token class-name">SqlSessionFactory</span> sqlSessionFactory<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@Before</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">before</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token comment">//æŒ‡å®šmybatiså…¨å±€é…ç½®æ–‡ä»¶</span>
        <span class="token class-name">String</span> resource <span class="token operator">=</span> <span class="token string">&quot;mybatis-config.xml&quot;</span><span class="token punctuation">;</span>
        <span class="token comment">//è¯»å–å…¨å±€é…ç½®æ–‡ä»¶</span>
        <span class="token class-name">InputStream</span> inputStream <span class="token operator">=</span> <span class="token class-name">Resources</span><span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span>resource<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//æ„å»ºSqlSessionFactoryå¯¹è±¡</span>
        <span class="token class-name">SqlSessionFactory</span> sqlSessionFactory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SqlSessionFactoryBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span>inputStream<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>sqlSessionFactory <span class="token operator">=</span> sqlSessionFactory<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">(</span><span class="token class-name">SqlSession</span> sqlSession <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>sqlSessionFactory<span class="token punctuation">.</span><span class="token function">openSession</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">UserMapper</span> userMapper <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">UserMapper</span><span class="token punctuation">)</span> <span class="token class-name">Proxy</span><span class="token punctuation">.</span><span class="token function">newProxyInstance</span><span class="token punctuation">(</span><span class="token class-name">ProxyTest</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Class</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token class-name">UserMapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">UserMapperProxy</span><span class="token punctuation">(</span>sqlSession<span class="token punctuation">,</span> <span class="token class-name">UserMapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;{}&quot;</span><span class="token punctuation">,</span> userMapper<span class="token punctuation">.</span><span class="token function">getUserList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸Šé¢ä»£ç ä¸­ï¼šUserMapperæ˜¯æ²¡æœ‰å®ç°ç±»çš„ï¼Œå¯ä»¥é€šè¿‡Proxy.newProxyInstanceç»™<code>UserMapper</code>æ¥å£åˆ›å»ºä¸€ä¸ªä»£ç†å¯¹è±¡ï¼Œå½“è°ƒç”¨<code>UserMapper</code>æ¥å£çš„æ–¹æ³•çš„æ—¶å€™ï¼Œä¼šè°ƒç”¨åˆ°<code>UserMapperProxy</code>å¯¹è±¡çš„<code>invoke</code>æ–¹æ³•ã€‚</p><p>è¿è¡Œä¸€ä¸‹<code>test1</code>ç”¨ä¾‹ï¼Œè¾“å‡ºå¦‚ä¸‹ï¼š</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>16:34.288 [main] DEBUG com.javacode2018.chat02.ProxyTest - invoke start
16:34.555 [main] DEBUG c.j.chat02.UserMapper.getUserList - ==&gt;  Preparing: SELECT * FROM t_user 
16:34.580 [main] DEBUG c.j.chat02.UserMapper.getUserList - ==&gt; Parameters: 
16:34.597 [main] DEBUG c.j.chat02.UserMapper.getUserList - &lt;==      Total: 4
16:34.597 [main] DEBUG com.javacode2018.chat02.ProxyTest - invoke end
16:34.597 [main] INFO  com.javacode2018.chat02.ProxyTest - [UserModel(id=2, name=javacode2018, age=30, salary=50000.0, sex=1), UserModel(id=1575621274235, name=è·¯äººç”²Java, age=30, salary=50000.0, sex=1), UserModel(id=1575621329823, name=è·¯äººç”²Java, age=30, salary=50000.0, sex=1), UserModel(id=1575623283897, name=è·¯äººç”²Java, age=30, salary=50000.0, sex=1)]
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ³¨æ„ä¸Šé¢è¾“å‡ºçš„<code>invoke start</code>å’Œ<code>invoke end</code>ï¼Œå¯ä»¥çœ‹åˆ°æˆ‘ä»¬è°ƒç”¨<code>userMapper.getUserList</code>æ—¶å€™ï¼Œè¢«<code>UserMapperProxy#invoke</code>æ–¹æ³•å¤„ç†äº†ã€‚</p><p>Mybatisä¸­åˆ›å»ºMapperæ¥å£ä»£ç†å¯¹è±¡ä½¿ç”¨çš„æ˜¯ä¸‹é¢è¿™ä¸ªç±»ï¼Œå¤§å®¶å¯ä»¥å»ç ”ç©¶ä¸€ä¸‹ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MapperProxyFactory</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
  <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> mapperInterface<span class="token punctuation">;</span>
  <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Method</span><span class="token punctuation">,</span> <span class="token class-name">MapperMethod</span><span class="token punctuation">&gt;</span></span> methodCache <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConcurrentHashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Method</span><span class="token punctuation">,</span> <span class="token class-name">MapperMethod</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">public</span> <span class="token class-name">MapperProxyFactory</span><span class="token punctuation">(</span><span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> mapperInterface<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>mapperInterface <span class="token operator">=</span> mapperInterface<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">public</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token function">getMapperInterface</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> mapperInterface<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">public</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Method</span><span class="token punctuation">,</span> <span class="token class-name">MapperMethod</span><span class="token punctuation">&gt;</span></span> <span class="token function">getMethodCache</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> methodCache<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token annotation punctuation">@SuppressWarnings</span><span class="token punctuation">(</span><span class="token string">&quot;unchecked&quot;</span><span class="token punctuation">)</span>
  <span class="token keyword">protected</span> <span class="token class-name">T</span> <span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token class-name">MapperProxy</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> mapperProxy<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token class-name">T</span><span class="token punctuation">)</span> <span class="token class-name">Proxy</span><span class="token punctuation">.</span><span class="token function">newProxyInstance</span><span class="token punctuation">(</span>mapperInterface<span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Class</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span> mapperInterface <span class="token punctuation">}</span><span class="token punctuation">,</span> mapperProxy<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">public</span> <span class="token class-name">T</span> <span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token class-name">SqlSession</span> sqlSession<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">final</span> <span class="token class-name">MapperProxy</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> mapperProxy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MapperProxy</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>sqlSession<span class="token punctuation">,</span> mapperInterface<span class="token punctuation">,</span> methodCache<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token function">newInstance</span><span class="token punctuation">(</span>mapperProxy<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_4-åˆ«åä½¿ç”¨è¯¦è§£" tabindex="-1"><a class="header-anchor" href="#_4-åˆ«åä½¿ç”¨è¯¦è§£" aria-hidden="true">#</a> 4-åˆ«åä½¿ç”¨è¯¦è§£</h2><h3 id="_1-å‡†å¤‡æ•°æ®åº“-1" tabindex="-1"><a class="header-anchor" href="#_1-å‡†å¤‡æ•°æ®åº“-1" aria-hidden="true">#</a> 1.å‡†å¤‡æ•°æ®åº“</h3><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">/*åˆ›å»ºæ•°æ®åº“javacode2018*/</span>
<span class="token keyword">DROP</span> <span class="token keyword">DATABASE</span> <span class="token keyword">IF</span> <span class="token keyword">EXISTS</span> <span class="token identifier"><span class="token punctuation">`</span>javacode2018<span class="token punctuation">`</span></span><span class="token punctuation">;</span>
<span class="token keyword">CREATE</span> <span class="token keyword">DATABASE</span> <span class="token identifier"><span class="token punctuation">`</span>javacode2018<span class="token punctuation">`</span></span><span class="token punctuation">;</span>
<span class="token keyword">USE</span> <span class="token identifier"><span class="token punctuation">`</span>javacode2018<span class="token punctuation">`</span></span><span class="token punctuation">;</span>
<span class="token comment">/*åˆ›å»ºè¡¨ç»“æ„*/</span>
<span class="token keyword">DROP</span> <span class="token keyword">TABLE</span> <span class="token keyword">IF</span> <span class="token keyword">EXISTS</span> <span class="token identifier"><span class="token punctuation">`</span>t_user<span class="token punctuation">`</span></span><span class="token punctuation">;</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> t_user <span class="token punctuation">(</span>
  id <span class="token keyword">BIGINT</span> <span class="token keyword">AUTO_INCREMENT</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token keyword">COMMENT</span> <span class="token string">&#39;ä¸»é”®ï¼Œç”¨æˆ·idï¼Œè‡ªåŠ¨å¢é•¿&#39;</span><span class="token punctuation">,</span>
  <span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span> <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token string">&#39;&#39;</span> <span class="token keyword">COMMENT</span> <span class="token string">&#39;å§“å&#39;</span><span class="token punctuation">,</span>
  <span class="token identifier"><span class="token punctuation">`</span>age<span class="token punctuation">`</span></span> <span class="token keyword">SMALLINT</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token number">1</span> <span class="token keyword">COMMENT</span> <span class="token string">&#39;å¹´é¾„&#39;</span><span class="token punctuation">,</span>
  <span class="token identifier"><span class="token punctuation">`</span>salary<span class="token punctuation">`</span></span> <span class="token keyword">DECIMAL</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token number">0</span> <span class="token keyword">COMMENT</span> <span class="token string">&#39;è–ªæ°´&#39;</span><span class="token punctuation">,</span>
  <span class="token identifier"><span class="token punctuation">`</span>sex<span class="token punctuation">`</span></span> <span class="token keyword">TINYINT</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token number">0</span> <span class="token keyword">COMMENT</span> <span class="token string">&#39;æ€§åˆ«,0:æœªçŸ¥,1:ç”·,2:å¥³&#39;</span>
<span class="token punctuation">)</span> <span class="token keyword">COMMENT</span> <span class="token string">&#39;ç”¨æˆ·è¡¨&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">DROP</span> <span class="token keyword">TABLE</span> <span class="token keyword">IF</span> <span class="token keyword">EXISTS</span> <span class="token identifier"><span class="token punctuation">`</span>t_order<span class="token punctuation">`</span></span><span class="token punctuation">;</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> t_order <span class="token punctuation">(</span>
  id <span class="token keyword">BIGINT</span> <span class="token keyword">AUTO_INCREMENT</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token keyword">COMMENT</span> <span class="token string">&#39;ä¸»é”®ï¼Œè®¢å•idï¼Œè‡ªåŠ¨å¢é•¿&#39;</span><span class="token punctuation">,</span>
  <span class="token identifier"><span class="token punctuation">`</span>user_id<span class="token punctuation">`</span></span> <span class="token keyword">BIGINT</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token number">0</span> <span class="token keyword">COMMENT</span> <span class="token string">&#39;ç”¨æˆ·id&#39;</span><span class="token punctuation">,</span>
  <span class="token identifier"><span class="token punctuation">`</span>price<span class="token punctuation">`</span></span> <span class="token keyword">DECIMAL</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token number">0</span> <span class="token keyword">COMMENT</span> <span class="token string">&#39;è®¢å•é‡‘é¢&#39;</span>
<span class="token punctuation">)</span> <span class="token keyword">COMMENT</span> <span class="token string">&#39;è®¢å•è¡¨&#39;</span><span class="token punctuation">;</span>
<span class="token comment">/*æ’å…¥å‡ æ¡æµ‹è¯•æ•°æ®*/</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> t_user <span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span><span class="token punctuation">,</span><span class="token identifier"><span class="token punctuation">`</span>age<span class="token punctuation">`</span></span><span class="token punctuation">,</span><span class="token identifier"><span class="token punctuation">`</span>salary<span class="token punctuation">`</span></span><span class="token punctuation">,</span><span class="token identifier"><span class="token punctuation">`</span>sex<span class="token punctuation">`</span></span><span class="token punctuation">)</span>
<span class="token keyword">VALUES</span>
  <span class="token punctuation">(</span><span class="token string">&#39;è·¯äººç”²Java&#39;</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">,</span><span class="token number">50000</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">(</span><span class="token string">&#39;javacode2018&#39;</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">,</span><span class="token number">50000</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">(</span><span class="token string">&#39;å¼ å­¦å‹&#39;</span><span class="token punctuation">,</span><span class="token number">56</span><span class="token punctuation">,</span><span class="token number">500000</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">(</span><span class="token string">&#39;æ—å¿—ç²&#39;</span><span class="token punctuation">,</span><span class="token number">45</span><span class="token punctuation">,</span><span class="token number">88888.88</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> t_order <span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>user_id<span class="token punctuation">`</span></span><span class="token punctuation">,</span><span class="token identifier"><span class="token punctuation">`</span>price<span class="token punctuation">`</span></span><span class="token punctuation">)</span>
<span class="token keyword">VALUES</span>
  <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">88.88</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">666.66</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> t_user<span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> t_order<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-æ„å»ºå·¥ç¨‹chat03" tabindex="-1"><a class="header-anchor" href="#_2-æ„å»ºå·¥ç¨‹chat03" aria-hidden="true">#</a> 2.æ„å»ºå·¥ç¨‹chat03</h3><h4 id="åˆ›å»ºå·¥ç¨‹" tabindex="-1"><a class="header-anchor" href="#åˆ›å»ºå·¥ç¨‹" aria-hidden="true">#</a> åˆ›å»ºå·¥ç¨‹</h4><p>æ•´ä¸ªmybatisç³»åˆ—çš„ä»£ç é‡‡ç”¨mavenæ¨¡å—çš„æ–¹å¼ç®¡ç†çš„ï¼Œå¯ä»¥åœ¨æ–‡ç« åº•éƒ¨è·å–ï¼Œæœ¬æ¬¡æˆ‘ä»¬è¿˜æ˜¯åœ¨ä¸Šä¸€ç¯‡çš„<code>mybatis-series</code>ä¸­è¿›è¡Œå¼€å‘ï¼Œåœ¨è¿™ä¸ªé¡¹ç›®ä¸­æ–°å»ºä¸€ä¸ªæ¨¡å—<code>chat03</code>ï¼Œæ¨¡å—åæ ‡å¦‚ä¸‹ï¼š</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.javacode2018<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>chat03<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.0-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="åˆ›å»ºmybatisé…ç½®æ–‡ä»¶" tabindex="-1"><a class="header-anchor" href="#åˆ›å»ºmybatisé…ç½®æ–‡ä»¶" aria-hidden="true">#</a> åˆ›å»ºmybatisé…ç½®æ–‡ä»¶</h4><p>chat03\src\main\resources\demo1ç›®å½•åˆ›å»ºï¼Œmybatis-config.xmlï¼Œå¦‚ä¸‹ï¼š</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
<span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">configuration</span>
        <span class="token name">PUBLIC</span> <span class="token string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span>
        <span class="token string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>typeAliases</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>typeAliases</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- ç¯å¢ƒé…ç½®ï¼Œå¯ä»¥é…ç½®å¤šä¸ªç¯å¢ƒ --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>environments</span> <span class="token attr-name">default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>chat04-demo1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- 
            environmentç”¨æ¥å¯¹æŸä¸ªç¯å¢ƒè¿›è¡Œé…ç½®
            idï¼šç¯å¢ƒæ ‡è¯†ï¼Œå”¯ä¸€
         --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>environment</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>chat04-demo1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token comment">&lt;!-- äº‹åŠ¡ç®¡ç†å™¨å·¥å‚é…ç½® --&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>transactionManager</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.apache.ibatis.transaction.jdbc.JdbcTransactionFactory<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
            <span class="token comment">&lt;!-- æ•°æ®æºå·¥å‚é…ç½®ï¼Œä½¿ç”¨å·¥å‚æ¥åˆ›å»ºæ•°æ®æº --&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dataSource</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.apache.ibatis.datasource.pooled.PooledDataSourceFactory<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>driver<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.mysql.jdbc.Driver<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>url<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>jdbc:mysql://localhost:3306/javacode2018?characterEncoding=UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>root<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>root123<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dataSource</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>environment</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>environments</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mappers</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">resource</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>demo1/mapper/UserMapper.xml<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mappers</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="åˆ›å»ºusermapper-xmlæ–‡ä»¶" tabindex="-1"><a class="header-anchor" href="#åˆ›å»ºusermapper-xmlæ–‡ä»¶" aria-hidden="true">#</a> åˆ›å»ºUserMapper.xmlæ–‡ä»¶</h4><p><code>chat03\src\main\resources\demo1\mapper</code>ç›®å½•åˆ›å»ºï¼Œ<code>UserMapper.xml</code>ï¼Œå¦‚ä¸‹ï¼š</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
<span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">mapper</span> <span class="token name">PUBLIC</span> <span class="token string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span>
        <span class="token string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">namespace</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.javacode2018.chat03.demo1.UserMapper<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- insertç”¨æ¥å®šä¹‰ä¸€ä¸ªæ’å…¥æ“ä½œ
         idï¼šæ“ä½œçš„å…·ä½“æ ‡è¯†
         parameterTypeï¼šæŒ‡å®šæ’å…¥æ“ä½œæ¥å—çš„å‚æ•°ç±»å‹
     --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>insert</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>insertUser<span class="token punctuation">&quot;</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.javacode2018.chat03.demo1.UserModel<span class="token punctuation">&quot;</span></span> <span class="token attr-name">useGeneratedKeys</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token cdata">&lt;![CDATA[
        INSERT INTO t_user (id,name,age,salary,sex) VALUES (#{id},#{name},#{age},#{salary},#{sex})
         ]]&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>insert</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- updateç”¨æ¥å®šä¹‰ä¸€ä¸ªæ›´æ–°æ“ä½œ
         idï¼šæ“ä½œçš„å…·ä½“æ ‡è¯†
         parameterTypeï¼šæŒ‡å®šæ“ä½œæ¥å—çš„å‚æ•°ç±»å‹
     --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>update</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>updateUser<span class="token punctuation">&quot;</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.javacode2018.chat03.demo1.UserModel<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token cdata">&lt;![CDATA[
        UPDATE t_user SET name = #{name},age = #{age},salary = #{salary},sex = #{sex} WHERE id = #{id}
        ]]&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>update</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- updateç”¨æ¥å®šä¹‰ä¸€ä¸ªåˆ é™¤æ“ä½œ
         idï¼šæ“ä½œçš„å…·ä½“æ ‡è¯†
         parameterTypeï¼šæŒ‡å®šæ“ä½œæ¥å—çš„å‚æ•°ç±»å‹
     --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>update</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>deleteUser<span class="token punctuation">&quot;</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>java.lang.Long<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token cdata">&lt;![CDATA[
        DELETE FROM t_user WHERE id = #{id}
        ]]&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>update</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- selectç”¨æ¥å®šä¹‰ä¸€ä¸ªæŸ¥è¯¢æ“ä½œ
         idï¼šæ“ä½œçš„å…·ä½“æ ‡è¯†
         resultTypeï¼šæŒ‡å®šæŸ¥è¯¢ç»“æœä¿å­˜çš„ç±»å‹
     --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>getUserList<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.javacode2018.chat03.demo1.UserModel<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token cdata">&lt;![CDATA[
        SELECT * FROM t_user
        ]]&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mapper</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="åˆ›å»ºusermodelç±»" tabindex="-1"><a class="header-anchor" href="#åˆ›å»ºusermodelç±»" aria-hidden="true">#</a> åˆ›å»ºUserModelç±»</h4><p><code>chat03\src\main\java\com\javacode2018\chat03\demo1</code>ç›®å½•åˆ›å»º<code>UserModel.java</code>ï¼Œå¦‚ä¸‹ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>javacode2018<span class="token punctuation">.</span>chat03<span class="token punctuation">.</span>demo1</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token doc-comment comment">/**
 * å…¬ä¼—å·ï¼šè·¯äººç”²Javaï¼Œå·¥ä½œ10å¹´çš„å‰é˜¿é‡ŒP7åˆ†äº«Javaã€ç®—æ³•ã€æ•°æ®åº“æ–¹é¢çš„æŠ€æœ¯å¹²è´§ï¼åšä¿¡ç”¨æŠ€æœ¯æ”¹å˜å‘½è¿ï¼Œè®©å®¶äººè¿‡ä¸Šæ›´ä½“é¢çš„ç”Ÿæ´»!
 */</span>
<span class="token annotation punctuation">@Getter</span>
<span class="token annotation punctuation">@Setter</span>
<span class="token annotation punctuation">@NoArgsConstructor</span>
<span class="token annotation punctuation">@AllArgsConstructor</span>
<span class="token annotation punctuation">@Builder</span>
<span class="token annotation punctuation">@ToString</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserModel</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">Long</span> id<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> age<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Double</span> salary<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> sex<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="åˆ›å»ºusermapperæ¥å£" tabindex="-1"><a class="header-anchor" href="#åˆ›å»ºusermapperæ¥å£" aria-hidden="true">#</a> åˆ›å»ºUserMapperæ¥å£</h4><p><code>chat03\src\main\java\com\javacode2018\chat03\demo1</code>ç›®å½•åˆ›å»º<code>UserMapper.java</code>ï¼Œå¦‚ä¸‹ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>javacode2018<span class="token punctuation">.</span>chat03<span class="token punctuation">.</span>demo1</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span>
<span class="token doc-comment comment">/**
 * å…¬ä¼—å·ï¼šè·¯äººç”²Javaï¼Œå·¥ä½œ10å¹´çš„å‰é˜¿é‡ŒP7åˆ†äº«Javaã€ç®—æ³•ã€æ•°æ®åº“æ–¹é¢çš„æŠ€æœ¯å¹²è´§ï¼åšä¿¡ç”¨æŠ€æœ¯æ”¹å˜å‘½è¿ï¼Œè®©å®¶äººè¿‡ä¸Šæ›´ä½“é¢çš„ç”Ÿæ´»!
 */</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">UserMapper</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> <span class="token function">insertUser</span><span class="token punctuation">(</span><span class="token class-name">UserModel</span> model<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> <span class="token function">updateUser</span><span class="token punctuation">(</span><span class="token class-name">UserModel</span> model<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> <span class="token function">deleteUser</span><span class="token punctuation">(</span><span class="token class-name">Long</span> userId<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">UserModel</span><span class="token punctuation">&gt;</span></span> <span class="token function">getUserList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="å¼•å…¥logbackæ—¥å¿—æ”¯æŒ" tabindex="-1"><a class="header-anchor" href="#å¼•å…¥logbackæ—¥å¿—æ”¯æŒ" aria-hidden="true">#</a> å¼•å…¥logbackæ—¥å¿—æ”¯æŒ</h4><p><code>chat03\src\main\resources</code>ç›®å½•åˆ›å»º<code>logback.xml</code>ï¼Œå¦‚ä¸‹ï¼š</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appender</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>STDOUT<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ch.qos.logback.core.ConsoleAppender<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>encoder</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>pattern</span><span class="token punctuation">&gt;</span></span>%d{mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>pattern</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>encoder</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>appender</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>logger</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.javacode2018<span class="token punctuation">&quot;</span></span> <span class="token attr-name">level</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>debug<span class="token punctuation">&quot;</span></span> <span class="token attr-name">additivity</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>false<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appender-ref</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>STDOUT<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>logger</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="åˆ›å»ºæµ‹è¯•ç”¨ä¾‹usermappertest" tabindex="-1"><a class="header-anchor" href="#åˆ›å»ºæµ‹è¯•ç”¨ä¾‹usermappertest" aria-hidden="true">#</a> åˆ›å»ºæµ‹è¯•ç”¨ä¾‹UserMapperTest</h4><p><code>chat03\src\test\java\com\javacode2018\chat03\demo1</code>ç›®å½•åˆ›å»º<code>UserMapperTest.java</code>ï¼Œå¦‚ä¸‹ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>javacode2018<span class="token punctuation">.</span>chat03<span class="token punctuation">.</span>demo1</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span>extern<span class="token punctuation">.</span>slf4j<span class="token punctuation">.</span></span><span class="token class-name">Slf4j</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">Resources</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>session<span class="token punctuation">.</span></span><span class="token class-name">SqlSession</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>session<span class="token punctuation">.</span></span><span class="token class-name">SqlSessionFactory</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>session<span class="token punctuation">.</span></span><span class="token class-name">SqlSessionFactoryBuilder</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span></span><span class="token class-name">Before</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span></span><span class="token class-name">Test</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">InputStream</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span>
<span class="token doc-comment comment">/**
 * å…¬ä¼—å·ï¼šè·¯äººç”²Javaï¼Œå·¥ä½œ10å¹´çš„å‰é˜¿é‡ŒP7åˆ†äº«Javaã€ç®—æ³•ã€æ•°æ®åº“æ–¹é¢çš„æŠ€æœ¯å¹²è´§ï¼åšä¿¡ç”¨æŠ€æœ¯æ”¹å˜å‘½è¿ï¼Œè®©å®¶äººè¿‡ä¸Šæ›´ä½“é¢çš„ç”Ÿæ´»!
 */</span>
<span class="token annotation punctuation">@Slf4j</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserMapperTest</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">SqlSessionFactory</span> sqlSessionFactory<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@Before</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">before</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token comment">//æŒ‡å®šmybatiså…¨å±€é…ç½®æ–‡ä»¶</span>
        <span class="token class-name">String</span> resource <span class="token operator">=</span> <span class="token string">&quot;demo1/mybatis-config.xml&quot;</span><span class="token punctuation">;</span>
        <span class="token comment">//è¯»å–å…¨å±€é…ç½®æ–‡ä»¶</span>
        <span class="token class-name">InputStream</span> inputStream <span class="token operator">=</span> <span class="token class-name">Resources</span><span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span>resource<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//æ„å»ºSqlSessionFactoryå¯¹è±¡</span>
        <span class="token class-name">SqlSessionFactory</span> sqlSessionFactory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SqlSessionFactoryBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span>inputStream<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>sqlSessionFactory <span class="token operator">=</span> sqlSessionFactory<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">getUserList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">(</span><span class="token class-name">SqlSession</span> sqlSession <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>sqlSessionFactory<span class="token punctuation">.</span><span class="token function">openSession</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">UserMapper</span> mapper <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">UserMapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//æ‰§è¡ŒæŸ¥è¯¢æ“ä½œ</span>
            <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">UserModel</span><span class="token punctuation">&gt;</span></span> userModelList <span class="token operator">=</span> mapper<span class="token punctuation">.</span><span class="token function">getUserList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            userModelList<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>item <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
                log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;{}&quot;</span><span class="token punctuation">,</span> item<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä»£ç è§£é‡Šä¸€ä¸‹ï¼š</p><p>ä¸Šé¢çš„<code>before()</code>æ–¹æ³•ä¸Šé¢æœ‰ä¸ª<code>@Before</code>æ³¨è§£ï¼Œè¿™ä¸ªæ˜¯junitæä¾›çš„ä¸€ä¸ªæ³¨è§£ï¼Œé€šè¿‡junitè¿è¡Œæ¯ä¸ª<code>@Test</code>æ ‡æ³¨çš„æ–¹æ³•ä¹‹å‰ï¼Œä¼šå…ˆè¿è¡Œè¢«<code>@before</code>æ ‡æ³¨çš„æ–¹æ³•ï¼Œ<code>before()</code>æ–¹æ³•ä¸­æˆ‘ä»¬åˆ›å»ºäº†<code>SqlSessionFactory</code>å¯¹è±¡ï¼Œæ‰€ä»¥å…¶ä»–çš„<code>@Test</code>æ ‡æ³¨çš„æ–¹æ³•ä¸­å¯ä»¥ç›´æ¥ä½¿ç”¨<code>sqlSessionFactory</code>å¯¹è±¡äº†ã€‚</p><h4 id="è¿è¡Œä¸€ä¸‹æµ‹è¯•ç”¨ä¾‹çœ‹æ•ˆæœ" tabindex="-1"><a class="header-anchor" href="#è¿è¡Œä¸€ä¸‹æµ‹è¯•ç”¨ä¾‹çœ‹æ•ˆæœ" aria-hidden="true">#</a> è¿è¡Œä¸€ä¸‹æµ‹è¯•ç”¨ä¾‹çœ‹æ•ˆæœ</h4><p>è¿è¡Œä¸€ä¸‹<code>UserMapperTest.getUserList()</code>æ–¹æ³•ï¼Œè¾“å‡ºå¦‚ä¸‹ï¼š</p><div class="language-api ext-api line-numbers-mode"><pre class="language-api"><code>32:21.991 [main] DEBUG c.j.c.demo1.UserMapper.getUserList - ==&gt;  Preparing: SELECT * FROM t_user 
32:22.028 [main] DEBUG c.j.c.demo1.UserMapper.getUserList - ==&gt; Parameters: 
32:22.052 [main] DEBUG c.j.c.demo1.UserMapper.getUserList - &lt;==      Total: 4
32:22.053 [main] INFO  c.j.chat03.demo1.UserMapperTest - UserModel(id=1, name=è·¯äººç”²Java, age=30, salary=50000.0, sex=1)
32:22.056 [main] INFO  c.j.chat03.demo1.UserMapperTest - UserModel(id=2, name=javacode2018, age=30, salary=50000.0, sex=1)
32:22.056 [main] INFO  c.j.chat03.demo1.UserMapperTest - UserModel(id=3, name=å¼ å­¦å‹, age=56, salary=500000.0, sex=1)
32:22.056 [main] INFO  c.j.chat03.demo1.UserMapperTest - UserModel(id=4, name=æ—å¿—ç², age=45, salary=88888.88, sex=2)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-ä¸ºä»€ä¹ˆè¦ç”¨åˆ«å" tabindex="-1"><a class="header-anchor" href="#_3-ä¸ºä»€ä¹ˆè¦ç”¨åˆ«å" aria-hidden="true">#</a> 3.ä¸ºä»€ä¹ˆè¦ç”¨åˆ«å</h3><p>å¤§å®¶æ‰“å¼€chat03\src\main\resources\demo1\mapper\UserMapper.xmlæ–‡ä»¶çœ‹ä¸€ä¸‹ï¼Œæ˜¯ä¸æ˜¯æœ‰å¾ˆå¤šä¸‹é¢è¿™æ ·çš„ä»£ç ï¼š</p><div class="language-apl ext-apl line-numbers-mode"><pre class="language-apl"><code>parameterType<span class="token function">=</span>&quot;com<span class="token dyadic-operator operator">.</span>javacode2018<span class="token dyadic-operator operator">.</span>chat03<span class="token dyadic-operator operator">.</span>demo1<span class="token dyadic-operator operator">.</span>UserModel&quot;
resultType<span class="token function">=</span>&quot;com<span class="token dyadic-operator operator">.</span>javacode2018<span class="token dyadic-operator operator">.</span>chat03<span class="token dyadic-operator operator">.</span>demo1<span class="token dyadic-operator operator">.</span>UserModel&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>parameterTypeæ˜¯æŒ‡å®šå‚æ•°çš„ç±»å‹ï¼ŒresultTypeæ˜¯æŒ‡å®šæŸ¥è¯¢ç»“æœè¿”å›å€¼çš„ç±»å‹ï¼Œä»–ä»¬çš„å€¼éƒ½æ˜¯<code>UserModel</code>ç±»å®Œæ•´çš„ç±»åï¼Œæ¯”è¾ƒé•¿ï¼Œmybatisæ”¯æŒæˆ‘ä»¬ç»™æŸä¸ªç±»å‹èµ·ä¸€ä¸ªåˆ«åï¼Œç„¶åé€šè¿‡åˆ«åå¯ä»¥è®¿é—®åˆ°æŒ‡å®šçš„ç±»å‹ã€‚</p><h3 id="_4-åˆ«åçš„ç”¨æ³•" tabindex="-1"><a class="header-anchor" href="#_4-åˆ«åçš„ç”¨æ³•" aria-hidden="true">#</a> 4.åˆ«åçš„ç”¨æ³•</h3><h4 id="æ–¹å¼1" tabindex="-1"><a class="header-anchor" href="#æ–¹å¼1" aria-hidden="true">#</a> æ–¹å¼1</h4><h5 id="ä½¿ç”¨typealiaså…ƒç´ è¿›è¡Œæ³¨å†Œ" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨typealiaså…ƒç´ è¿›è¡Œæ³¨å†Œ" aria-hidden="true">#</a> ä½¿ç”¨typeAliaså…ƒç´ è¿›è¡Œæ³¨å†Œ</h5><p>å¦‚ä¸‹ï¼š</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>typeAliases</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>typeAlias</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>å®Œæ•´çš„ç±»å‹åç§°<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alias</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>åˆ«å<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>typeAliases</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>typeAliaseså…ƒç´ ä¸­å¯ä»¥åŒ…å«å¤šä¸ªtypeAliaså­å…ƒç´ ï¼Œæ¯ä¸ªtypeAliaså¯ä»¥ç»™ä¸€ä¸ªç±»å‹æ³¨å†Œåˆ«åï¼Œæœ‰2ä¸ªå±æ€§éœ€è¦æŒ‡å®šï¼š</strong></p><p><strong>typeï¼šå®Œæ•´çš„ç±»å‹åç§°</strong></p><p><strong>aliasï¼šåˆ«å</strong></p><p>å¦‚ä¸Šé¢ç»™<code>UserModel</code>èµ·äº†ä¸€ä¸ªåˆ«åä¸º<code>user</code>ã€‚</p><h5 id="æ¡ˆä¾‹" tabindex="-1"><a class="header-anchor" href="#æ¡ˆä¾‹" aria-hidden="true">#</a> æ¡ˆä¾‹</h5><p>ç»™UserModelæ³¨å†Œä¸€ä¸ªåˆ«å<code>user</code></p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>typeAliases</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>typeAlias</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.javacode2018.chat03.demo1.UserModel<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alias</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>typeAliases</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>UserMapper.xmlä¸­ä½¿ç”¨åˆ«åï¼Œå°†<code>chat03\src\main\resources\demo1\mapper\UserMapper.xml</code>ä¸­getUserListçš„<code>resultType</code>çš„å€¼æ”¹ä¸º<code>user</code>ï¼Œå¦‚ä¸‹ï¼š</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>getUserList<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token cdata">&lt;![CDATA[
    SELECT * FROM t_user
    ]]&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿è¡Œ<code>com.javacode2018.chat03.demo1.UserMapperTest#getUserList</code>ï¼Œå¦‚ä¸‹ï¼š</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>07:35.477 [main] DEBUG c.j.c.demo1.UserMapper.getUserList - ==&gt;  Preparing: SELECT * FROM t_user 
07:35.505 [main] DEBUG c.j.c.demo1.UserMapper.getUserList - ==&gt; Parameters: 
07:35.527 [main] DEBUG c.j.c.demo1.UserMapper.getUserList - &lt;==      Total: 4
07:35.527 [main] INFO  c.j.chat03.demo1.UserMapperTest - UserModel(id=1, name=è·¯äººç”²Java, age=30, salary=50000.0, sex=1)
07:35.529 [main] INFO  c.j.chat03.demo1.UserMapperTest - UserModel(id=2, name=javacode2018, age=30, salary=50000.0, sex=1)
07:35.529 [main] INFO  c.j.chat03.demo1.UserMapperTest - UserModel(id=3, name=å¼ å­¦å‹, age=56, salary=500000.0, sex=1)
07:35.529 [main] INFO  c.j.chat03.demo1.UserMapperTest - UserModel(id=4, name=æ—å¿—ç², age=45, salary=88888.88, sex=2)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>çœ‹åˆ°äº†ä¹ˆï¼ŒgetUserListä¸­æˆ‘ä»¬ä½¿ç”¨çš„åˆ«åï¼Œè¿è¡Œæ˜¯æ­£å¸¸çš„ï¼Œè¯´æ˜å¯ä»¥é€šè¿‡åˆ«å<code>user</code>ç›´æ¥è®¿é—®<code>UserModel</code>ã€‚</p><h4 id="æ–¹å¼2" tabindex="-1"><a class="header-anchor" href="#æ–¹å¼2" aria-hidden="true">#</a> æ–¹å¼2</h4><h5 id="é€šè¿‡packegeå…ƒç´ æ‰¹é‡æ³¨å†Œ" tabindex="-1"><a class="header-anchor" href="#é€šè¿‡packegeå…ƒç´ æ‰¹é‡æ³¨å†Œ" aria-hidden="true">#</a> é€šè¿‡packegeå…ƒç´ æ‰¹é‡æ³¨å†Œ</h5><p>ä¸Šé¢æˆ‘ä»¬é€šè¿‡typeAliaså…ƒç´ å¯ä»¥æ³¨å†Œä¸€ä¸ªåˆ«åï¼Œå¦‚æœæˆ‘ä»¬æœ‰å¾ˆå¤šç±»éœ€è¦æ³¨å†Œï¼Œéœ€è¦å†™å¾ˆå¤štypeAliasé…ç½®ã€‚</p><p>mybatisä¸ºæˆ‘ä»¬æä¾›äº†æ‰¹é‡æ³¨å†Œåˆ«åçš„æ–¹å¼ï¼Œé€šè¿‡<code>package</code>å…ƒç´ ï¼Œå¦‚ä¸‹ï¼š</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>typeAliases</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>package</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>éœ€è¦æ‰«æçš„åŒ…<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>typeAliases</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™ä¸ªä¹Ÿæ˜¯åœ¨typeAliaseså…ƒç´ ä¸‹é¢ï¼Œä¸è¿‡è¿™æ¬¡ä½¿ç”¨çš„æ˜¯<code>package</code>å…ƒç´ ï¼Œpackageæœ‰ä¸ªnameå±æ€§ï¼Œå¯ä»¥æŒ‡å®šä¸€ä¸ªåŒ…åï¼Œmybatisä¼šåŠ è½½è¿™ä¸ªåŒ…ä»¥åŠå­åŒ…ä¸­æ‰€æœ‰çš„ç±»å‹ï¼Œç»™è¿™äº›ç±»å‹éƒ½æ³¨å†Œåˆ«åï¼Œ<strong>åˆ«ååç§°é»˜è®¤ä¼šé‡‡ç”¨ç±»åå°å†™çš„æ–¹å¼</strong>ï¼Œå¦‚<code>UserModel</code>çš„åˆ«åä¸º<code>usermodel</code></p><h5 id="æ¡ˆä¾‹-1" tabindex="-1"><a class="header-anchor" href="#æ¡ˆä¾‹-1" aria-hidden="true">#</a> æ¡ˆä¾‹</h5><p>ä¸‹é¢æˆ‘ä»¬å°†<code>demo1/mybatis-config.xml</code>ä¸­<code>typeAliases</code>å…ƒç´ çš„å€¼æ”¹ä¸ºä¸‹é¢è¿™æ ·ï¼š</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>typeAliases</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>package</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.javacode2018.chat03.demo1<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>typeAliases</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>mybatisä¼šç»™<code>com.javacode2018.chat03.demo1</code>åŒ…åŠå­åŒ…ä¸­çš„æ‰€æœ‰ç±»å‹æ³¨å†Œåˆ«åï¼ŒUserModelç±»åœ¨è¿™ä¸ªåŒ…ä¸­ï¼Œä¼šè¢«æ³¨å†Œï¼Œåˆ«åä¸º<code>usermodel</code></p><p>UserMapper.xmlä¸­ä½¿ç”¨åˆ«åï¼Œå°†<code>chat03\src\main\resources\demo1\mapper\UserMapper.xml</code>ä¸­getUserListçš„<code>resultType</code>çš„å€¼æ”¹ä¸º<code>usermodel</code>ï¼Œå¦‚ä¸‹ï¼š</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>getUserList<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>usermodel<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token cdata">&lt;![CDATA[
    SELECT * FROM t_user
    ]]&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸Šé¢æˆ‘ä»¬å°†è¿”å›å€¼çš„ç±»å‹resultTypeçš„å€¼æ”¹ä¸ºäº†<code>usermodel</code></p><p>æˆ‘ä»¬æ¥è¿è¡Œ<code>com.javacode2018.chat03.demo1.UserMapperTest#getUserList</code>ï¼Œå¦‚ä¸‹ï¼š</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>26:08.267 [main] DEBUG c.j.c.demo1.UserMapper.getUserList - ==&gt;  Preparing: SELECT * FROM t_user 
26:08.296 [main] DEBUG c.j.c.demo1.UserMapper.getUserList - ==&gt; Parameters: 
26:08.318 [main] DEBUG c.j.c.demo1.UserMapper.getUserList - &lt;==      Total: 4
26:08.319 [main] INFO  c.j.chat03.demo1.UserMapperTest - UserModel(id=1, name=è·¯äººç”²Java, age=30, salary=50000.0, sex=1)
26:08.320 [main] INFO  c.j.chat03.demo1.UserMapperTest - UserModel(id=2, name=javacode2018, age=30, salary=50000.0, sex=1)
26:08.320 [main] INFO  c.j.chat03.demo1.UserMapperTest - UserModel(id=3, name=å¼ å­¦å‹, age=56, salary=500000.0, sex=1)
26:08.320 [main] INFO  c.j.chat03.demo1.UserMapperTest - UserModel(id=4, name=æ—å¿—ç², age=45, salary=88888.88, sex=2)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>çœ‹åˆ°äº†ä¹ˆï¼ŒgetUserListä¸­æˆ‘ä»¬ä½¿ç”¨çš„åˆ«åusermodelï¼Œè¿è¡Œä¹Ÿæ˜¯æ­£å¸¸çš„ã€‚</p><h4 id="æ–¹å¼3" tabindex="-1"><a class="header-anchor" href="#æ–¹å¼3" aria-hidden="true">#</a> æ–¹å¼3</h4><h5 id="packageç»“åˆ-aliasæ‰¹é‡æ³¨å†Œå¹¶æŒ‡å®šåˆ«å" tabindex="-1"><a class="header-anchor" href="#packageç»“åˆ-aliasæ‰¹é‡æ³¨å†Œå¹¶æŒ‡å®šåˆ«å" aria-hidden="true">#</a> packageç»“åˆ@Aliasæ‰¹é‡æ³¨å†Œå¹¶æŒ‡å®šåˆ«å</h5><p>æ–¹å¼2ä¸­é€šè¿‡packageå¯ä»¥æ‰¹é‡æ³¨å†Œåˆ«åï¼Œå¦‚æœæŒ‡å®šçš„åŒ…ä¸­åŒ…å«äº†å¤šä¸ªç±»åç›¸åŒçš„ç±»ï¼Œä¼šæ€ä¹ˆæ ·å‘¢ï¼Ÿ</p><p>æˆ‘ä»¬åœ¨<code>com.javacode2018.chat03.demo1.model</code>åŒ…ä¸­åˆ›å»ºä¸€ä¸ªå’ŒUserModelåŒåçš„ç±»ï¼Œå¦‚ä¸‹ï¼š</p><div class="language-Java ext-Java line-numbers-mode"><pre class="language-Java"><code>package com.javacode2018.chat03.demo1.model;
import lombok.*;
/**
 * å…¬ä¼—å·ï¼šè·¯äººç”²Javaï¼Œå·¥ä½œ10å¹´çš„å‰é˜¿é‡ŒP7åˆ†äº«Javaã€ç®—æ³•ã€æ•°æ®åº“æ–¹é¢çš„æŠ€æœ¯å¹²è´§ï¼åšä¿¡ç”¨æŠ€æœ¯æ”¹å˜å‘½è¿ï¼Œè®©å®¶äººè¿‡ä¸Šæ›´ä½“é¢çš„ç”Ÿæ´»!
 */
@Getter
@Setter
@NoArgsConstructor
@AllArgsConstructor
@Builder
@ToString
public class UserModel {
    private Long id;
    private String name;
    private Integer age;
    private Double salary;
    private Integer sex;
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://raw.githubusercontent.com/huluhutu/blogimg/main/img/image-20221011094315620.png" alt="image-20221011094315620" loading="lazy"></p><p>ç°åœ¨<code>com.javacode2018.demo1</code>åŒ…ä¸­æœ‰2ä¸ªUserModelç±»äº†</p><p>è¿è¡Œ<code>com.javacode2018.chat03.demo1.UserMapperTest#getUserList</code>ï¼Œå¦‚ä¸‹ï¼š</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>org.apache.ibatis.exceptions.PersistenceException: 
### Error building SqlSession.
### The error may exist in SQL Mapper Configuration
### Cause: org.apache.ibatis.builder.BuilderException: Error parsing SQL Mapper Configuration. Cause: org.apache.ibatis.type.TypeException: The alias &#39;UserModel&#39; is already mapped to the value &#39;com.javacode2018.chat03.demo1.model.UserModel&#39;.
    at org.apache.ibatis.exceptions.ExceptionFactory.wrapException(ExceptionFactory.java:30)
    at org.apache.ibatis.session.SqlSessionFactoryBuilder.build(SqlSessionFactoryBuilder.java:80)
    at org.apache.ibatis.session.SqlSessionFactoryBuilder.build(SqlSessionFactoryBuilder.java:64)
    at com.javacode2018.chat03.demo1.UserMapperTest.before(UserMapperTest.java:29)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:498)
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:24)
    at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
    at org.junit.runner.JUnitCore.run(JUnitCore.java:137)
    at com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:68)
    at com.intellij.rt.execution.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:51)
    at com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:242)
    at com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:70)
Caused by: org.apache.ibatis.builder.BuilderException: Error parsing SQL Mapper Configuration. Cause: org.apache.ibatis.type.TypeException: The alias &#39;UserModel&#39; is already mapped to the value &#39;com.javacode2018.chat03.demo1.model.UserModel&#39;.
    at org.apache.ibatis.builder.xml.XMLConfigBuilder.parseConfiguration(XMLConfigBuilder.java:121)
    at org.apache.ibatis.builder.xml.XMLConfigBuilder.parse(XMLConfigBuilder.java:98)
    at org.apache.ibatis.session.SqlSessionFactoryBuilder.build(SqlSessionFactoryBuilder.java:78)
    ... 24 more
Caused by: org.apache.ibatis.type.TypeException: The alias &#39;UserModel&#39; is already mapped to the value &#39;com.javacode2018.chat03.demo1.model.UserModel&#39;.
    at org.apache.ibatis.type.TypeAliasRegistry.registerAlias(TypeAliasRegistry.java:157)
    at org.apache.ibatis.type.TypeAliasRegistry.registerAlias(TypeAliasRegistry.java:147)
    at org.apache.ibatis.type.TypeAliasRegistry.registerAliases(TypeAliasRegistry.java:136)
    at org.apache.ibatis.type.TypeAliasRegistry.registerAliases(TypeAliasRegistry.java:125)
    at org.apache.ibatis.builder.xml.XMLConfigBuilder.typeAliasesElement(XMLConfigBuilder.java:164)
    at org.apache.ibatis.builder.xml.XMLConfigBuilder.parseConfiguration(XMLConfigBuilder.java:109)
    ... 26 more
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æŠ¥é”™äº†ï¼Œ2ä¸ªç±»çš„ç±»åä¸€æ ·äº†ï¼Œé»˜è®¤éƒ½ä¼šä½¿ç”¨<code>usermodel</code>ä½œä¸ºåˆ«åï¼Œåˆ«åé‡å¤äº†mybatisä¼šæŠ¥é”™ï¼Œé‚£ä¹ˆæ­¤æ—¶æˆ‘ä»¬æ€ä¹ˆåŠå‘¢ï¼Ÿ</p><p>packageæ–¹å¼æ‰¹é‡æ³¨å†Œåˆ«åçš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥ç»™ç±»ä¸­æ·»åŠ ä¸€ä¸ª<code>@Alias</code>æ³¨è§£æ¥ç»™è¿™ä¸ªç±»æŒ‡å®šåˆ«åï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Alias</span><span class="token punctuation">(</span><span class="token string">&quot;user&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserModel</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å½“mybatisæ‰«æç±»çš„æ—¶å€™ï¼Œå‘ç°ç±»ä¸Šæœ‰<code>Alias</code>æ³¨è§£ï¼Œä¼šå–è¿™ä¸ªæ³¨è§£çš„<code>value</code>ä½œä¸ºåˆ«åï¼Œå¦‚æœæ²¡æœ‰è¿™ä¸ªæ³¨è§£ï¼Œä¼šå°†ç±»åå°å†™ä½œä¸ºåˆ«åï¼Œå¦‚åŒæ–¹å¼2ã€‚</p><h5 id="æ¡ˆä¾‹-2" tabindex="-1"><a class="header-anchor" href="#æ¡ˆä¾‹-2" aria-hidden="true">#</a> æ¡ˆä¾‹</h5><p>æˆ‘ä»¬åœ¨<code>com.javacode2018.chat03.demo1.UserModel</code>ç±»ä¸ŠåŠ ä¸Šä¸‹é¢æ³¨è§£ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Alias</span><span class="token punctuation">(</span><span class="token string">&quot;use&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserModel</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¿®æ”¹<code>demo1/mapper/UserMapper.xml</code>ï¼Œå°†<code>resultType</code>çš„å€¼è®¾ç½®ä¸º<code>user</code>ï¼š</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>getUserList<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token cdata">&lt;![CDATA[
    SELECT * FROM t_user
    ]]&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å†æ¥è¿è¡Œ<code>com.javacode2018.chat03.demo1.UserMapperTest#getUserList</code>ï¼Œå¦‚ä¸‹ï¼š</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>18:51.219 [main] DEBUG c.j.c.demo1.UserMapper.getUserList - ==&gt;  Preparing: SELECT * FROM t_user 
18:51.250 [main] DEBUG c.j.c.demo1.UserMapper.getUserList - ==&gt; Parameters: 
18:51.271 [main] DEBUG c.j.c.demo1.UserMapper.getUserList - &lt;==      Total: 4
18:51.272 [main] INFO  c.j.chat03.demo1.UserMapperTest - UserModel(id=1, name=è·¯äººç”²Java, age=30, salary=50000.0, sex=1)
18:51.274 [main] INFO  c.j.chat03.demo1.UserMapperTest - UserModel(id=2, name=javacode2018, age=30, salary=50000.0, sex=1)
18:51.274 [main] INFO  c.j.chat03.demo1.UserMapperTest - UserModel(id=3, name=å¼ å­¦å‹, age=56, salary=500000.0, sex=1)
18:51.274 [main] INFO  c.j.chat03.demo1.UserMapperTest - UserModel(id=4, name=æ—å¿—ç², age=45, salary=88888.88, sex=2)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¾“å‡ºæ­£å¸¸ã€‚</p><h3 id="_5-åˆ«åä¸åŒºåˆ†å¤§å°å†™" tabindex="-1"><a class="header-anchor" href="#_5-åˆ«åä¸åŒºåˆ†å¤§å°å†™" aria-hidden="true">#</a> 5.åˆ«åä¸åŒºåˆ†å¤§å°å†™</h3><p>æˆ‘ä»¬å¯ä»¥å°†ä¸Šé¢UserMapper.xmlä¸­çš„<code>use</code>åˆ«åæ”¹æˆå¤§å†™çš„ï¼š<code>USER</code>ï¼Œå¦‚ä¸‹ï¼š</p><div class="language-Java ext-Java line-numbers-mode"><pre class="language-Java"><code>&lt;select id=&quot;getUserList&quot; resultType=&quot;USER&quot;&gt;
    &lt;![CDATA[
    SELECT * FROM t_user
    ]]&gt;
&lt;/select&gt;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç„¶åå†è¿è¡Œä¸€ä¸‹<code>com.javacode2018.chat03.demo1.UserMapperTest#getUserList</code>ï¼Œå¦‚ä¸‹ï¼š</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>42:49.474 [main] DEBUG c.j.c.demo1.UserMapper.getUserList - ==&gt;  Preparing: SELECT * FROM t_user 
42:49.509 [main] DEBUG c.j.c.demo1.UserMapper.getUserList - ==&gt; Parameters: 
42:49.527 [main] DEBUG c.j.c.demo1.UserMapper.getUserList - &lt;==      Total: 4
42:49.528 [main] INFO  c.j.chat03.demo1.UserMapperTest - UserModel(id=1, name=è·¯äººç”²Java, age=30, salary=50000.0, sex=1)
42:49.530 [main] INFO  c.j.chat03.demo1.UserMapperTest - UserModel(id=2, name=javacode2018, age=30, salary=50000.0, sex=1)
42:49.530 [main] INFO  c.j.chat03.demo1.UserMapperTest - UserModel(id=3, name=å¼ å­¦å‹, age=56, salary=500000.0, sex=1)
42:49.531 [main] INFO  c.j.chat03.demo1.UserMapperTest - UserModel(id=4, name=æ—å¿—ç², age=45, salary=88888.88, sex=2)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¹Ÿæ˜¯æ­£å¸¸çš„ï¼Œ<strong>è¯´æ˜åˆ«åä½¿ç”¨æ—¶æ˜¯ä¸åŒºåˆ†å¤§å°å†™çš„ã€‚</strong></p><h3 id="_6-mybatiså†…ç½®çš„åˆ«å" tabindex="-1"><a class="header-anchor" href="#_6-mybatiså†…ç½®çš„åˆ«å" aria-hidden="true">#</a> 6.mybatiså†…ç½®çš„åˆ«å</h3><p>mybatisé»˜è®¤ä¸ºå¾ˆå¤šç±»å‹æä¾›äº†åˆ«åï¼Œå¦‚ä¸‹ï¼š</p><table><thead><tr><th style="text-align:left;">åˆ«å</th><th style="text-align:left;">å¯¹åº”çš„å®é™…ç±»å‹</th></tr></thead><tbody><tr><td style="text-align:left;">_byte</td><td style="text-align:left;">byte</td></tr><tr><td style="text-align:left;">_long</td><td style="text-align:left;">long</td></tr><tr><td style="text-align:left;">_short</td><td style="text-align:left;">short</td></tr><tr><td style="text-align:left;">_int</td><td style="text-align:left;">int</td></tr><tr><td style="text-align:left;">_integer</td><td style="text-align:left;">int</td></tr><tr><td style="text-align:left;">_double</td><td style="text-align:left;">double</td></tr><tr><td style="text-align:left;">_float</td><td style="text-align:left;">float</td></tr><tr><td style="text-align:left;">_boolean</td><td style="text-align:left;">boolean</td></tr><tr><td style="text-align:left;">string</td><td style="text-align:left;">String</td></tr><tr><td style="text-align:left;">byte</td><td style="text-align:left;">Byte</td></tr><tr><td style="text-align:left;">long</td><td style="text-align:left;">Long</td></tr><tr><td style="text-align:left;">short</td><td style="text-align:left;">Short</td></tr><tr><td style="text-align:left;">int</td><td style="text-align:left;">Integer</td></tr><tr><td style="text-align:left;">integer</td><td style="text-align:left;">Integer</td></tr><tr><td style="text-align:left;">double</td><td style="text-align:left;">Double</td></tr><tr><td style="text-align:left;">float</td><td style="text-align:left;">Float</td></tr><tr><td style="text-align:left;">boolean</td><td style="text-align:left;">Boolean</td></tr><tr><td style="text-align:left;">date</td><td style="text-align:left;">Date</td></tr><tr><td style="text-align:left;">decimal</td><td style="text-align:left;">BigDecimal</td></tr><tr><td style="text-align:left;">bigdecimal</td><td style="text-align:left;">BigDecimal</td></tr><tr><td style="text-align:left;">object</td><td style="text-align:left;">Object</td></tr><tr><td style="text-align:left;">map</td><td style="text-align:left;">Map</td></tr><tr><td style="text-align:left;">hashmap</td><td style="text-align:left;">HashMap</td></tr><tr><td style="text-align:left;">list</td><td style="text-align:left;">List</td></tr><tr><td style="text-align:left;">arraylist</td><td style="text-align:left;">ArrayList</td></tr><tr><td style="text-align:left;">collection</td><td style="text-align:left;">Collection</td></tr><tr><td style="text-align:left;">iterator</td><td style="text-align:left;">Iterator</td></tr></tbody></table><p>ä¸Šé¢è¿™äº›é»˜è®¤éƒ½æ˜¯åœ¨<code>org.apache.ibatis.type.TypeAliasRegistry</code>ç±»ä¸­è¿›è¡Œæ³¨å†Œçš„ï¼Œè¿™ä¸ªç±»å°±æ˜¯mybatisæ³¨å†Œåˆ«åä½¿ç”¨çš„ï¼Œåˆ«åå’Œå…·ä½“çš„ç±»å‹å…³è”æ˜¯æ”¾åœ¨è¿™ä¸ªç±»çš„ä¸€ä¸ªmapå±æ€§ï¼ˆtypeAliasesï¼‰ä¸­ï¼Œè´´ä¸€éƒ¨åˆ†ä»£ç å¤§å®¶æ„Ÿå—ä¸€ä¸‹ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TypeAliasRegistry</span> <span class="token punctuation">{</span>
  <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Class</span><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> typeAliases <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">public</span> <span class="token class-name">TypeAliasRegistry</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">registerAlias</span><span class="token punctuation">(</span><span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">registerAlias</span><span class="token punctuation">(</span><span class="token string">&quot;byte&quot;</span><span class="token punctuation">,</span> <span class="token class-name">Byte</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">registerAlias</span><span class="token punctuation">(</span><span class="token string">&quot;long&quot;</span><span class="token punctuation">,</span> <span class="token class-name">Long</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">registerAlias</span><span class="token punctuation">(</span><span class="token string">&quot;short&quot;</span><span class="token punctuation">,</span> <span class="token class-name">Short</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">registerAlias</span><span class="token punctuation">(</span><span class="token string">&quot;int&quot;</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">registerAlias</span><span class="token punctuation">(</span><span class="token string">&quot;integer&quot;</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">registerAlias</span><span class="token punctuation">(</span><span class="token string">&quot;double&quot;</span><span class="token punctuation">,</span> <span class="token class-name">Double</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">registerAlias</span><span class="token punctuation">(</span><span class="token string">&quot;float&quot;</span><span class="token punctuation">,</span> <span class="token class-name">Float</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">registerAlias</span><span class="token punctuation">(</span><span class="token string">&quot;boolean&quot;</span><span class="token punctuation">,</span> <span class="token class-name">Boolean</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">registerAlias</span><span class="token punctuation">(</span><span class="token string">&quot;byte[]&quot;</span><span class="token punctuation">,</span> <span class="token class-name">Byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">registerAlias</span><span class="token punctuation">(</span><span class="token string">&quot;long[]&quot;</span><span class="token punctuation">,</span> <span class="token class-name">Long</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">registerAlias</span><span class="token punctuation">(</span><span class="token string">&quot;short[]&quot;</span><span class="token punctuation">,</span> <span class="token class-name">Short</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">registerAlias</span><span class="token punctuation">(</span><span class="token string">&quot;int[]&quot;</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">registerAlias</span><span class="token punctuation">(</span><span class="token string">&quot;integer[]&quot;</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">registerAlias</span><span class="token punctuation">(</span><span class="token string">&quot;double[]&quot;</span><span class="token punctuation">,</span> <span class="token class-name">Double</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">registerAlias</span><span class="token punctuation">(</span><span class="token string">&quot;float[]&quot;</span><span class="token punctuation">,</span> <span class="token class-name">Float</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">registerAlias</span><span class="token punctuation">(</span><span class="token string">&quot;boolean[]&quot;</span><span class="token punctuation">,</span> <span class="token class-name">Boolean</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">registerAlias</span><span class="token punctuation">(</span><span class="token string">&quot;_byte&quot;</span><span class="token punctuation">,</span> <span class="token keyword">byte</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">registerAlias</span><span class="token punctuation">(</span><span class="token string">&quot;_long&quot;</span><span class="token punctuation">,</span> <span class="token keyword">long</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">registerAlias</span><span class="token punctuation">(</span><span class="token string">&quot;_short&quot;</span><span class="token punctuation">,</span> <span class="token keyword">short</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">registerAlias</span><span class="token punctuation">(</span><span class="token string">&quot;_int&quot;</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">registerAlias</span><span class="token punctuation">(</span><span class="token string">&quot;_integer&quot;</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">registerAlias</span><span class="token punctuation">(</span><span class="token string">&quot;_double&quot;</span><span class="token punctuation">,</span> <span class="token keyword">double</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">registerAlias</span><span class="token punctuation">(</span><span class="token string">&quot;_float&quot;</span><span class="token punctuation">,</span> <span class="token keyword">float</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">registerAlias</span><span class="token punctuation">(</span><span class="token string">&quot;_boolean&quot;</span><span class="token punctuation">,</span> <span class="token keyword">boolean</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">registerAlias</span><span class="token punctuation">(</span><span class="token string">&quot;_byte[]&quot;</span><span class="token punctuation">,</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">registerAlias</span><span class="token punctuation">(</span><span class="token string">&quot;_long[]&quot;</span><span class="token punctuation">,</span> <span class="token keyword">long</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">registerAlias</span><span class="token punctuation">(</span><span class="token string">&quot;_short[]&quot;</span><span class="token punctuation">,</span> <span class="token keyword">short</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">registerAlias</span><span class="token punctuation">(</span><span class="token string">&quot;_int[]&quot;</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">registerAlias</span><span class="token punctuation">(</span><span class="token string">&quot;_integer[]&quot;</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">registerAlias</span><span class="token punctuation">(</span><span class="token string">&quot;_double[]&quot;</span><span class="token punctuation">,</span> <span class="token keyword">double</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">registerAlias</span><span class="token punctuation">(</span><span class="token string">&quot;_float[]&quot;</span><span class="token punctuation">,</span> <span class="token keyword">float</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">registerAlias</span><span class="token punctuation">(</span><span class="token string">&quot;_boolean[]&quot;</span><span class="token punctuation">,</span> <span class="token keyword">boolean</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">registerAlias</span><span class="token punctuation">(</span><span class="token string">&quot;date&quot;</span><span class="token punctuation">,</span> <span class="token class-name">Date</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">registerAlias</span><span class="token punctuation">(</span><span class="token string">&quot;decimal&quot;</span><span class="token punctuation">,</span> <span class="token class-name">BigDecimal</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">registerAlias</span><span class="token punctuation">(</span><span class="token string">&quot;bigdecimal&quot;</span><span class="token punctuation">,</span> <span class="token class-name">BigDecimal</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">registerAlias</span><span class="token punctuation">(</span><span class="token string">&quot;biginteger&quot;</span><span class="token punctuation">,</span> <span class="token class-name">BigInteger</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">registerAlias</span><span class="token punctuation">(</span><span class="token string">&quot;object&quot;</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">registerAlias</span><span class="token punctuation">(</span><span class="token string">&quot;date[]&quot;</span><span class="token punctuation">,</span> <span class="token class-name">Date</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">registerAlias</span><span class="token punctuation">(</span><span class="token string">&quot;decimal[]&quot;</span><span class="token punctuation">,</span> <span class="token class-name">BigDecimal</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">registerAlias</span><span class="token punctuation">(</span><span class="token string">&quot;bigdecimal[]&quot;</span><span class="token punctuation">,</span> <span class="token class-name">BigDecimal</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">registerAlias</span><span class="token punctuation">(</span><span class="token string">&quot;biginteger[]&quot;</span><span class="token punctuation">,</span> <span class="token class-name">BigInteger</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">registerAlias</span><span class="token punctuation">(</span><span class="token string">&quot;object[]&quot;</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">registerAlias</span><span class="token punctuation">(</span><span class="token string">&quot;map&quot;</span><span class="token punctuation">,</span> <span class="token class-name">Map</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">registerAlias</span><span class="token punctuation">(</span><span class="token string">&quot;hashmap&quot;</span><span class="token punctuation">,</span> <span class="token class-name">HashMap</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">registerAlias</span><span class="token punctuation">(</span><span class="token string">&quot;list&quot;</span><span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">registerAlias</span><span class="token punctuation">(</span><span class="token string">&quot;arraylist&quot;</span><span class="token punctuation">,</span> <span class="token class-name">ArrayList</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">registerAlias</span><span class="token punctuation">(</span><span class="token string">&quot;collection&quot;</span><span class="token punctuation">,</span> <span class="token class-name">Collection</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">registerAlias</span><span class="token punctuation">(</span><span class="token string">&quot;iterator&quot;</span><span class="token punctuation">,</span> <span class="token class-name">Iterator</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">registerAlias</span><span class="token punctuation">(</span><span class="token string">&quot;ResultSet&quot;</span><span class="token punctuation">,</span> <span class="token class-name">ResultSet</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>mybatiså¯åŠ¨çš„æ—¶å€™ä¼šåŠ è½½å…¨å±€é…ç½®æ–‡ä»¶ï¼Œä¼šå°†å…¶è½¬æ¢ä¸ºä¸€ä¸ª<code>org.apache.ibatis.session.Configuration</code>å¯¹è±¡ï¼Œå­˜å‚¨åœ¨å†…å­˜ä¸­ï¼Œ<code>Configuration</code>ç±»ä¸­ä¹Ÿæ³¨å†Œäº†ä¸€äº›åˆ«åï¼Œä»£ç å¦‚ä¸‹ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>typeAliasRegistry<span class="token punctuation">.</span><span class="token function">registerAlias</span><span class="token punctuation">(</span><span class="token string">&quot;JDBC&quot;</span><span class="token punctuation">,</span> <span class="token class-name">JdbcTransactionFactory</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
typeAliasRegistry<span class="token punctuation">.</span><span class="token function">registerAlias</span><span class="token punctuation">(</span><span class="token string">&quot;MANAGED&quot;</span><span class="token punctuation">,</span> <span class="token class-name">ManagedTransactionFactory</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
typeAliasRegistry<span class="token punctuation">.</span><span class="token function">registerAlias</span><span class="token punctuation">(</span><span class="token string">&quot;JNDI&quot;</span><span class="token punctuation">,</span> <span class="token class-name">JndiDataSourceFactory</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
typeAliasRegistry<span class="token punctuation">.</span><span class="token function">registerAlias</span><span class="token punctuation">(</span><span class="token string">&quot;POOLED&quot;</span><span class="token punctuation">,</span> <span class="token class-name">PooledDataSourceFactory</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
typeAliasRegistry<span class="token punctuation">.</span><span class="token function">registerAlias</span><span class="token punctuation">(</span><span class="token string">&quot;UNPOOLED&quot;</span><span class="token punctuation">,</span> <span class="token class-name">UnpooledDataSourceFactory</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
typeAliasRegistry<span class="token punctuation">.</span><span class="token function">registerAlias</span><span class="token punctuation">(</span><span class="token string">&quot;PERPETUAL&quot;</span><span class="token punctuation">,</span> <span class="token class-name">PerpetualCache</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
typeAliasRegistry<span class="token punctuation">.</span><span class="token function">registerAlias</span><span class="token punctuation">(</span><span class="token string">&quot;FIFO&quot;</span><span class="token punctuation">,</span> <span class="token class-name">FifoCache</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
typeAliasRegistry<span class="token punctuation">.</span><span class="token function">registerAlias</span><span class="token punctuation">(</span><span class="token string">&quot;LRU&quot;</span><span class="token punctuation">,</span> <span class="token class-name">LruCache</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
typeAliasRegistry<span class="token punctuation">.</span><span class="token function">registerAlias</span><span class="token punctuation">(</span><span class="token string">&quot;SOFT&quot;</span><span class="token punctuation">,</span> <span class="token class-name">SoftCache</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
typeAliasRegistry<span class="token punctuation">.</span><span class="token function">registerAlias</span><span class="token punctuation">(</span><span class="token string">&quot;WEAK&quot;</span><span class="token punctuation">,</span> <span class="token class-name">WeakCache</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
typeAliasRegistry<span class="token punctuation">.</span><span class="token function">registerAlias</span><span class="token punctuation">(</span><span class="token string">&quot;DB_VENDOR&quot;</span><span class="token punctuation">,</span> <span class="token class-name">VendorDatabaseIdProvider</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
typeAliasRegistry<span class="token punctuation">.</span><span class="token function">registerAlias</span><span class="token punctuation">(</span><span class="token string">&quot;XML&quot;</span><span class="token punctuation">,</span> <span class="token class-name">XMLLanguageDriver</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
typeAliasRegistry<span class="token punctuation">.</span><span class="token function">registerAlias</span><span class="token punctuation">(</span><span class="token string">&quot;RAW&quot;</span><span class="token punctuation">,</span> <span class="token class-name">RawLanguageDriver</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
typeAliasRegistry<span class="token punctuation">.</span><span class="token function">registerAlias</span><span class="token punctuation">(</span><span class="token string">&quot;SLF4J&quot;</span><span class="token punctuation">,</span> <span class="token class-name">Slf4jImpl</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
typeAliasRegistry<span class="token punctuation">.</span><span class="token function">registerAlias</span><span class="token punctuation">(</span><span class="token string">&quot;COMMONS_LOGGING&quot;</span><span class="token punctuation">,</span> <span class="token class-name">JakartaCommonsLoggingImpl</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
typeAliasRegistry<span class="token punctuation">.</span><span class="token function">registerAlias</span><span class="token punctuation">(</span><span class="token string">&quot;LOG4J&quot;</span><span class="token punctuation">,</span> <span class="token class-name">Log4jImpl</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
typeAliasRegistry<span class="token punctuation">.</span><span class="token function">registerAlias</span><span class="token punctuation">(</span><span class="token string">&quot;LOG4J2&quot;</span><span class="token punctuation">,</span> <span class="token class-name">Log4j2Impl</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
typeAliasRegistry<span class="token punctuation">.</span><span class="token function">registerAlias</span><span class="token punctuation">(</span><span class="token string">&quot;JDK_LOGGING&quot;</span><span class="token punctuation">,</span> <span class="token class-name">Jdk14LoggingImpl</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
typeAliasRegistry<span class="token punctuation">.</span><span class="token function">registerAlias</span><span class="token punctuation">(</span><span class="token string">&quot;STDOUT_LOGGING&quot;</span><span class="token punctuation">,</span> <span class="token class-name">StdOutImpl</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
typeAliasRegistry<span class="token punctuation">.</span><span class="token function">registerAlias</span><span class="token punctuation">(</span><span class="token string">&quot;NO_LOGGING&quot;</span><span class="token punctuation">,</span> <span class="token class-name">NoLoggingImpl</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
typeAliasRegistry<span class="token punctuation">.</span><span class="token function">registerAlias</span><span class="token punctuation">(</span><span class="token string">&quot;CGLIB&quot;</span><span class="token punctuation">,</span> <span class="token class-name">CglibProxyFactory</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
typeAliasRegistry<span class="token punctuation">.</span><span class="token function">registerAlias</span><span class="token punctuation">(</span><span class="token string">&quot;JAVASSIST&quot;</span><span class="token punctuation">,</span> <span class="token class-name">JavassistProxyFactory</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸Šé¢æœ‰2è¡Œå¦‚ä¸‹ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>typeAliasRegistry<span class="token punctuation">.</span><span class="token function">registerAlias</span><span class="token punctuation">(</span><span class="token string">&quot;JDBC&quot;</span><span class="token punctuation">,</span> <span class="token class-name">JdbcTransactionFactory</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
typeAliasRegistry<span class="token punctuation">.</span><span class="token function">registerAlias</span><span class="token punctuation">(</span><span class="token string">&quot;POOLED&quot;</span><span class="token punctuation">,</span> <span class="token class-name">PooledDataSourceFactory</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸Šé¢è¿™2è¡Œï¼Œæ³¨å†Œäº†2ä¸ªåˆ«åï¼Œåˆ«åå’Œç±»å‹æ˜ å°„å…³ç³»å¦‚ä¸‹ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token constant">JDBC</span> <span class="token operator">-&gt;</span> <span class="token class-name">JdbcTransactionFactory</span>
<span class="token constant">POOLED</span> <span class="token operator">-&gt;</span> <span class="token class-name">PooledDataSourceFactory</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸Šé¢è¿™2ä¸ªå¯¹è±¡ï¼Œå¤§å®¶åº”è¯¥æ¯”è¾ƒç†Ÿæ‚‰å§ï¼Œmybatiså…¨å±€é…ç½®æ–‡ä»¶ï¼ˆ<code>chat03\src\main\resources\demo1\mybatis-config.xml</code>ï¼‰ä¸­æˆ‘ä»¬ç”¨åˆ°è¿‡ï¼Œæˆ‘ä»¬å†å»çœ‹ä¸€ä¸‹ï¼Œå¦‚ä¸‹ï¼š</p><p><img src="https://raw.githubusercontent.com/huluhutu/blogimg/main/img/image-20221011095048358.png" alt="image-20221011095048358" loading="lazy"></p><p>ä¸Šé¢2ä¸ªçº¢æ¡†çš„æ˜¯ä¸æ˜¯å°±æ˜¯ä¸Šé¢æ³¨å†Œçš„2ä¸ªç±»å‹ï¼Œä¸Šé¢xmlä¸­æˆ‘ä»¬å†™çš„æ˜¯å®Œæ•´ç±»å‹åç§°ï¼Œæˆ‘ä»¬å¯ä»¥å°†å…¶æ”¹ä¸ºåˆ«åçš„æ–¹å¼ä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œå¦‚ä¸‹ï¼š</p><p><img src="https://raw.githubusercontent.com/huluhutu/blogimg/main/img/image-20221011095127116.png" alt="image-20221011095127116" loading="lazy"></p><p>æˆ‘ä»¬æ¥è¿è¡Œ<code>com.javacode2018.chat03.demo1.UserMapperTest#getUserList</code>ï¼Œçœ‹ä¸€ä¸‹èƒ½å¦æ­£å¸¸è¿è¡Œï¼Œè¾“å‡ºå¦‚ä¸‹ï¼š</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>44:10.886 [main] DEBUG c.j.c.demo1.UserMapper.getUserList - ==&gt;  Preparing: SELECT * FROM t_user 
44:10.929 [main] DEBUG c.j.c.demo1.UserMapper.getUserList - ==&gt; Parameters: 
44:10.947 [main] DEBUG c.j.c.demo1.UserMapper.getUserList - &lt;==      Total: 4
44:10.948 [main] INFO  c.j.chat03.demo1.UserMapperTest - UserModel(id=1, name=è·¯äººç”²Java, age=30, salary=50000.0, sex=1)
44:10.950 [main] INFO  c.j.chat03.demo1.UserMapperTest - UserModel(id=2, name=javacode2018, age=30, salary=50000.0, sex=1)
44:10.950 [main] INFO  c.j.chat03.demo1.UserMapperTest - UserModel(id=3, name=å¼ å­¦å‹, age=56, salary=500000.0, sex=1)
44:10.950 [main] INFO  c.j.chat03.demo1.UserMapperTest - UserModel(id=4, name=æ—å¿—ç², age=45, salary=88888.88, sex=2)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_7-åˆ«åçš„åŸç†" tabindex="-1"><a class="header-anchor" href="#_7-åˆ«åçš„åŸç†" aria-hidden="true">#</a> 7.åˆ«åçš„åŸç†</h3><p>mybatiså…è®¸æˆ‘ä»¬ç»™æŸç§ç±»å‹æ³¨å†Œä¸€ä¸ªåˆ«åï¼Œåˆ«åå’Œç±»å‹ä¹‹é—´ä¼šå»ºç«‹æ˜ å°„å…³ç³»ï¼Œè¿™ä¸ªæ˜ å°„å…³ç³»å­˜å‚¨åœ¨ä¸€ä¸ªmapå¯¹è±¡ä¸­ï¼Œkeyä¸ºåˆ«åçš„åç§°ï¼Œvalueä¸ºå…·ä½“çš„ç±»å‹ï¼Œå½“æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªåç§°è®¿é—®æŸç§ç±»å‹çš„æ—¶å€™ï¼Œmybatisæ ¹æ®ç±»å‹çš„åç§°ï¼Œå…ˆåœ¨åˆ«åå’Œç±»å‹æ˜ å°„çš„mapä¸­æŒ‰ç…§keyè¿›è¡ŒæŸ¥æ‰¾ï¼Œå¦‚æœæ‰¾åˆ°äº†ç›´æ¥è¿”å›å¯¹åº”çš„ç±»å‹ï¼Œå¦‚æœæ²¡æ‰¾åˆ°ï¼Œä¼šå°†è¿™ä¸ªåç§°å½“åšå®Œæ•´çš„ç±»åå»è§£ææˆClasså¯¹è±¡ï¼Œå¦‚æœè¿™2æ­¥è§£æéƒ½æ— æ³•è¯†åˆ«è¿™ç§ç±»å‹ï¼Œå°±ä¼šæŠ¥é”™ã€‚</p><p><strong>mybatiså’Œåˆ«åç›¸å…³çš„æ“ä½œéƒ½ä½äº<code>org.apache.ibatis.type.TypeAliasRegistry</code>ç±»ä¸­ï¼ŒåŒ…å«åˆ«åçš„æ³¨å†Œã€è§£æç­‰å„ç§æ“ä½œã€‚</strong></p><p>æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹åˆ«åè§£æçš„æ–¹æ³•ï¼Œå¦‚ä¸‹ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token function">resolveAlias</span><span class="token punctuation">(</span><span class="token class-name">String</span> string<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>string <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token comment">// issue #748</span>
      <span class="token class-name">String</span> key <span class="token operator">=</span> string<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token class-name">Locale</span><span class="token punctuation">.</span><span class="token constant">ENGLISH</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> value<span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>typeAliases<span class="token punctuation">.</span><span class="token function">containsKey</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        value <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span> typeAliases<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        value <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span> <span class="token class-name">Resources</span><span class="token punctuation">.</span><span class="token function">classForName</span><span class="token punctuation">(</span>string<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">return</span> value<span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">ClassNotFoundException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">TypeException</span><span class="token punctuation">(</span><span class="token string">&quot;Could not resolve type alias &#39;&quot;</span> <span class="token operator">+</span> string <span class="token operator">+</span> <span class="token string">&quot;&#39;.  Cause: &quot;</span> <span class="token operator">+</span> e<span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æœ‰ä¸€ä¸ª<code>typeAliases</code>å¯¹è±¡ï¼Œæˆ‘ä»¬çœ‹ä¸€ä¸‹å…¶å®šä¹‰ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Class</span><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> typeAliases <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>è¿™ä¸ªå¯¹è±¡å°±æ˜¯å­˜æ”¾åˆ«åå’Œå…·ä½“ç±»å‹æ˜ å°„å…³ç³»çš„ï¼Œä»ä¸Šé¢ä»£ç ä¸­å¯ä»¥çœ‹å‡ºï¼Œé€šè¿‡ä¼ å…¥çš„å‚æ•°è§£æå¯¹åº”çš„ç±»å‹çš„æ—¶å€™ï¼Œä¼šå…ˆä»<code>typeAliases</code>ä¸­æŸ¥æ‰¾ï¼Œå¦‚æœæ‰¾ä¸åˆ°ä¼šè°ƒç”¨ä¸‹é¢ä»£ç ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>value <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span> <span class="token class-name">Resources</span><span class="token punctuation">.</span><span class="token function">classForName</span><span class="token punctuation">(</span>string<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ä¸Šé¢è¿™ä¸ªæ–¹æ³•é‡Œé¢å…·ä½“æ˜¯ä½¿ç”¨ä¸‹é¢ä»£ç å»é€šè¿‡åç§°è§£ææˆç±»å‹çš„ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span>ç±»åå®Œæ•´åç§°<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Class.forNameå¤§å®¶åº”è¯¥æ˜¯å¾ˆç†Ÿæ‚‰çš„ï¼Œå¯ä»¥è·å–ä¸€ä¸ªå­—ç¬¦ä¸²å¯¹åº”çš„Classå¯¹è±¡ï¼Œå¦‚æœæ‰¾ä¸åˆ°è¿™ä¸ªå¯¹è±¡ï¼Œä¼šæŠ¥é”™ã€‚</p><h3 id="_8-åˆ«åä½¿ç”¨å»ºè®®" tabindex="-1"><a class="header-anchor" href="#_8-åˆ«åä½¿ç”¨å»ºè®®" aria-hidden="true">#</a> 8.åˆ«åä½¿ç”¨å»ºè®®</h3><p>åˆ«åçš„æ–¹å¼å¯ä»¥ç®€åŒ–ç±»å‹çš„å†™æ³•ï¼ŒåŸæœ¬å¾ˆé•¿ä¸€ä¸²çš„<code>UserModel</code>å¯¹è±¡ï¼Œç°åœ¨åªç”¨å†™ä¸ª<code>user</code>å°±è¡Œäº†ï¼Œç”¨èµ·æ¥æ˜¯ä¸æ˜¯æŒºçˆ½çš„ï¼Ÿ</p><p>ä»å†™æ³•ä¸Šé¢æ¥è¯´ï¼Œç¡®å®å°‘å¸®æˆ‘ä»¬çœäº†ä¸€äº›ä»£ç ï¼Œä½†æ˜¯ä»ç»´æŠ¤ä¸Šé¢æ¥è®²ï¼Œä¸æ˜¯å¾ˆæ–¹ä¾¿ã€‚</p><p>å¦‚Mapper xmlç›´æ¥å†™åˆ«åï¼Œçœ‹ä»£ç çš„æ—¶å€™ï¼Œå¾ˆéš¾çŸ¥é“è¿™ä¸ªåˆ«åå¯¹åº”çš„å…·ä½“ç±»å‹ï¼Œè¿˜éœ€è¦æˆ‘ä»¬å»æ³¨å†Œçš„åœ°æ–¹æ‰¾ä¸€ä¸‹ï¼Œä¸æ˜¯å¤ªæ–¹ä¾¿ï¼Œå¦‚æœæˆ‘ä»¬åœ¨ideaä¸­å†™å®Œæ•´çš„ç±»åï¼Œè¿˜å¯ä»¥æŒ‰ä½<code>Ctrl</code>å¥ï¼Œç„¶åç”¨é¼ æ ‡å·¦é”®ç‚¹å‡»<code>ç±»å‹</code>ç›´æ¥å¯ä»¥è·³åˆ°å¯¹åº”çš„ç±»å®šä¹‰ä¸­å»ï¼Œå¦‚æœä½¿ç”¨åˆ«åæ˜¯æ— æ³•å¯¼èˆªè¿‡å»çš„ã€‚</p><p>æ•´ä½“ä¸Šæ¥è¯´å¼€å‘å’Œçœ‹ä»£ç éƒ½ä¸æ˜¯å¤ªæ–¹ä¾¿ï¼Œåªæ˜¯å†™æ³•ä¸Šæ¯”ä»·ç®€å•ã€‚</p><h2 id="_5-å±æ€§é…ç½®è¯¦è§£" tabindex="-1"><a class="header-anchor" href="#_5-å±æ€§é…ç½®è¯¦è§£" aria-hidden="true">#</a> 5-å±æ€§é…ç½®è¯¦è§£</h2><p>å®¶çœ‹ä¸€ä¸‹chat03\src\main\resources\demo1\mybatis-config.xmlä¸­ä¸‹é¢è¿™ä¸€éƒ¨åˆ†çš„é…ç½®ï¼š</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dataSource</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>POOLED<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>driver<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.mysql.jdbc.Driver<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>url<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>jdbc:mysql://localhost:3306/javacode2018?characterEncoding=UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>root<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>root123<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dataSource</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™ä¸ªè¿æ¥æ•°æ®åº“çš„é…ç½®ï¼Œæˆ‘ä»¬æ˜¯ç›´æ¥å†™åœ¨mybatiså…¨å±€é…ç½®æ–‡ä»¶ä¸­çš„ï¼Œä¸Šé¢è¿™æ˜¯æˆ‘ä»¬æœ¬åœ°æµ‹è¯•åº“çš„dbä¿¡æ¯ï¼Œä¸Šçº¿ä¹‹åï¼Œéœ€è¦ä¿®æ”¹ä¸ºçº¿ä¸Šçš„dbé…ç½®ä¿¡æ¯ï¼Œdbé…ç½®ä¿¡æ¯ä¸€èˆ¬ç”±è¿ç»´å»ä¿®æ”¹ï¼Œè®©è¿ç»´å»ä¿®æ”¹è¿™ä¸ªxmlé…ç½®æ–‡ä»¶ï¼Ÿ</p><p>è¿™æ ·ä¸æ˜¯å¤ªå¥½ï¼Œæˆ‘ä»¬é€šå¸¸å°†ä¸€äº›éœ€è¦è¿ç»´ä¿®æ”¹çš„é…ç½®ä¿¡æ¯ï¼ˆå¦‚ï¼šdbé…ç½®ã€é‚®ä»¶é…ç½®ã€redisé…ç½®ç­‰ç­‰å„ç§é…ç½®ï¼‰æ”¾åœ¨ä¸€ä¸ªpropertiesé…æ–‡ä»¶ä¸­ï¼Œç„¶åä¸Šçº¿æ—¶ï¼Œåªéœ€è¦è¿ç»´å»ä¿®æ”¹è¿™ä¸ªé…ç½®æ–‡ä»¶å°±å¯ä»¥äº†ï¼Œæ ¹æœ¬ä¸ç”¨ä»–ä»¬å»ä¿®æ”¹å’Œä»£ç ç›¸å…³çš„æ–‡ä»¶ã€‚</p><p>mybatisä¹Ÿæ”¯æŒæˆ‘ä»¬é€šè¿‡å¤–éƒ¨propertiesæ–‡ä»¶æ¥é…ç½®ä¸€äº›å±æ€§ä¿¡æ¯ã€‚</p><p>mybatisé…ç½®å±æ€§ä¿¡æ¯æœ‰3ç§æ–¹å¼ã€‚</p><h3 id="æ–¹å¼1-propertyå…ƒç´ ä¸­å®šä¹‰å±æ€§" tabindex="-1"><a class="header-anchor" href="#æ–¹å¼1-propertyå…ƒç´ ä¸­å®šä¹‰å±æ€§" aria-hidden="true">#</a> æ–¹å¼1ï¼špropertyå…ƒç´ ä¸­å®šä¹‰å±æ€§</h3><h4 id="å±æ€§å®šä¹‰" tabindex="-1"><a class="header-anchor" href="#å±æ€§å®šä¹‰" aria-hidden="true">#</a> å±æ€§å®šä¹‰</h4><p>mybatiså…¨å±€é…ç½®æ–‡ä»¶ä¸­é€šè¿‡propertieså…ƒç´ æ¥å®šä¹‰å±æ€§ä¿¡æ¯ï¼Œå¦‚ä¸‹ï¼š</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>å±æ€§åç§°<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>å±æ€§å¯¹åº”çš„å€¼<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸Šé¢é€šè¿‡propertyå…ƒç´ çš„æ–¹å¼è¿›è¡Œé…ç½®å±æ€§ä¿¡æ¯ï¼š</p><p>nameï¼šå±æ€§çš„åç§°</p><p>valueï¼šå±æ€§çš„å€¼ã€‚</p><p>å¦‚ï¼š</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>jdbc.driver<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.mysql.jdbc.Driver<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h5 id="ä½¿ç”¨-å±æ€§åç§°-å¼•ç”¨å±æ€§çš„å€¼" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨-å±æ€§åç§°-å¼•ç”¨å±æ€§çš„å€¼" aria-hidden="true">#</a> ä½¿ç”¨${å±æ€§åç§°}å¼•ç”¨å±æ€§çš„å€¼</h5><p>å±æ€§å·²ç»å®šä¹‰å¥½äº†ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡<code>${å±æ€§åç§°}</code>å¼•ç”¨å®šä¹‰å¥½çš„å±æ€§çš„å€¼ï¼Œå¦‚ï¼š</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>driver<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${jdbc.driver}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="æ¡ˆä¾‹-3" tabindex="-1"><a class="header-anchor" href="#æ¡ˆä¾‹-3" aria-hidden="true">#</a> æ¡ˆä¾‹</h4><p>æˆ‘ä»¬åœ¨<code>demo1/mapper/mybatis-config.xml</code>çš„<code>configuration</code>å…ƒç´ ä¸­åŠ å…¥ä¸‹é¢é…ç½®ï¼š</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>jdbc.driver<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.mysql.jdbc.Driver<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>jdbc.url<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>jdbc:mysql://localhost:3306/javacode2018?characterEncoding=UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>jdbc.username<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>root<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>jdbc.password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>root123<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¿®æ”¹<code>datasource</code>çš„é…ç½®ï¼š</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dataSource</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>POOLED<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>driver<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${jdbc.driver}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>url<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${jdbc.url}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${jdbc.username}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${jdbc.password}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dataSource</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿è¡Œ<code>com.javacode2018.chat03.demo1.UserMapperTest#getUserList</code>ï¼Œå¦‚ä¸‹ï¼š</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>40:22.274 [main] DEBUG c.j.c.demo1.UserMapper.getUserList - ==&gt;  Preparing: SELECT * FROM t_user 
40:22.307 [main] DEBUG c.j.c.demo1.UserMapper.getUserList - ==&gt; Parameters: 
40:22.330 [main] DEBUG c.j.c.demo1.UserMapper.getUserList - &lt;==      Total: 4
40:22.331 [main] INFO  c.j.chat03.demo1.UserMapperTest - UserModel(id=1, name=è·¯äººç”²Java, age=30, salary=50000.0, sex=1)
40:22.332 [main] INFO  c.j.chat03.demo1.UserMapperTest - UserModel(id=2, name=javacode2018, age=30, salary=50000.0, sex=1)
40:22.332 [main] INFO  c.j.chat03.demo1.UserMapperTest - UserModel(id=3, name=å¼ å­¦å‹, age=56, salary=500000.0, sex=1)
40:22.332 [main] INFO  c.j.chat03.demo1.UserMapperTest - UserModel(id=4, name=æ—å¿—ç², age=45, salary=88888.88, sex=2)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿è¡Œæ­£å¸¸ã€‚</p><h3 id="æ–¹å¼2-resourceå¼•å…¥é…ç½®æ–‡ä»¶" tabindex="-1"><a class="header-anchor" href="#æ–¹å¼2-resourceå¼•å…¥é…ç½®æ–‡ä»¶" aria-hidden="true">#</a> æ–¹å¼2ï¼šresourceå¼•å…¥é…ç½®æ–‡ä»¶</h3><p>æ–¹å¼1ä¸­ï¼Œæˆ‘ä»¬çš„é…ç½®æ–‡ä»¶è¿˜æ˜¯å†™åœ¨å…¨å±€é…ç½®æ–‡ä»¶ä¸­ï¼Œmybatisæ”¯æŒä»å¤–éƒ¨å¼•å…¥é…ç½®æ–‡ä»¶ï¼Œå¯ä»¥æŠŠé…ç½®æ–‡ä»¶å†™åœ¨å…¶ä»–å¤–éƒ¨æ–‡ä»¶ä¸­ï¼Œç„¶åè¿›è¡Œå¼•å…¥ã€‚</p><h4 id="å¼•å…¥classesè·¯å¾„ä¸­çš„é…ç½®æ–‡ä»¶" tabindex="-1"><a class="header-anchor" href="#å¼•å…¥classesè·¯å¾„ä¸­çš„é…ç½®æ–‡ä»¶" aria-hidden="true">#</a> å¼•å…¥classesè·¯å¾„ä¸­çš„é…ç½®æ–‡ä»¶</h4><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span> <span class="token attr-name">resource</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>é…ç½®æ–‡ä»¶è·¯å¾„<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>propertieså…ƒç´ æœ‰ä¸ª<code>resource</code>å±æ€§ï¼Œå€¼ä¸º<code>é…ç½®æ–‡ä»¶ç›¸å¯¹äºclassesçš„è·¯å¾„</code>ï¼Œé…ç½®æ–‡ä»¶æˆ‘ä»¬ä¸€èˆ¬æ”¾åœ¨<code>src/main/resource</code>ç›®å½•ï¼Œè¿™ä¸ªç›®å½•çš„æ–‡ä»¶ç¼–è¯‘ä¹‹åä¼šæ”¾åœ¨<code>classes</code>è·¯å¾„ä¸­ã€‚</p><h4 id="æ¡ˆä¾‹-4" tabindex="-1"><a class="header-anchor" href="#æ¡ˆä¾‹-4" aria-hidden="true">#</a> æ¡ˆä¾‹</h4><p>ä¸‹é¢æˆ‘ä»¬å°†ä¸Šé¢dbçš„é…ç½®æ”¾åœ¨å¤–éƒ¨çš„config.propertiesæ–‡ä»¶ä¸­ã€‚</p><p>åœ¨<code>chat03\src\main\resources\demo1</code>ç›®å½•æ–°å»ºä¸€ä¸ªé…ç½®æ–‡ä»¶<code>config.properties</code>ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p><div class="language-properties ext-properties line-numbers-mode"><pre class="language-properties"><code><span class="token key attr-name">jdbc.driver</span><span class="token punctuation">=</span><span class="token value attr-value">com.mysql.jdbc.Driver</span>
<span class="token key attr-name">jdbc.url</span><span class="token punctuation">=</span><span class="token value attr-value">jdbc:mysql://localhost:3306/javacode2018?characterEncoding=UTF-8</span>
<span class="token key attr-name">jdbc.username</span><span class="token punctuation">=</span><span class="token value attr-value">root</span>
<span class="token key attr-name">jdbc.password</span><span class="token punctuation">=</span><span class="token value attr-value">root123</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>demo1/mapper/mybatis-config.xml</code>ä¸­å¼•å…¥ä¸Šé¢é…ç½®æ–‡ä»¶ï¼š</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!-- å¼•å…¥å¤–éƒ¨é…ç½®æ–‡ä»¶ --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span> <span class="token attr-name">resource</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>demo1/mapper/config.properties<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>ç›®å‰<code>demo1/mapper/mybatis-config.xml</code>æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
<span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">configuration</span>
        <span class="token name">PUBLIC</span> <span class="token string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span>
        <span class="token string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- å¼•å…¥å¤–éƒ¨é…ç½®æ–‡ä»¶ --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span> <span class="token attr-name">resource</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>demo1/config.properties<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>typeAliases</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>package</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.javacode2018.chat03.demo1<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>typeAliases</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- ç¯å¢ƒé…ç½®ï¼Œå¯ä»¥é…ç½®å¤šä¸ªç¯å¢ƒ --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>environments</span> <span class="token attr-name">default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>chat04-demo1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- 
            environmentç”¨æ¥å¯¹æŸä¸ªç¯å¢ƒè¿›è¡Œé…ç½®
            idï¼šç¯å¢ƒæ ‡è¯†ï¼Œå”¯ä¸€
         --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>environment</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>chat04-demo1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token comment">&lt;!-- äº‹åŠ¡ç®¡ç†å™¨å·¥å‚é…ç½® --&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>transactionManager</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>JDBC<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
            <span class="token comment">&lt;!-- æ•°æ®æºå·¥å‚é…ç½®ï¼Œä½¿ç”¨å·¥å‚æ¥åˆ›å»ºæ•°æ®æº --&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dataSource</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>POOLED<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>driver<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${jdbc.driver}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>url<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${jdbc.url}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${jdbc.username}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${jdbc.password}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dataSource</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>environment</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>environments</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mappers</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">resource</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>demo1/mapper/UserMapper.xml<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mappers</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿è¡Œ<code>com.javacode2018.chat03.demo1.UserMapperTest#getUserList</code>ï¼Œå¦‚ä¸‹ï¼š</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>57:40.405 [main] DEBUG c.j.c.demo1.UserMapper.getUserList - ==&gt;  Preparing: SELECT * FROM t_user 
57:40.436 [main] DEBUG c.j.c.demo1.UserMapper.getUserList - ==&gt; Parameters: 
57:40.454 [main] DEBUG c.j.c.demo1.UserMapper.getUserList - &lt;==      Total: 4
57:40.455 [main] INFO  c.j.chat03.demo1.UserMapperTest - UserModel(id=1, name=è·¯äººç”²Java, age=30, salary=50000.0, sex=1)
57:40.457 [main] INFO  c.j.chat03.demo1.UserMapperTest - UserModel(id=2, name=javacode2018, age=30, salary=50000.0, sex=1)
57:40.457 [main] INFO  c.j.chat03.demo1.UserMapperTest - UserModel(id=3, name=å¼ å­¦å‹, age=56, salary=500000.0, sex=1)
57:40.457 [main] INFO  c.j.chat03.demo1.UserMapperTest - UserModel(id=4, name=æ—å¿—ç², age=45, salary=88888.88, sex=2)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿è¡Œæ­£å¸¸ã€‚</p><h3 id="æ–¹å¼3-urlçš„æ–¹å¼å¼•å…¥è¿œç¨‹é…ç½®æ–‡ä»¶" tabindex="-1"><a class="header-anchor" href="#æ–¹å¼3-urlçš„æ–¹å¼å¼•å…¥è¿œç¨‹é…ç½®æ–‡ä»¶" aria-hidden="true">#</a> æ–¹å¼3ï¼šurlçš„æ–¹å¼å¼•å…¥è¿œç¨‹é…ç½®æ–‡ä»¶</h3><p>mybatisè¿˜æä¾›äº†å¼•å…¥è¿œç¨‹é…ç½®æ–‡ä»¶çš„æ–¹å¼ï¼Œå¦‚ä¸‹ï¼š</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span> <span class="token attr-name">url</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>è¿œç¨‹é…ç½®æ–‡ä»¶çš„è·¯å¾„<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>è¿™æ¬¡è¿˜æ˜¯ä½¿ç”¨<code>properties</code>å…ƒç´ ï¼Œä¸è¿‡ä½¿ç”¨çš„æ˜¯<code>url</code>å±æ€§ï¼Œå¦‚ï¼š</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span> <span class="token attr-name">url</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://itsoku.com/properties/config.properties<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>è¿™ç§æ–¹å¼çš„æ¡ˆä¾‹å°±ä¸æä¾›äº†ï¼Œæœ‰å…´è¶£çš„å¯ä»¥è‡ªå·±å»ç©ç©ã€‚</p><h2 id="_6-mybatiså¼•å…¥mapperçš„ä¸‰ç§æ–¹å¼" tabindex="-1"><a class="header-anchor" href="#_6-mybatiså¼•å…¥mapperçš„ä¸‰ç§æ–¹å¼" aria-hidden="true">#</a> 6-mybatiså¼•å…¥mapperçš„ä¸‰ç§æ–¹å¼</h2><p>mapper xmlæ–‡ä»¶æ˜¯éå¸¸é‡è¦çš„ï¼Œæˆ‘ä»¬å†™çš„sqlåŸºæœ¬ä¸Šéƒ½åœ¨é‡Œé¢ï¼Œä½¿ç”¨mybatiså¼€å‘é¡¹ç›®çš„æ—¶å€™ï¼Œå’Œmybatisç›¸å…³çš„å¤§éƒ¨åˆ†ä»£ç å°±æ˜¯å†™sqlï¼ŒåŸºæœ¬ä¸Šéƒ½æ˜¯å’Œmapper xmlæ‰“äº¤é“ã€‚</p><p>ç¼–å†™å¥½çš„mapper xmléœ€è¦è®©mybatisçŸ¥é“ï¼Œæˆ‘ä»¬æ€ä¹ˆè®©mybatisçŸ¥é“å‘¢ï¼Ÿ</p><p>å¯ä»¥é€šè¿‡mybatiså…¨å±€é…ç½®æ–‡ä»¶è¿›è¡Œå¼•å…¥ï¼Œä¸»è¦æœ‰3ç§æ–¹å¼ã€‚</p><h3 id="æ–¹å¼1-ä½¿ç”¨mapper-resouceå±æ€§æ³¨å†Œmapper-xmlæ–‡ä»¶" tabindex="-1"><a class="header-anchor" href="#æ–¹å¼1-ä½¿ç”¨mapper-resouceå±æ€§æ³¨å†Œmapper-xmlæ–‡ä»¶" aria-hidden="true">#</a> æ–¹å¼1ï¼šä½¿ç”¨mapper resouceå±æ€§æ³¨å†Œmapper xmlæ–‡ä»¶</h3><p>ç›®å‰æˆ‘ä»¬æ‰€æ¶‰åŠåˆ°çš„å„ç§ä¾‹å­éƒ½æ˜¯é‡‡ç”¨çš„è¿™ç§æ–¹å¼ï¼Œä½¿ç”¨ä¸‹é¢çš„æ–¹æ³•è¿›è¡Œå¼•å…¥ï¼š</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mappers</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">resource</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Mapper xmlçš„è·¯å¾„ï¼ˆç›¸å¯¹äºclassesçš„è·¯å¾„ï¼‰<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mappers</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å†æ¥è¯´ä¸€ä¸‹è¿™ç§æ–¹å¼çš„ä¸€äº›æ³¨æ„ç‚¹ï¼š</p><ol><li>ä¸€èˆ¬æƒ…å†µä¸‹é¢æˆ‘ï¼Œæˆ‘ä»¬ä¼šåˆ›å»ºä¸€ä¸ªå’ŒMapper xmlä¸­namespaceåŒåçš„Mapperæ¥å£ï¼ŒMapperæ¥å£ä¼šå’ŒMapper xmlæ–‡ä»¶è¿›è¡Œç»‘å®š</li><li>mybatisåŠ è½½mapper xmlçš„æ—¶å€™ï¼Œä¼šå»æŸ¥æ‰¾namespaceå¯¹åº”çš„Mapperæ¥å£ï¼Œç„¶åè¿›è¡Œæ³¨å†Œï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡Mapperæ¥å£çš„æ–¹å¼å»è®¿é—®Mapper xmlä¸­çš„å…·ä½“æ“ä½œ</li><li>Mapper xmlå’ŒMapper æ¥å£é…åˆçš„æ–¹å¼æ˜¯æ¯”è¾ƒå¸¸è§çš„åšæ³•ï¼Œä¹Ÿæ˜¯å¼ºçƒˆå»ºè®®å¤§å®¶ä½¿ç”¨çš„</li></ol><h3 id="æ–¹å¼2-ä½¿ç”¨mapper-classå±æ€§æ³¨å†Œmapperæ¥å£" tabindex="-1"><a class="header-anchor" href="#æ–¹å¼2-ä½¿ç”¨mapper-classå±æ€§æ³¨å†Œmapperæ¥å£" aria-hidden="true">#</a> æ–¹å¼2ï¼šä½¿ç”¨mapper classå±æ€§æ³¨å†ŒMapperæ¥å£</h3><h4 id="å¼•å…¥mapperæ¥å£" tabindex="-1"><a class="header-anchor" href="#å¼•å…¥mapperæ¥å£" aria-hidden="true">#</a> å¼•å…¥Mapperæ¥å£</h4><p>mybatiså…¨å±€é…ç½®æ–‡ä»¶ä¸­å¼•å…¥mapperæ¥å£ï¼Œå¦‚ä¸‹ï¼š</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mappers</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>æ¥å£çš„å®Œæ•´ç±»å<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mappers</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>è¿™ç§æƒ…å†µä¸‹ï¼Œmybaisä¼šå»åŠ è½½<code>class</code>å¯¹åº”çš„æ¥å£ï¼Œç„¶åè¿˜ä¼šå»åŠ è½½å’Œè¿™ä¸ªæ¥å£åŒä¸€ä¸ªç›®å½•çš„åŒåçš„xmlæ–‡ä»¶ã€‚</strong></p><p>å¦‚ï¼š</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mappers</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.javacode2018.chat03.demo1.UserMapper<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mappers</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸Šé¢è¿™ç§å†™æ³•ï¼Œmybatisä¼šè‡ªåŠ¨å»æ³¨å†Œ<code>UserMapper</code>æ¥å£ï¼Œè¿˜ä¼šå»æŸ¥æ‰¾ä¸‹é¢çš„æ–‡ä»¶ï¼š</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code>com/javacode2018/chat03/demo1/UserMapper.xml
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>å¤§å®¶ä»¥åå¼€å‘é¡¹ç›®çš„æ—¶å€™ä¼°è®¡ä¹Ÿä¼šçœ‹åˆ°è¿™ç§å†™æ³•ï¼Œ<code>Mapperæ¥å£</code>å’Œ<code>Mapper xml</code>æ–‡ä»¶æ”¾åœ¨åŒä¸€ä¸ªåŒ…ä¸­ã€‚</p><h4 id="æ¡ˆä¾‹-5" tabindex="-1"><a class="header-anchor" href="#æ¡ˆä¾‹-5" aria-hidden="true">#</a> æ¡ˆä¾‹</h4><p>ä¸‹é¢æˆ‘ä»¬é‡æ–°åˆ›å»ºä¸€ä¸ªæ¡ˆä¾‹ï¼Œéƒ½æ”¾åœ¨demo2åŒ…ä¸­ã€‚</p><p>æ–°å»º<code>com.javacode2018.chat03.demo2.UserModel</code>ï¼Œå¦‚ä¸‹ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>javacode2018<span class="token punctuation">.</span>chat03<span class="token punctuation">.</span>demo2</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>type<span class="token punctuation">.</span></span><span class="token class-name">Alias</span></span><span class="token punctuation">;</span>
<span class="token doc-comment comment">/**
 * å…¬ä¼—å·ï¼šè·¯äººç”²Javaï¼Œå·¥ä½œ10å¹´çš„å‰é˜¿é‡ŒP7åˆ†äº«Javaã€ç®—æ³•ã€æ•°æ®åº“æ–¹é¢çš„æŠ€æœ¯å¹²è´§ï¼åšä¿¡ç”¨æŠ€æœ¯æ”¹å˜å‘½è¿ï¼Œè®©å®¶äººè¿‡ä¸Šæ›´ä½“é¢çš„ç”Ÿæ´»!
 */</span>
<span class="token annotation punctuation">@Getter</span>
<span class="token annotation punctuation">@Setter</span>
<span class="token annotation punctuation">@NoArgsConstructor</span>
<span class="token annotation punctuation">@AllArgsConstructor</span>
<span class="token annotation punctuation">@Builder</span>
<span class="token annotation punctuation">@ToString</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserModel</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">Long</span> id<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> age<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Double</span> salary<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> sex<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ–°å»º<code>com.javacode2018.chat03.demo2.UserMapper</code>ï¼Œå¦‚ä¸‹ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>javacode2018<span class="token punctuation">.</span>chat03<span class="token punctuation">.</span>demo2</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span>
<span class="token doc-comment comment">/**
 * å…¬ä¼—å·ï¼šè·¯äººç”²Javaï¼Œå·¥ä½œ10å¹´çš„å‰é˜¿é‡ŒP7åˆ†äº«Javaã€ç®—æ³•ã€æ•°æ®åº“æ–¹é¢çš„æŠ€æœ¯å¹²è´§ï¼åšä¿¡ç”¨æŠ€æœ¯æ”¹å˜å‘½è¿ï¼Œè®©å®¶äººè¿‡ä¸Šæ›´ä½“é¢çš„ç”Ÿæ´»!
 */</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">UserMapper</span> <span class="token punctuation">{</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">UserModel</span><span class="token punctuation">&gt;</span></span> <span class="token function">getUserList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>chat03\src\main\java\com\javacode2018\chat03\demo2</code>ä¸­åˆ›å»º<code>UserMapper.xml</code>ï¼Œå¦‚ä¸‹ï¼š</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
<span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">mapper</span> <span class="token name">PUBLIC</span> <span class="token string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span>
        <span class="token string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">namespace</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.javacode2018.chat03.demo2.UserMapper<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- selectç”¨æ¥å®šä¹‰ä¸€ä¸ªæŸ¥è¯¢æ“ä½œ
         idï¼šæ“ä½œçš„å…·ä½“æ ‡è¯†
         resultTypeï¼šæŒ‡å®šæŸ¥è¯¢ç»“æœä¿å­˜çš„ç±»å‹
     --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>getUserList<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.javacode2018.chat03.demo2.UserModel<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token cdata">&lt;![CDATA[
        SELECT * FROM t_user
        ]]&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mapper</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸‹é¢é‡ç‚¹æ¥äº†ã€‚</p><p>åˆ›å»ºmybatiså…¨å±€é…ç½®æ–‡ä»¶ï¼Œåœ¨<code>chat03\src\main\resources\demo2</code>ç›®å½•ä¸­åˆ›å»º<code>mybatis-config.xml</code>ï¼Œå¦‚ä¸‹ï¼š</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
<span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">configuration</span>
        <span class="token name">PUBLIC</span> <span class="token string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span>
        <span class="token string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>jdbc.driver<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.mysql.jdbc.Driver<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>jdbc.url<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>jdbc:mysql://localhost:3306/javacode2018?characterEncoding=UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>jdbc.username<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>root<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>jdbc.password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>root123<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- ç¯å¢ƒé…ç½®ï¼Œå¯ä»¥é…ç½®å¤šä¸ªç¯å¢ƒ --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>environments</span> <span class="token attr-name">default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>chat04-demo2<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- 
            environmentç”¨æ¥å¯¹æŸä¸ªç¯å¢ƒè¿›è¡Œé…ç½®
            idï¼šç¯å¢ƒæ ‡è¯†ï¼Œå”¯ä¸€
         --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>environment</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>chat04-demo2<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token comment">&lt;!-- äº‹åŠ¡ç®¡ç†å™¨å·¥å‚é…ç½® --&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>transactionManager</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>JDBC<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
            <span class="token comment">&lt;!-- æ•°æ®æºå·¥å‚é…ç½®ï¼Œä½¿ç”¨å·¥å‚æ¥åˆ›å»ºæ•°æ®æº --&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dataSource</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>POOLED<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>driver<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${jdbc.driver}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>url<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${jdbc.url}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${jdbc.username}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${jdbc.password}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dataSource</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>environment</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>environments</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>chat03\src\test\java</code>ç›®å½•åˆ›å»ºæµ‹è¯•ç”¨ä¾‹<code>com.javacode2018.chat03.demo2.UserMapperTest</code>ï¼Œå¦‚ä¸‹ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>javacode2018<span class="token punctuation">.</span>chat03<span class="token punctuation">.</span>demo2</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span>extern<span class="token punctuation">.</span>slf4j<span class="token punctuation">.</span></span><span class="token class-name">Slf4j</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">Resources</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>session<span class="token punctuation">.</span></span><span class="token class-name">SqlSession</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>session<span class="token punctuation">.</span></span><span class="token class-name">SqlSessionFactory</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>session<span class="token punctuation">.</span></span><span class="token class-name">SqlSessionFactoryBuilder</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span></span><span class="token class-name">Before</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span></span><span class="token class-name">Test</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">InputStream</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span>
<span class="token doc-comment comment">/**
 * å…¬ä¼—å·ï¼šè·¯äººç”²Javaï¼Œå·¥ä½œ10å¹´çš„å‰é˜¿é‡ŒP7åˆ†äº«Javaã€ç®—æ³•ã€æ•°æ®åº“æ–¹é¢çš„æŠ€æœ¯å¹²è´§ï¼åšä¿¡ç”¨æŠ€æœ¯æ”¹å˜å‘½è¿ï¼Œè®©å®¶äººè¿‡ä¸Šæ›´ä½“é¢çš„ç”Ÿæ´»!
 */</span>
<span class="token annotation punctuation">@Slf4j</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserMapperTest</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">SqlSessionFactory</span> sqlSessionFactory<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@Before</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">before</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token comment">//æŒ‡å®šmybatiså…¨å±€é…ç½®æ–‡ä»¶</span>
        <span class="token class-name">String</span> resource <span class="token operator">=</span> <span class="token string">&quot;demo2/mybatis-config.xml&quot;</span><span class="token punctuation">;</span>
        <span class="token comment">//è¯»å–å…¨å±€é…ç½®æ–‡ä»¶</span>
        <span class="token class-name">InputStream</span> inputStream <span class="token operator">=</span> <span class="token class-name">Resources</span><span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span>resource<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//æ„å»ºSqlSessionFactoryå¯¹è±¡</span>
        <span class="token class-name">SqlSessionFactory</span> sqlSessionFactory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SqlSessionFactoryBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span>inputStream<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>sqlSessionFactory <span class="token operator">=</span> sqlSessionFactory<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">getUserList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">(</span><span class="token class-name">SqlSession</span> sqlSession <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>sqlSessionFactory<span class="token punctuation">.</span><span class="token function">openSession</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">UserMapper</span> mapper <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">UserMapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//æ‰§è¡ŒæŸ¥è¯¢æ“ä½œ</span>
            <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">UserModel</span><span class="token punctuation">&gt;</span></span> userModelList <span class="token operator">=</span> mapper<span class="token punctuation">.</span><span class="token function">getUserList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            userModelList<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>item <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
                log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;{}&quot;</span><span class="token punctuation">,</span> item<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ³¨æ„è¿™æ¬¡ä¸Šé¢ä½¿ç”¨çš„æ˜¯<code>demo2/mybatis-config.xml</code>é…ç½®æ–‡ä»¶ã€‚</p><p>æˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸‹é¡¹ç›®ç»“æ„ï¼Œ4ä¸ªæ–‡ä»¶ï¼š</p><img src="https://raw.githubusercontent.com/huluhutu/blogimg/main/img/image-20221011100907050.png" alt="image-20221011100907050" style="zoom:67%;"><p>æ³¨æ„ä¸€ä¸‹<code>UserMapper</code>æ¥å£æ‰€åœ¨çš„åŒ…ä¸­æœ‰ä¸ªåŒåçš„<code>UserMapper.xml</code>æ–‡ä»¶ï¼Œè¿™ä¸ªå¦‚æœæŒ‰ç…§æ–¹å¼2ä¸­æ‰€è¯´çš„ï¼Œä¼šè‡ªåŠ¨åŠ è½½ã€‚</p><p>ä¸‹é¢æˆ‘ä»¬æ¥è¿è¡Œä¸€ä¸‹<code>com.javacode2018.chat03.demo2.UserMapperTest#getUserList</code>ï¼Œè¾“å‡ºï¼š</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>org.apache.ibatis.binding.BindingException: Type interface com.javacode2018.chat03.demo2.UserMapper is not known to the MapperRegistry.
    at org.apache.ibatis.binding.MapperRegistry.getMapper(MapperRegistry.java:47)
    at org.apache.ibatis.session.Configuration.getMapper(Configuration.java:779)
    at org.apache.ibatis.session.defaults.DefaultSqlSession.getMapper(DefaultSqlSession.java:291)
    at com.javacode2018.chat03.demo2.UserMapperTest.getUserList(UserMapperTest.java:36)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:498)
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
    at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
    at org.junit.runner.JUnitCore.run(JUnitCore.java:137)
    at com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:68)
    at com.intellij.rt.execution.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:51)
    at com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:242)
    at com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:70)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä»è¾“å‡ºä¸­å¯ä»¥çœ‹åˆ°ï¼Œ<code>UserMapper</code>æ‰¾ä¸åˆ°ã€‚</p><p>æˆ‘ä»¬å»çœ‹ä¸€ä¸‹<code>demo2/mybatis-config.xml</code>è¿™ä¸ªé…ç½®æ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶ä¸­éœ€è¦ä½¿ç”¨æ–¹å¼2å¼•å…¥<code>UserMapper</code>æ¥å£ï¼Œåœ¨<code>demo2/mybatis-config.xml</code>ä¸­åŠ å…¥ä¸‹é¢é…ç½®ï¼š</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mappers</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.javacode2018.chat03.demo2.UserMapper<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mappers</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å†è¿è¡Œä¸€ä¸‹ï¼Œè¿˜æ˜¯æŠ¥é”™ï¼Œå¦‚ä¸‹ï¼Œè¿˜æ˜¯æ‰¾ä¸åˆ°å¯¹åº”çš„UserMapperï¼š</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>org.apache.ibatis.binding.BindingException: Invalid bound statement (not found): com.javacode2018.chat03.demo2.UserMapper.getUserList
    at org.apache.ibatis.binding.MapperMethod$SqlCommand.&lt;init&gt;(MapperMethod.java:235)
    at org.apache.ibatis.binding.MapperMethod.&lt;init&gt;(MapperMethod.java:53)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿˜æ˜¯æœ‰é—®é¢˜ï¼Œæˆ‘ä»¬çœ‹ä¸€ä¸‹<code>target/classes</code>ä¸­<code>demo2</code>åŒ…çš„å†…å®¹ï¼Œå¦‚ä¸‹å›¾ï¼š</p><img src="https://raw.githubusercontent.com/huluhutu/blogimg/main/img/image-20221011101039116.png" alt="image-20221011101039116" style="zoom:67%;"><p>ç¼–è¯‘ä¹‹åçš„æ–‡ä»¶ä¸­å°‘äº†<code>UserMapper.xml</code>ï¼Œè¿™ä¸ªå’Œmavenæœ‰å…³ï¼Œmavenç¼–è¯‘src/javaä»£ç çš„æ—¶å€™ï¼Œé»˜è®¤åªä¼šå¯¹javaæ–‡ä»¶è¿›è¡Œç¼–è¯‘ç„¶åæ”¾åœ¨target/classesç›®å½•ï¼Œéœ€è¦åœ¨<code>chat03/pom.xml</code>ä¸­åŠ å…¥ä¸‹é¢é…ç½®ï¼š</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>build</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resources</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resource</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>directory</span><span class="token punctuation">&gt;</span></span>${project.basedir}/src/main/java<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>directory</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>includes</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>include</span><span class="token punctuation">&gt;</span></span>**/*.xml<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>include</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>includes</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resource</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resource</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>directory</span><span class="token punctuation">&gt;</span></span>${project.basedir}/src/main/resources<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>directory</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>includes</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>include</span><span class="token punctuation">&gt;</span></span>**/*<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>include</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>includes</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resource</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resources</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>build</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æœ€ç»ˆ<code>chat03/pom.xml</code>å†…å®¹å¦‚ä¸‹ï¼š</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>parent</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mybatis-series<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.javacode2018<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.0-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>parent</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>modelVersion</span><span class="token punctuation">&gt;</span></span>4.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>modelVersion</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>chat03<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- mybatisä¾èµ– --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.mybatis<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mybatis<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- mysql é©±åŠ¨ --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>mysql<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mysql-connector-java<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- lombokæ”¯æŒ --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.projectlombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>lombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- å•å…ƒæµ‹è¯•junitæ”¯æŒ --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>junit<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>junit<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- å¼•å…¥logbackç”¨æ¥è¾“å‡ºæ—¥å¿— --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>ch.qos.logback<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>logback-classic<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>build</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resources</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resource</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>directory</span><span class="token punctuation">&gt;</span></span>${project.basedir}/src/main/java<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>directory</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>includes</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>include</span><span class="token punctuation">&gt;</span></span>**/*.xml<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>include</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>includes</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resource</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resource</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>directory</span><span class="token punctuation">&gt;</span></span>${project.basedir}/src/main/resources<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>directory</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>includes</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>include</span><span class="token punctuation">&gt;</span></span>**/*<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>include</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>includes</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resource</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resources</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>build</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åŠ äº†è¿™ä¸ªä¹‹å<code>UserMapper.xml</code>å°±ä¼šè¢«æ”¾åˆ°targetçš„classesä¸­å»äº†</p><blockquote><p>ä¸ºä»€ä¹ˆmavenä¸­éœ€è¦åŠ ä¸Šé¢é…ç½®ï¼Œè¿™å—å¤§å®¶å¯ä»¥å»çœ‹å…¬ä¼—å·ä¸­mavenç³»åˆ—çš„æ–‡ç« ï¼Œé‡Œé¢æœ‰è¯¦ç»†ä»‹ç»ï¼Œmavençš„ç›¸å…³ä¸œè¥¿ï¼Œåé¢è¿˜ä¼šç»å¸¸ç”¨åˆ°ï¼Œå¯¹è¿™å—ä¸ç†Ÿæ‚‰çš„ï¼Œå»ºè®®å°½å¿«æŠŠmavenç³»åˆ—çš„æ‰€æœ‰æ–‡ç« éƒ½çœ‹ä¸€éï¼Œä»¥å…åé¢å­¦ä¹ çš„è¿‡ç¨‹ä¸­æ‰é˜Ÿã€‚</p></blockquote><p>æˆ‘ä»¬å†æ¬¡è¿è¡Œä¸€ä¸‹æµ‹è¯•ç”¨ä¾‹<code>com.javacode2018.chat03.demo2.UserMapperTest#getUserList</code>ï¼Œæ•ˆæœå¦‚ä¸‹ï¼š</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>24:37.814 [main] DEBUG c.j.c.demo2.UserMapper.getUserList - ==&gt;  Preparing: SELECT * FROM t_user 
24:37.852 [main] DEBUG c.j.c.demo2.UserMapper.getUserList - ==&gt; Parameters: 
24:37.875 [main] DEBUG c.j.c.demo2.UserMapper.getUserList - &lt;==      Total: 4
24:37.876 [main] INFO  c.j.chat03.demo2.UserMapperTest - UserModel(id=1, name=è·¯äººç”²Java, age=30, salary=50000.0, sex=1)
24:37.879 [main] INFO  c.j.chat03.demo2.UserMapperTest - UserModel(id=2, name=javacode2018, age=30, salary=50000.0, sex=1)
24:37.879 [main] INFO  c.j.chat03.demo2.UserMapperTest - UserModel(id=3, name=å¼ å­¦å‹, age=56, salary=500000.0, sex=1)
24:37.879 [main] INFO  c.j.chat03.demo2.UserMapperTest - UserModel(id=4, name=æ—å¿—ç², age=45, salary=88888.88, sex=2)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="æ–¹å¼3-ä½¿ç”¨packageå…ƒç´ æ‰¹é‡æ³¨å†Œmapperæ¥å£" tabindex="-1"><a class="header-anchor" href="#æ–¹å¼3-ä½¿ç”¨packageå…ƒç´ æ‰¹é‡æ³¨å†Œmapperæ¥å£" aria-hidden="true">#</a> æ–¹å¼3ï¼šä½¿ç”¨packageå…ƒç´ æ‰¹é‡æ³¨å†ŒMapperæ¥å£</h3><h4 id="æ‰¹é‡æ³¨å†Œmapperæ¥å£" tabindex="-1"><a class="header-anchor" href="#æ‰¹é‡æ³¨å†Œmapperæ¥å£" aria-hidden="true">#</a> æ‰¹é‡æ³¨å†ŒMapperæ¥å£</h4><p>ä¸Šé¢è¯´2ç§æ–¹å¼éƒ½æ˜¯ä¸€ä¸ªä¸ªæ³¨å†Œmapperçš„ï¼Œå¦‚æœæˆ‘ä»¬å†™äº†å¾ˆå¤šmapperï¼Œæ˜¯å¦èƒ½å¤Ÿæ‰¹é‡æ³¨å†Œå‘¢ï¼Ÿ</p><p>mybatisæä¾›äº†æ‰«æåŒ…æ‰¹é‡æ³¨å†Œçš„æ–¹å¼ï¼Œéœ€è¦åœ¨mybatiså…¨å±€é…ç½®æ–‡ä»¶ä¸­åŠ å…¥ä¸‹é¢é…ç½®ï¼š</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mappers</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>package</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>éœ€è¦æ‰«æçš„åŒ…<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mappers</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>mybatisä¼šæ‰«æ<code>packageå…ƒç´ ä¸­nameå±æ€§æŒ‡å®šçš„åŒ…åŠå­åŒ…ä¸­çš„æ‰€æœ‰æ¥å£</code>ï¼Œå°†å…¶å½“åš<code>Mapper æ¥å£</code>è¿›è¡Œæ³¨å†Œï¼Œæ‰€ä»¥ä¸€èˆ¬æˆ‘ä»¬ä¼šåˆ›å»ºä¸€ä¸ª<code>mapper</code>åŒ…ï¼Œé‡Œé¢æ”¾<code>Mapperæ¥å£</code>å’Œ<code>åŒåçš„Mapper xmlæ–‡ä»¶</code>ã€‚</p><p>å¤§å®¶æ¥çœ‹ä¸€ä¸ªæ¡ˆä¾‹ï¼Œç†è§£ä¸€ä¸‹ã€‚</p><h4 id="æ¡ˆä¾‹-6" tabindex="-1"><a class="header-anchor" href="#æ¡ˆä¾‹-6" aria-hidden="true">#</a> æ¡ˆä¾‹</h4><p>è¿™ä¸ªæ¡ˆä¾‹ä¸­å°†å¯¹<code>t_userã€t_order</code>ä¸¤ä¸ªè¡¨è¿›è¡ŒæŸ¥è¯¢æ“ä½œï¼Œé‡‡ç”¨æ–¹å¼3ä¸­çš„packageæ‰¹é‡å¼•å…¥mapper æ¥å£å’Œxmlæ–‡ä»¶ã€‚</p><p>æ‰€æœ‰ä»£ç æ”¾åœ¨demo3åŒ…ä¸­ï¼Œå¤§å®¶å…ˆçœ‹ä¸‹æ–‡ä»¶æ‰€åœ¨çš„ç›®å½•ï¼š</p><img src="https://raw.githubusercontent.com/huluhutu/blogimg/main/img/image-20221011101520653.png" alt="image-20221011101520653" style="zoom:67%;"><p>åˆ›å»º<code>UserModel</code>ç±»ï¼Œå¦‚ä¸‹ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>javacode2018<span class="token punctuation">.</span>chat03<span class="token punctuation">.</span>demo3<span class="token punctuation">.</span>model</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token doc-comment comment">/**
 * å…¬ä¼—å·ï¼šè·¯äººç”²Javaï¼Œå·¥ä½œ10å¹´çš„å‰é˜¿é‡ŒP7åˆ†äº«Javaã€ç®—æ³•ã€æ•°æ®åº“æ–¹é¢çš„æŠ€æœ¯å¹²è´§ï¼åšä¿¡ç”¨æŠ€æœ¯æ”¹å˜å‘½è¿ï¼Œè®©å®¶äººè¿‡ä¸Šæ›´ä½“é¢çš„ç”Ÿæ´»!
 */</span>
<span class="token annotation punctuation">@Getter</span>
<span class="token annotation punctuation">@Setter</span>
<span class="token annotation punctuation">@NoArgsConstructor</span>
<span class="token annotation punctuation">@AllArgsConstructor</span>
<span class="token annotation punctuation">@Builder</span>
<span class="token annotation punctuation">@ToString</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserModel</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">Long</span> id<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> age<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Double</span> salary<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> sex<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åˆ›å»º<code>OrderModel</code>ç±»ï¼Œå¦‚ä¸‹ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>javacode2018<span class="token punctuation">.</span>chat03<span class="token punctuation">.</span>demo3<span class="token punctuation">.</span>model</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token doc-comment comment">/**
 * å…¬ä¼—å·ï¼šè·¯äººç”²Javaï¼Œå·¥ä½œ10å¹´çš„å‰é˜¿é‡ŒP7åˆ†äº«Javaã€ç®—æ³•ã€æ•°æ®åº“æ–¹é¢çš„æŠ€æœ¯å¹²è´§ï¼åšä¿¡ç”¨æŠ€æœ¯æ”¹å˜å‘½è¿ï¼Œè®©å®¶äººè¿‡ä¸Šæ›´ä½“é¢çš„ç”Ÿæ´»!
 */</span>
<span class="token annotation punctuation">@Getter</span>
<span class="token annotation punctuation">@Setter</span>
<span class="token annotation punctuation">@NoArgsConstructor</span>
<span class="token annotation punctuation">@AllArgsConstructor</span>
<span class="token annotation punctuation">@Builder</span>
<span class="token annotation punctuation">@ToString</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OrderModel</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">Long</span> id<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Long</span> user_id<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Double</span> price<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åˆ›å»º<code>UserMapper</code>æ¥å£ï¼Œå¦‚ä¸‹ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>javacode2018<span class="token punctuation">.</span>chat03<span class="token punctuation">.</span>demo3<span class="token punctuation">.</span>mapper</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>javacode2018<span class="token punctuation">.</span>chat03<span class="token punctuation">.</span>demo3<span class="token punctuation">.</span>model<span class="token punctuation">.</span></span><span class="token class-name">UserModel</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span>
<span class="token doc-comment comment">/**
 * å…¬ä¼—å·ï¼šè·¯äººç”²Javaï¼Œå·¥ä½œ10å¹´çš„å‰é˜¿é‡ŒP7åˆ†äº«Javaã€ç®—æ³•ã€æ•°æ®åº“æ–¹é¢çš„æŠ€æœ¯å¹²è´§ï¼åšä¿¡ç”¨æŠ€æœ¯æ”¹å˜å‘½è¿ï¼Œè®©å®¶äººè¿‡ä¸Šæ›´ä½“é¢çš„ç”Ÿæ´»!
 */</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">UserMapper</span> <span class="token punctuation">{</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">UserModel</span><span class="token punctuation">&gt;</span></span> <span class="token function">getList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åˆ›å»º<code>OrderMapper</code>æ¥å£ï¼Œå¦‚ä¸‹ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>javacode2018<span class="token punctuation">.</span>chat03<span class="token punctuation">.</span>demo3<span class="token punctuation">.</span>mapper</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>javacode2018<span class="token punctuation">.</span>chat03<span class="token punctuation">.</span>demo3<span class="token punctuation">.</span>model<span class="token punctuation">.</span></span><span class="token class-name">OrderModel</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>javacode2018<span class="token punctuation">.</span>chat03<span class="token punctuation">.</span>demo3<span class="token punctuation">.</span>model<span class="token punctuation">.</span></span><span class="token class-name">UserModel</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span>
<span class="token doc-comment comment">/**
 * å…¬ä¼—å·ï¼šè·¯äººç”²Javaï¼Œå·¥ä½œ10å¹´çš„å‰é˜¿é‡ŒP7åˆ†äº«Javaã€ç®—æ³•ã€æ•°æ®åº“æ–¹é¢çš„æŠ€æœ¯å¹²è´§ï¼åšä¿¡ç”¨æŠ€æœ¯æ”¹å˜å‘½è¿ï¼Œè®©å®¶äººè¿‡ä¸Šæ›´ä½“é¢çš„ç”Ÿæ´»!
 */</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">OrderMapper</span> <span class="token punctuation">{</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">OrderModel</span><span class="token punctuation">&gt;</span></span> <span class="token function">getList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åˆ›å»º<code>UserMapper.xml</code>ï¼Œå¦‚ä¸‹ï¼š</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
<span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">mapper</span> <span class="token name">PUBLIC</span> <span class="token string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span>
        <span class="token string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">namespace</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.javacode2018.chat03.demo3.mapper.OrderMapper<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- selectç”¨æ¥å®šä¹‰ä¸€ä¸ªæŸ¥è¯¢æ“ä½œ
         idï¼šæ“ä½œçš„å…·ä½“æ ‡è¯†
         resultTypeï¼šæŒ‡å®šæŸ¥è¯¢ç»“æœä¿å­˜çš„ç±»å‹
     --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>getList<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.javacode2018.chat03.demo3.model.OrderModel<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token cdata">&lt;![CDATA[
        SELECT * FROM t_order
        ]]&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mapper</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åˆ›å»º<code>OrderMapper.xml</code>ï¼Œå¦‚ä¸‹ï¼š</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
<span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">mapper</span> <span class="token name">PUBLIC</span> <span class="token string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span>
        <span class="token string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">namespace</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.javacode2018.chat03.demo3.mapper.OrderMapper<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- selectç”¨æ¥å®šä¹‰ä¸€ä¸ªæŸ¥è¯¢æ“ä½œ
         idï¼šæ“ä½œçš„å…·ä½“æ ‡è¯†
         resultTypeï¼šæŒ‡å®šæŸ¥è¯¢ç»“æœä¿å­˜çš„ç±»å‹
     --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>getList<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.javacode2018.chat03.demo3.model.OrderModel<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token cdata">&lt;![CDATA[
        SELECT * FROM t_order
        ]]&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mapper</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åˆ›å»º<code>resources/demo3/mybatis-config.xml</code>é…ç½®æ–‡ä»¶ï¼Œå¦‚ä¸‹ï¼š</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
<span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">configuration</span>
        <span class="token name">PUBLIC</span> <span class="token string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span>
        <span class="token string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>jdbc.driver<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.mysql.jdbc.Driver<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>jdbc.url<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>jdbc:mysql://localhost:3306/javacode2018?characterEncoding=UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>jdbc.username<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>root<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>jdbc.password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>root123<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- ç¯å¢ƒé…ç½®ï¼Œå¯ä»¥é…ç½®å¤šä¸ªç¯å¢ƒ --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>environments</span> <span class="token attr-name">default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>chat04-demo3<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- 
            environmentç”¨æ¥å¯¹æŸä¸ªç¯å¢ƒè¿›è¡Œé…ç½®
            idï¼šç¯å¢ƒæ ‡è¯†ï¼Œå”¯ä¸€
         --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>environment</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>chat04-demo3<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token comment">&lt;!-- äº‹åŠ¡ç®¡ç†å™¨å·¥å‚é…ç½® --&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>transactionManager</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>JDBC<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
            <span class="token comment">&lt;!-- æ•°æ®æºå·¥å‚é…ç½®ï¼Œä½¿ç”¨å·¥å‚æ¥åˆ›å»ºæ•°æ®æº --&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dataSource</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>POOLED<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>driver<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${jdbc.driver}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>url<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${jdbc.url}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${jdbc.username}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${jdbc.password}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dataSource</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>environment</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>environments</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mappers</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>package</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.javacode2018.chat03.demo3.mapper<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mappers</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>æ³¨æ„è¿™æ¬¡æˆ‘ä»¬ä½¿ç”¨<code>package</code>æ¥è®©mybatisåŠ è½½<code>com.javacode2018.chat03.demo3.mapper</code>åŒ…ä¸‹é¢æ‰€æœ‰çš„Mapperæ¥å£å’ŒMapper xmlæ–‡ä»¶ã€‚</p></blockquote><p>åˆ›å»ºæµ‹è¯•ç”¨ä¾‹<code>Demo3Test</code>ï¼Œå¦‚ä¸‹ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>javacode2018<span class="token punctuation">.</span>chat03<span class="token punctuation">.</span>demo3</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>javacode2018<span class="token punctuation">.</span>chat03<span class="token punctuation">.</span>demo3<span class="token punctuation">.</span>mapper<span class="token punctuation">.</span></span><span class="token class-name">OrderMapper</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>javacode2018<span class="token punctuation">.</span>chat03<span class="token punctuation">.</span>demo3<span class="token punctuation">.</span>mapper<span class="token punctuation">.</span></span><span class="token class-name">UserMapper</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>javacode2018<span class="token punctuation">.</span>chat03<span class="token punctuation">.</span>demo3<span class="token punctuation">.</span>model<span class="token punctuation">.</span></span><span class="token class-name">OrderModel</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>javacode2018<span class="token punctuation">.</span>chat03<span class="token punctuation">.</span>demo3<span class="token punctuation">.</span>model<span class="token punctuation">.</span></span><span class="token class-name">UserModel</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span>extern<span class="token punctuation">.</span>slf4j<span class="token punctuation">.</span></span><span class="token class-name">Slf4j</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">Resources</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>session<span class="token punctuation">.</span></span><span class="token class-name">SqlSession</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>session<span class="token punctuation">.</span></span><span class="token class-name">SqlSessionFactory</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>session<span class="token punctuation">.</span></span><span class="token class-name">SqlSessionFactoryBuilder</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span></span><span class="token class-name">Before</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span></span><span class="token class-name">Test</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">InputStream</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span>
<span class="token doc-comment comment">/**
 * å…¬ä¼—å·ï¼šè·¯äººç”²Javaï¼Œå·¥ä½œ10å¹´çš„å‰é˜¿é‡ŒP7åˆ†äº«Javaã€ç®—æ³•ã€æ•°æ®åº“æ–¹é¢çš„æŠ€æœ¯å¹²è´§ï¼åšä¿¡ç”¨æŠ€æœ¯æ”¹å˜å‘½è¿ï¼Œè®©å®¶äººè¿‡ä¸Šæ›´ä½“é¢çš„ç”Ÿæ´»!
 */</span>
<span class="token annotation punctuation">@Slf4j</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Demo3Test</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">SqlSessionFactory</span> sqlSessionFactory<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@Before</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">before</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token comment">//æŒ‡å®šmybatiså…¨å±€é…ç½®æ–‡ä»¶</span>
        <span class="token class-name">String</span> resource <span class="token operator">=</span> <span class="token string">&quot;demo3/mybatis-config.xml&quot;</span><span class="token punctuation">;</span>
        <span class="token comment">//è¯»å–å…¨å±€é…ç½®æ–‡ä»¶</span>
        <span class="token class-name">InputStream</span> inputStream <span class="token operator">=</span> <span class="token class-name">Resources</span><span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span>resource<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//æ„å»ºSqlSessionFactoryå¯¹è±¡</span>
        <span class="token class-name">SqlSessionFactory</span> sqlSessionFactory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SqlSessionFactoryBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span>inputStream<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>sqlSessionFactory <span class="token operator">=</span> sqlSessionFactory<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">(</span><span class="token class-name">SqlSession</span> sqlSession <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>sqlSessionFactory<span class="token punctuation">.</span><span class="token function">openSession</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">UserMapper</span> userMapper <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">UserMapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//æ‰§è¡ŒæŸ¥è¯¢æ“ä½œ</span>
            <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">UserModel</span><span class="token punctuation">&gt;</span></span> userModelList <span class="token operator">=</span> userMapper<span class="token punctuation">.</span><span class="token function">getList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            userModelList<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>item <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
                log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;{}&quot;</span><span class="token punctuation">,</span> item<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;----------------------------------&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">OrderMapper</span> orderMapper <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">OrderMapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//æ‰§è¡ŒæŸ¥è¯¢æ“ä½œ</span>
            <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">OrderModel</span><span class="token punctuation">&gt;</span></span> orderModelList <span class="token operator">=</span> orderMapper<span class="token punctuation">.</span><span class="token function">getList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            orderModelList<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>item <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
                log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;{}&quot;</span><span class="token punctuation">,</span> item<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿è¡Œ<code>com.javacode2018.chat03.demo3.Demo3Test#test</code>ï¼Œè¾“å‡ºå¦‚ä¸‹ï¼š</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>48:39.280 [main] DEBUG c.j.c.d.mapper.UserMapper.getList - ==&gt;  Preparing: SELECT * FROM t_user 
48:39.315 [main] DEBUG c.j.c.d.mapper.UserMapper.getList - ==&gt; Parameters: 
48:39.339 [main] DEBUG c.j.c.d.mapper.UserMapper.getList - &lt;==      Total: 4
48:39.340 [main] INFO  c.j.chat03.demo3.Demo3Test - UserModel(id=1, name=è·¯äººç”²Java, age=30, salary=50000.0, sex=1)
48:39.343 [main] INFO  c.j.chat03.demo3.Demo3Test - UserModel(id=2, name=javacode2018, age=30, salary=50000.0, sex=1)
48:39.343 [main] INFO  c.j.chat03.demo3.Demo3Test - UserModel(id=3, name=å¼ å­¦å‹, age=56, salary=500000.0, sex=1)
48:39.343 [main] INFO  c.j.chat03.demo3.Demo3Test - UserModel(id=4, name=æ—å¿—ç², age=45, salary=88888.88, sex=2)
48:39.343 [main] INFO  c.j.chat03.demo3.Demo3Test - ----------------------------------
48:39.344 [main] DEBUG c.j.c.d.mapper.OrderMapper.getList - ==&gt;  Preparing: SELECT * FROM t_order 
48:39.345 [main] DEBUG c.j.c.d.mapper.OrderMapper.getList - ==&gt; Parameters: 
48:39.351 [main] DEBUG c.j.c.d.mapper.OrderMapper.getList - &lt;==      Total: 2
48:39.351 [main] INFO  c.j.chat03.demo3.Demo3Test - OrderModel(id=1, user_id=1, price=88.88)
48:39.351 [main] INFO  c.j.chat03.demo3.Demo3Test - OrderModel(id=2, user_id=2, price=666.66)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™ç§æ‰¹é‡çš„æ–¹å¼æ˜¯ä¸æ˜¯ç”¨ç€æŒºçˆ½çš„ï¼Œä¸è¿‡æœ‰ç‚¹ä¸æ˜¯å¤ªå¥½ï¼Œmapper xmlå’Œmapperæ¥å£æ”¾åœ¨äº†ä¸€ä¸ªç›®å½•ä¸­ï¼Œç›®å½•ä¸­æ—¢æœ‰javaä»£ç åˆæœ‰xmlæ–‡ä»¶ï¼Œçœ‹èµ·æ¥ä¹ŸæŒºåˆ«æ‰­çš„ï¼Œå…¶å®ä½ ä»¬å¯ä»¥è¿™æ ·ï¼š</p><p>ä¸€èˆ¬æˆ‘ä»¬å°†é…ç½®æ–‡ä»¶æ”¾åœ¨<code>resource</code>ç›®å½•ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨<code>resource</code>ç›®å½•ä¸­åˆ›å»ºä¸‹é¢å­ç›®å½•ï¼š</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>com/javacode2018/chat03/demo3/mapper
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ç„¶åå°†<code>com.javacode2018.chat03.demo3.mapper</code>ä¸­çš„2ä¸ªxmlæ–‡ä»¶ç§»åˆ°ä¸Šé¢æ–°åˆ›å»ºçš„ç›®å½•ä¸­å»ï¼Œå¦‚ä¸‹å›¾ï¼š</p><img src="https://raw.githubusercontent.com/huluhutu/blogimg/main/img/image-20221011101832379.png" alt="image-20221011101832379" style="zoom:67%;"><p>åœ¨å»è¿è¡Œä¸€ä¸‹<code>com.javacode2018.chat03.demo3.Demo3Test#test</code>ï¼Œè¾“å‡ºå¦‚ä¸‹ï¼š</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>56:22.669 [main] DEBUG c.j.c.d.mapper.UserMapper.getList - ==&gt;  Preparing: SELECT * FROM t_user 
56:22.700 [main] DEBUG c.j.c.d.mapper.UserMapper.getList - ==&gt; Parameters: 
56:22.721 [main] DEBUG c.j.c.d.mapper.UserMapper.getList - &lt;==      Total: 4
56:22.722 [main] INFO  c.j.chat03.demo3.Demo3Test - UserModel(id=1, name=è·¯äººç”²Java, age=30, salary=50000.0, sex=1)
56:22.725 [main] INFO  c.j.chat03.demo3.Demo3Test - UserModel(id=2, name=javacode2018, age=30, salary=50000.0, sex=1)
56:22.725 [main] INFO  c.j.chat03.demo3.Demo3Test - UserModel(id=3, name=å¼ å­¦å‹, age=56, salary=500000.0, sex=1)
56:22.725 [main] INFO  c.j.chat03.demo3.Demo3Test - UserModel(id=4, name=æ—å¿—ç², age=45, salary=88888.88, sex=2)
56:22.725 [main] INFO  c.j.chat03.demo3.Demo3Test - ----------------------------------
56:22.727 [main] DEBUG c.j.c.d.mapper.OrderMapper.getList - ==&gt;  Preparing: SELECT * FROM t_order 
56:22.727 [main] DEBUG c.j.c.d.mapper.OrderMapper.getList - ==&gt; Parameters: 
56:22.732 [main] DEBUG c.j.c.d.mapper.OrderMapper.getList - &lt;==      Total: 2
56:22.732 [main] INFO  c.j.chat03.demo3.Demo3Test - OrderModel(id=1, user_id=1, price=88.88)
56:22.732 [main] INFO  c.j.chat03.demo3.Demo3Test - OrderModel(id=2, user_id=2, price=666.66)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>æ–¹å¼3ä¼šæ‰«ææŒ‡å®šåŒ…ä¸­æ‰€æœ‰çš„æ¥å£ï¼ŒæŠŠè¿™äº›æ¥å£ä½œä¸ºMapperæ¥å£è¿›è¡Œæ³¨å†Œï¼Œæ‰«æåˆ°çš„ç±»å‹åªè¦æ˜¯æ¥å£å°±ä¼šè¢«æ³¨å†Œï¼Œæ‰€ä»¥æŒ‡å®šçš„åŒ…ä¸­é€šå¸¸æˆ‘ä»¬åªæ”¾Mapperæ¥å£ï¼Œé¿å…å­˜æ”¾ä¸€äº›ä¸ç›¸å¹²çš„ç±»æˆ–è€…æ¥å£ã€‚</strong></p></div><!----><footer class="page-meta"><div class="meta-item edit-link"><a href="https://github.com/vuepress-theme-hope/vuepress-theme-hope/edit/main/docs/pages/DB/MyBatis/2-MyBatisä½¿ç”¨è¯¦è§£.md" rel="noopener noreferrer" target="_blank" aria-label="åœ¨ GitHub ä¸Šç¼–è¾‘æ­¤é¡µ" class="nav-link label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->åœ¨ GitHub ä¸Šç¼–è¾‘æ­¤é¡µ<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><!----><!----></footer><!----><div class="giscus-wrapper input-top" style="display:block;"><div style="text-align:center">Loading...</div></div><!----><!--]--></main><!--]--><footer class="footer-wrapper"><div class="footer">é»˜è®¤é¡µè„š</div><div class="copyright">Copyright Â© 2022 huluhutu</div></footer><!--]--></div><!--]--><!----><!----><!--]--></div>
    <script type="module" src="/huluhutublog/assets/app.0662e65c.js" defer></script>
  </body>
</html>
