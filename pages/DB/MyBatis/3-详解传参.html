<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.51" />
    <meta name="theme" content="VuePress Theme Hope" />
    <meta property="og:url" content="https://mister-hope.github.io/huluhutublog/pages/DB/MyBatis/3-%E8%AF%A6%E8%A7%A3%E4%BC%A0%E5%8F%82.html"><meta property="og:site_name" content="huluhutublog"><meta property="og:title" content="ä¼ å‚è¯¦è§£"><meta property="og:type" content="article"><meta property="og:locale" content="zh-CN"><link rel="icon" href="/huluhutublog/favicon.ico"><link rel="icon" href="/huluhutublog/assets/icon/chrome-mask-512.png" type="image/png" sizes="512x512"><link rel="icon" href="/huluhutublog/assets/icon/chrome-mask-192.png" type="image/png" sizes="192x192"><link rel="icon" href="/huluhutublog/assets/icon/chrome-512.png" type="image/png" sizes="512x512"><link rel="icon" href="/huluhutublog/assets/icon/chrome-192.png" type="image/png" sizes="192x192"><link rel="manifest" href="/huluhutublog/manifest.webmanifest" crossorigin="use-credentials"><meta name="theme-color" content="#46bd87"><link rel="apple-touch-icon" href="/huluhutublog/assets/icon/apple-icon-152.png"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="msapplication-TileImage" content="/huluhutublog/assets/icon/ms-icon-144.png"><meta name="msapplication-TileColor" content="#ffffff"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover"><title>ä¼ å‚è¯¦è§£ | huluhutublog</title><meta name="description" content="That is my Blog!!!">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d2025;
      }

      html,
      body {
        background-color: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.querySelector("html").setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="stylesheet" href="/huluhutublog/assets/style.dc69c01e.css">
    <link rel="modulepreload" href="/huluhutublog/assets/app.0662e65c.js"><link rel="modulepreload" href="/huluhutublog/assets/3-è¯¦è§£ä¼ å‚.html.1ea232a5.js"><link rel="modulepreload" href="/huluhutublog/assets/_plugin-vue_export-helper.cdc0426e.js"><link rel="modulepreload" href="/huluhutublog/assets/3-è¯¦è§£ä¼ å‚.html.78cc1ff3.js">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="skip-link sr-only">Skip to content</a><!--]--><div class="theme-container has-toc"><!--[--><!--[--><header class="navbar"><div class="navbar-left"><button class="toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!----><a href="/huluhutublog/" class="brand"><img class="logo" src="/huluhutublog/logo.svg" alt="huluhutublog"><!----><span class="site-name hide-in-pad">huluhutublog</span></a><!----></div><div class="navbar-center"><!----><nav class="nav-links"><div class="nav-item hide-in-mobile"><a href="/huluhutublog/" class="nav-link" aria-label="HULUHUTU"><span class="icon iconfont icon-home"></span>HULUHUTU<!----></a></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="é¢è¯•"><span class="title"><span class="icon iconfont icon-note"></span>é¢è¯•</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/huluhutublog/pages/Interviews/Java/" class="nav-link" aria-label="Java"><!---->Java<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="è®¡ç®—æœºåŸºç¡€"><span class="title"><span class="icon iconfont icon-note"></span>è®¡ç®—æœºåŸºç¡€</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/huluhutublog/pages/FundamentalsOfComputerScience/DataStructuresAndAlgorithms/" class="nav-link" aria-label="æ•°æ®ç»“æ„ä¸ç®—æ³•"><!---->æ•°æ®ç»“æ„ä¸ç®—æ³•<!----></a></li><li class="dropdown-item"><a href="/huluhutublog/pages/FundamentalsOfComputerScience/ComputerNetwork/" class="nav-link" aria-label="è®¡ç®—æœºç½‘ç»œ"><!---->è®¡ç®—æœºç½‘ç»œ<!----></a></li><li class="dropdown-item"><a href="/huluhutublog/pages/FundamentalsOfComputerScience/OperatingSystem/" class="nav-link" aria-label="æ“ä½œç³»ç»Ÿ"><!---->æ“ä½œç³»ç»Ÿ<!----></a></li><li class="dropdown-item"><a href="/huluhutublog/pages/FundamentalsOfComputerScience/PrinciplesOfComputerOrganization/" class="nav-link" aria-label="è®¡ç®—æœºç»„æˆåŸç†"><!---->è®¡ç®—æœºç»„æˆåŸç†<!----></a></li><li class="dropdown-item"><a href="/huluhutublog/pages/FundamentalsOfComputerScience/PrinciplesOfDatabase/" class="nav-link" aria-label="æ•°æ®åº“åŸç†"><!---->æ•°æ®åº“åŸç†<!----></a></li><li class="dropdown-item"><a href="/huluhutublog/pages/FundamentalsOfComputerScience/DesignPatterns/" class="nav-link" aria-label="è®¾è®¡æ¨¡å¼"><!---->è®¾è®¡æ¨¡å¼<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="Java"><span class="title"><span class="icon iconfont icon-note"></span>Java</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/huluhutublog/pages/Java/JavaBase/" class="nav-link" aria-label="JavaåŸºç¡€"><!---->JavaåŸºç¡€<!----></a></li><li class="dropdown-item"><a href="/huluhutublog/pages/Java/JavaIO/" class="nav-link" aria-label="JavaIO"><!---->JavaIO<!----></a></li><li class="dropdown-item"><a href="/huluhutublog/pages/Java/JavaCollection/" class="nav-link" aria-label="Javaé›†åˆ"><!---->Javaé›†åˆ<!----></a></li><li class="dropdown-item"><a href="/huluhutublog/pages/Java/JavaConcurrent/" class="nav-link" aria-label="Javaå¹¶å‘ç¼–ç¨‹"><!---->Javaå¹¶å‘ç¼–ç¨‹<!----></a></li><li class="dropdown-item"><a href="/huluhutublog/pages/Java/JVM/JVM.html" class="nav-link" aria-label="JVM"><!---->JVM<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="æ•°æ®åº“"><span class="title"><span class="icon iconfont icon-note"></span>æ•°æ®åº“</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/huluhutublog/pages/DB/MySQL/" class="nav-link" aria-label="MySQL"><!---->MySQL<!----></a></li><li class="dropdown-item"><a href="/huluhutublog/pages/DB/Redis/" class="nav-link" aria-label="Redis"><!---->Redis<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="Spring"><span class="title"><span class="icon iconfont icon-note"></span>Spring</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/huluhutublog/pages/Spring/Spring/" class="nav-link" aria-label="Spring"><!---->Spring<!----></a></li><li class="dropdown-item"><a href="/huluhutublog/pages/Spring/SpringMVC/" class="nav-link" aria-label="SpringMVC"><!---->SpringMVC<!----></a></li><li class="dropdown-item"><a href="/huluhutublog/pages/Spring/SpringBoot/" class="nav-link" aria-label="SpringBoot"><!---->SpringBoot<!----></a></li><li class="dropdown-item"><a href="/huluhutublog/pages/Spring/SpringCloud/" class="nav-link" aria-label="SpringCloud"><!---->SpringCloud<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="æ¶ˆæ¯é˜Ÿåˆ—"><span class="title"><span class="icon iconfont icon-note"></span>æ¶ˆæ¯é˜Ÿåˆ—</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/huluhutublog/pages/MQ/RabbitMQ/" class="nav-link" aria-label="RabbitMQ"><!---->RabbitMQ<!----></a></li><li class="dropdown-item"><a href="/huluhutublog/pages/MQ/RocketMQ/" class="nav-link" aria-label="RocketMQ"><!---->RocketMQ<!----></a></li><li class="dropdown-item"><a href="/huluhutublog/pages/MQ/Kafka/" class="nav-link" aria-label="Kafka"><!---->Kafka<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="åˆ†å¸ƒå¼"><span class="title"><span class="icon iconfont icon-note"></span>åˆ†å¸ƒå¼</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/huluhutublog/pages/Distributed/Artritecture/" class="nav-link" aria-label="æ¶æ„"><!---->æ¶æ„<!----></a></li><li class="dropdown-item"><a href="/huluhutublog/pages/Distributed/Distributed/" class="nav-link" aria-label="åˆ†å¸ƒå¼ç†è®º"><!---->åˆ†å¸ƒå¼ç†è®º<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="å¼€å‘å·¥å…·"><span class="title"><span class="icon iconfont icon-note"></span>å¼€å‘å·¥å…·</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/huluhutublog/pages/DevelopmentTools/Git/" class="nav-link" aria-label="Git"><!---->Git<!----></a></li><li class="dropdown-item"><a href="/huluhutublog/pages/DevelopmentTools/Linux/" class="nav-link" aria-label="Linux"><!---->Linux<!----></a></li><li class="dropdown-item"><a href="/huluhutublog/pages/DevelopmentTools/Docker/" class="nav-link" aria-label="Docker"><!---->Docker<!----></a></li><li class="dropdown-item"><a href="/huluhutublog/pages/DevelopmentTools/Maven/" class="nav-link" aria-label="Maven"><!---->Maven<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="é¡¹ç›®"><span class="title"><span class="icon iconfont icon-note"></span>é¡¹ç›®</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/huluhutublog/pages/Project/SwiftHome/" class="nav-link" aria-label="å¿«æ·åˆ°å®¶"><!---->å¿«æ·åˆ°å®¶<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="éƒ¨ç½²"><span class="title"><span class="icon iconfont icon-note"></span>éƒ¨ç½²</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/huluhutublog/pages/Deploy/Blog/" class="nav-link" aria-label="vuepress"><!---->vuepress<!----></a></li></ul></button></div></div></nav><!----></div><div class="navbar-right"><!----><!----><div class="nav-item"><a class="repo-link" href="https://github.com/vuepress-theme-hope/vuepress-theme-hope" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="nav-item hide-in-mobile"><button class="outlook-button" tabindex="-1" ariahidden="true"><svg xmlns="http://www.w3.org/2000/svg" class="icon outlook-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="outlook icon"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4 38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32 51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0 102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2 6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4 0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2 9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224 419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4 470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0 22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6 12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128 505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2 16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8 86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4 80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6 6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg><div class="outlook-dropdown"><!----></div></button></div><!----><!----><button class="toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span class="button-container"><span class="button-top"></span><span class="button-middle"></span><span class="button-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow left"></span></div><aside class="sidebar"><!--[--><!----><!--]--><ul class="sidebar-links"><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-note"></span><span class="title">MySQL</span><span class="arrow right"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-note"></span><span class="title">Redis</span><span class="arrow right"></span></button><!----></section></li></ul><!--[--><!----><!--]--></aside><!--[--><main class="page" id="main-content"><!--[--><!----><nav class="breadcrumb disable"></nav><div class="page-title"><h1><!---->ä¼ å‚è¯¦è§£</h1><div class="page-info"><span class="author-info" aria-label="ä½œè€…ğŸ–Š" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="author-item" href="https://mrhope.site" target="_blank" rel="noopener noreferrer">huluhutu</a></span><span property="author" content="huluhutu"></span></span><!----><!----><!----><!----><span class="reading-time-info" aria-label="é˜…è¯»æ—¶é—´âŒ›" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>å¤§çº¦ 17 åˆ†é’Ÿ</span><meta property="timeRequired" content="PT17M"></span></div><hr></div><div class="toc-place-holder"><aside id="toc"><div class="toc-header">æ­¤é¡µå†…å®¹</div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/huluhutublog/pages/DB/MyBatis/3-%E8%AF%A6%E8%A7%A3%E4%BC%A0%E5%8F%82.html#_1-ä¼ é€’ä¸€ä¸ªå‚æ•°" class="router-link-active router-link-exact-active toc-link level2">1-ä¼ é€’ä¸€ä¸ªå‚æ•°</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/huluhutublog/pages/DB/MyBatis/3-%E8%AF%A6%E8%A7%A3%E4%BC%A0%E5%8F%82.html#_1-ç”¨æ³•" class="router-link-active router-link-exact-active toc-link level3">1.ç”¨æ³•</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/huluhutublog/pages/DB/MyBatis/3-%E8%AF%A6%E8%A7%A3%E4%BC%A0%E5%8F%82.html#_2-æ¡ˆä¾‹" class="router-link-active router-link-exact-active toc-link level3">2.æ¡ˆä¾‹</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/huluhutublog/pages/DB/MyBatis/3-%E8%AF%A6%E8%A7%A3%E4%BC%A0%E5%8F%82.html#_2-ä¼ é€’ä¸€ä¸ªmapå‚æ•°" class="router-link-active router-link-exact-active toc-link level2">2-ä¼ é€’ä¸€ä¸ªMapå‚æ•°</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/huluhutublog/pages/DB/MyBatis/3-%E8%AF%A6%E8%A7%A3%E4%BC%A0%E5%8F%82.html#_1-ç”¨æ³•-1" class="router-link-active router-link-exact-active toc-link level3">1.ç”¨æ³•</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/huluhutublog/pages/DB/MyBatis/3-%E8%AF%A6%E8%A7%A3%E4%BC%A0%E5%8F%82.html#_2-æ¡ˆä¾‹-1" class="router-link-active router-link-exact-active toc-link level3">2.æ¡ˆä¾‹</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/huluhutublog/pages/DB/MyBatis/3-%E8%AF%A6%E8%A7%A3%E4%BC%A0%E5%8F%82.html#_3-ä¼ é€’ä¸€ä¸ªjavaå¯¹è±¡" class="router-link-active router-link-exact-active toc-link level2">3-ä¼ é€’ä¸€ä¸ªJavaå¯¹è±¡</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/huluhutublog/pages/DB/MyBatis/3-%E8%AF%A6%E8%A7%A3%E4%BC%A0%E5%8F%82.html#_4-ä¼ é€’å¤šä¸ªå‚æ•°" class="router-link-active router-link-exact-active toc-link level2">4-ä¼ é€’å¤šä¸ªå‚æ•°</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/huluhutublog/pages/DB/MyBatis/3-%E8%AF%A6%E8%A7%A3%E4%BC%A0%E5%8F%82.html#_1-ç”¨æ³•-2" class="router-link-active router-link-exact-active toc-link level3">1.ç”¨æ³•</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/huluhutublog/pages/DB/MyBatis/3-%E8%AF%A6%E8%A7%A3%E4%BC%A0%E5%8F%82.html#_2-å¤šå‚æ•°mybatisçš„å¤„ç†" class="router-link-active router-link-exact-active toc-link level3">2.å¤šå‚æ•°mybatisçš„å¤„ç†</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/huluhutublog/pages/DB/MyBatis/3-%E8%AF%A6%E8%A7%A3%E4%BC%A0%E5%8F%82.html#_5-å¤šå‚æ•°ä¸­ç”¨-paramæŒ‡å®šå‚æ•°å" class="router-link-active router-link-exact-active toc-link level2">5-å¤šå‚æ•°ä¸­ç”¨@paramæŒ‡å®šå‚æ•°å</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/huluhutublog/pages/DB/MyBatis/3-%E8%AF%A6%E8%A7%A3%E4%BC%A0%E5%8F%82.html#_6-mybatiså‚æ•°å¤„ç†" class="router-link-active router-link-exact-active toc-link level2">6-mybatiså‚æ•°å¤„ç†</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/huluhutublog/pages/DB/MyBatis/3-%E8%AF%A6%E8%A7%A3%E4%BC%A0%E5%8F%82.html#_7-ä¼ é€’ä¸€ä¸ªcollectionå‚æ•°" class="router-link-active router-link-exact-active toc-link level2">7-ä¼ é€’ä¸€ä¸ªCollectionå‚æ•°</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/huluhutublog/pages/DB/MyBatis/3-%E8%AF%A6%E8%A7%A3%E4%BC%A0%E5%8F%82.html#_8-mybatisç»“åˆå‚æ•°å¤„ç†" class="router-link-active router-link-exact-active toc-link level2">8-Mybatisç»“åˆå‚æ•°å¤„ç†</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/huluhutublog/pages/DB/MyBatis/3-%E8%AF%A6%E8%A7%A3%E4%BC%A0%E5%8F%82.html#_9-ä¼ é€’ä¸€ä¸ªæ•°ç»„å‚æ•°" class="router-link-active router-link-exact-active toc-link level2">9-ä¼ é€’ä¸€ä¸ªæ•°ç»„å‚æ•°</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/huluhutublog/pages/DB/MyBatis/3-%E8%AF%A6%E8%A7%A3%E4%BC%A0%E5%8F%82.html#_10-rusulthandleä½œä¸ºå‚æ•°" class="router-link-active router-link-exact-active toc-link level2">10-rusultHandleä½œä¸ºå‚æ•°</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/huluhutublog/pages/DB/MyBatis/3-%E8%AF%A6%E8%A7%A3%E4%BC%A0%E5%8F%82.html#ç”¨æ³•" class="router-link-active router-link-exact-active toc-link level3">ç”¨æ³•</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/huluhutublog/pages/DB/MyBatis/3-%E8%AF%A6%E8%A7%A3%E4%BC%A0%E5%8F%82.html#æ¡ˆä¾‹" class="router-link-active router-link-exact-active toc-link level3">æ¡ˆä¾‹</a></li><!----><!--]--></ul><!--]--></ul></div></aside></div><!----><div class="theme-hope-content"><h1 id="ä¼ å‚è¯¦è§£" tabindex="-1"><a class="header-anchor" href="#ä¼ å‚è¯¦è§£" aria-hidden="true">#</a> ä¼ å‚è¯¦è§£</h1><h2 id="_1-ä¼ é€’ä¸€ä¸ªå‚æ•°" tabindex="-1"><a class="header-anchor" href="#_1-ä¼ é€’ä¸€ä¸ªå‚æ•°" aria-hidden="true">#</a> 1-ä¼ é€’ä¸€ä¸ªå‚æ•°</h2><h3 id="_1-ç”¨æ³•" tabindex="-1"><a class="header-anchor" href="#_1-ç”¨æ³•" aria-hidden="true">#</a> 1.ç”¨æ³•</h3><p>Mapperæ¥å£æ–¹æ³•ä¸­åªæœ‰ä¸€ä¸ªå‚æ•°ï¼Œå¦‚ï¼š</p><div class="language-Java ext-Java line-numbers-mode"><pre class="language-Java"><code>UserModel getByName(String name);
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Mapper xmlå¼•ç”¨è¿™ä¸ªnameå‚æ•°ï¼š</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code>#{ä»»æ„åˆæ³•åç§°}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>å¦‚ï¼š<code>#{name}ã€#{val}ã€${x}ç­‰ç­‰å†™æ³•éƒ½å¯ä»¥å¼•ç”¨ä¸Šé¢nameå‚æ•°çš„å€¼</code>ã€‚</p><h3 id="_2-æ¡ˆä¾‹" tabindex="-1"><a class="header-anchor" href="#_2-æ¡ˆä¾‹" aria-hidden="true">#</a> 2.æ¡ˆä¾‹</h3><p>åˆ›å»º<code>UserModel</code>ç±»ï¼Œå¦‚ä¸‹ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>javacode2018<span class="token punctuation">.</span>chat03<span class="token punctuation">.</span>demo4<span class="token punctuation">.</span>model</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token doc-comment comment">/**
 * å…¬ä¼—å·ï¼šè·¯äººç”²Javaï¼Œå·¥ä½œ10å¹´çš„å‰é˜¿é‡ŒP7åˆ†äº«Javaã€ç®—æ³•ã€æ•°æ®åº“æ–¹é¢çš„æŠ€æœ¯å¹²è´§ï¼åšä¿¡ç”¨æŠ€æœ¯æ”¹å˜å‘½è¿ï¼Œè®©å®¶äººè¿‡ä¸Šæ›´ä½“é¢çš„ç”Ÿæ´»!
 */</span>
<span class="token annotation punctuation">@Getter</span>
<span class="token annotation punctuation">@Setter</span>
<span class="token annotation punctuation">@NoArgsConstructor</span>
<span class="token annotation punctuation">@AllArgsConstructor</span>
<span class="token annotation punctuation">@Builder</span>
<span class="token annotation punctuation">@ToString</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserModel</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">Long</span> id<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> age<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Double</span> salary<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> sex<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åˆ›å»ºMapperæ¥å£<code>UserMapper</code>ï¼Œå¦‚ä¸‹ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>javacode2018<span class="token punctuation">.</span>chat03<span class="token punctuation">.</span>demo4<span class="token punctuation">.</span>mapper</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>javacode2018<span class="token punctuation">.</span>chat03<span class="token punctuation">.</span>demo4<span class="token punctuation">.</span>model<span class="token punctuation">.</span></span><span class="token class-name">UserModel</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Map</span></span><span class="token punctuation">;</span>
<span class="token doc-comment comment">/**
 * å…¬ä¼—å·ï¼šè·¯äººç”²Javaï¼Œå·¥ä½œ10å¹´çš„å‰é˜¿é‡ŒP7åˆ†äº«Javaã€ç®—æ³•ã€æ•°æ®åº“æ–¹é¢çš„æŠ€æœ¯å¹²è´§ï¼åšä¿¡ç”¨æŠ€æœ¯æ”¹å˜å‘½è¿ï¼Œè®©å®¶äººè¿‡ä¸Šæ›´ä½“é¢çš„ç”Ÿæ´»!
 */</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">UserMapper</span> <span class="token punctuation">{</span>
    <span class="token doc-comment comment">/**
     * é€šè¿‡nameæŸ¥è¯¢
     *
     * <span class="token keyword">@param</span> <span class="token parameter">name</span>
     * <span class="token keyword">@return</span>
     */</span>
    <span class="token class-name">UserModel</span> <span class="token function">getByName</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åˆ›å»ºMapper xmlæ–‡ä»¶<code>UserMapper.xml</code>,<code>mybatis-series\chat03\src\main\resources\com\javacode2018\chat03\demo4\mapper</code>ç›®å½•åˆ›å»º<code>UserMapper.xml</code>ï¼Œå¦‚ä¸‹ï¼š</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
<span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">mapper</span> <span class="token name">PUBLIC</span> <span class="token string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span>
        <span class="token string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">namespace</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.javacode2018.chat03.demo4.mapper.UserMapper<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- é€šè¿‡nameæŸ¥è¯¢ --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>getByName<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.javacode2018.chat03.demo4.model.UserModel<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token cdata">&lt;![CDATA[
        SELECT * FROM t_user WHERE name = #{value} LIMIT 1
        ]]&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mapper</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>ä¸Šé¢æœ‰ä¸ªgetByNameé€šè¿‡ç”¨æˆ·åæŸ¥è¯¢ï¼Œé€šè¿‡#{value}å¼•ç”¨ä¼ é€’è¿›æ¥çš„nameå‚æ•°ï¼Œå½“ä¸€ä¸ªå‚æ•°çš„æ—¶å€™<code>#{å˜é‡åç§°}</code>ä¸­å˜é‡åç§°å¯ä»¥éšæ„å†™ï¼Œéƒ½å¯ä»¥å–åˆ°ä¼ å…¥çš„å‚æ•°ã€‚</p></blockquote><p>åˆ›å»ºå±æ€§é…ç½®æ–‡ä»¶ï¼Œ<code>mybatis-series\chat03\src\main\resources</code>ç›®å½•åˆ›å»º<code>jdbc.properties</code>ï¼Œå¦‚ä¸‹ï¼š</p><div class="language-properties ext-properties line-numbers-mode"><pre class="language-properties"><code><span class="token key attr-name">jdbc.driver</span><span class="token punctuation">=</span><span class="token value attr-value">com.mysql.jdbc.Driver</span>
<span class="token key attr-name">jdbc.url</span><span class="token punctuation">=</span><span class="token value attr-value">jdbc:mysql://localhost:3306/javacode2018?characterEncoding=UTF-8</span>
<span class="token key attr-name">jdbc.username</span><span class="token punctuation">=</span><span class="token value attr-value">root</span>
<span class="token key attr-name">jdbc.password</span><span class="token punctuation">=</span><span class="token value attr-value">root123</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>ä¸Šé¢æ˜¯æˆ‘æœ¬åœ°dbé…ç½®ï¼Œå¤§å®¶å¯ä»¥æ ¹æ®è‡ªå·±dbä¿¡æ¯åšå¯¹åº”ä¿®æ”¹ã€‚</p></blockquote><p>åˆ›å»ºmybatiså…¨å±€é…ç½®æ–‡ä»¶ï¼Œ<code>mybatis-series\chat03\src\main\resources\demo4</code>ç›®å½•åˆ›å»º<code>mybatis-config.xml</code>ï¼Œå¦‚ä¸‹ï¼š</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
<span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">configuration</span>
        <span class="token name">PUBLIC</span> <span class="token string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span>
        <span class="token string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- å¼•å…¥å¤–éƒ¨jdbcé…ç½® --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span> <span class="token attr-name">resource</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>jdbc.properties<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token comment">&lt;!-- ç¯å¢ƒé…ç½®ï¼Œå¯ä»¥é…ç½®å¤šä¸ªç¯å¢ƒ --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>environments</span> <span class="token attr-name">default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>demo4<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>environment</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>demo4<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token comment">&lt;!-- äº‹åŠ¡ç®¡ç†å™¨å·¥å‚é…ç½® --&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>transactionManager</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>JDBC<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
            <span class="token comment">&lt;!-- æ•°æ®æºå·¥å‚é…ç½®ï¼Œä½¿ç”¨å·¥å‚æ¥åˆ›å»ºæ•°æ®æº --&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dataSource</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>POOLED<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>driver<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${jdbc.driver}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>url<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${jdbc.url}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${jdbc.username}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${jdbc.password}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dataSource</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>environment</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>environments</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mappers</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>package</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.javacode2018.chat03.demo4.mapper<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mappers</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>ä¸Šé¢é€šè¿‡propertiesçš„resourceå±æ€§å¼•å…¥äº†jdbcé…ç½®æ–‡ä»¶ã€‚</p><p>packageå±æ€§çš„nameæŒ‡å®šäº†mapperæ¥å£å’Œmapper xmlæ–‡ä»¶æ‰€åœ¨çš„åŒ…ï¼Œmybatisä¼šæ‰«æè¿™ä¸ªåŒ…ï¼Œè‡ªåŠ¨æ³¨å†Œmapperæ¥å£å’Œmapper xmlæ–‡ä»¶ã€‚</p></blockquote><p>åˆ›å»ºæµ‹è¯•ç”¨ä¾‹<code>Demo4Test</code>ï¼Œå¦‚ä¸‹ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>javacode2018<span class="token punctuation">.</span>chat03<span class="token punctuation">.</span>demo4</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>javacode2018<span class="token punctuation">.</span>chat03<span class="token punctuation">.</span>demo4<span class="token punctuation">.</span>mapper<span class="token punctuation">.</span></span><span class="token class-name">UserMapper</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>javacode2018<span class="token punctuation">.</span>chat03<span class="token punctuation">.</span>demo4<span class="token punctuation">.</span>model<span class="token punctuation">.</span></span><span class="token class-name">UserModel</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span>extern<span class="token punctuation">.</span>slf4j<span class="token punctuation">.</span></span><span class="token class-name">Slf4j</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">Resources</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>session<span class="token punctuation">.</span></span><span class="token class-name">SqlSession</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>session<span class="token punctuation">.</span></span><span class="token class-name">SqlSessionFactory</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>session<span class="token punctuation">.</span></span><span class="token class-name">SqlSessionFactoryBuilder</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span></span><span class="token class-name">Before</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span></span><span class="token class-name">Test</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">InputStream</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">HashMap</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Map</span></span><span class="token punctuation">;</span>
<span class="token doc-comment comment">/**
 * å…¬ä¼—å·ï¼šè·¯äººç”²Javaï¼Œå·¥ä½œ10å¹´çš„å‰é˜¿é‡ŒP7åˆ†äº«Javaã€ç®—æ³•ã€æ•°æ®åº“æ–¹é¢çš„æŠ€æœ¯å¹²è´§ï¼åšä¿¡ç”¨æŠ€æœ¯æ”¹å˜å‘½è¿ï¼Œè®©å®¶äººè¿‡ä¸Šæ›´ä½“é¢çš„ç”Ÿæ´»!
 */</span>
<span class="token annotation punctuation">@Slf4j</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Demo4Test</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">SqlSessionFactory</span> sqlSessionFactory<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@Before</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">before</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token comment">//æŒ‡å®šmybatiså…¨å±€é…ç½®æ–‡ä»¶</span>
        <span class="token class-name">String</span> resource <span class="token operator">=</span> <span class="token string">&quot;demo4/mybatis-config.xml&quot;</span><span class="token punctuation">;</span>
        <span class="token comment">//è¯»å–å…¨å±€é…ç½®æ–‡ä»¶</span>
        <span class="token class-name">InputStream</span> inputStream <span class="token operator">=</span> <span class="token class-name">Resources</span><span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span>resource<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//æ„å»ºSqlSessionFactoryå¯¹è±¡</span>
        <span class="token class-name">SqlSessionFactory</span> sqlSessionFactory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SqlSessionFactoryBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span>inputStream<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>sqlSessionFactory <span class="token operator">=</span> sqlSessionFactory<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token doc-comment comment">/**
     * é€šè¿‡mapç»™Mapperæ¥å£çš„æ–¹æ³•ä¼ é€’å‚æ•°
     */</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">getByName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">(</span><span class="token class-name">SqlSession</span> sqlSession <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>sqlSessionFactory<span class="token punctuation">.</span><span class="token function">openSession</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">UserMapper</span> userMapper <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">UserMapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">UserModel</span> userModel <span class="token operator">=</span> userMapper<span class="token punctuation">.</span><span class="token function">getByName</span><span class="token punctuation">(</span><span class="token string">&quot;è·¯äººç”²Java&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;{}&quot;</span><span class="token punctuation">,</span> userModel<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ³¨æ„ä¸Šé¢çš„<code>getByName</code>æ–¹æ³•ï¼Œä¼šè°ƒç”¨UserMapperæ¥å£çš„<code>getByName</code>æ–¹æ³•é€šè¿‡ç”¨æˆ·åæŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯ï¼Œæˆ‘ä»¬è¿è¡Œä¸€ä¸‹è¿™ä¸ªæ–¹æ³•ï¼Œè¾“å‡ºå¦‚ä¸‹ï¼š</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>44:55.747 [main] DEBUG c.j.c.d.mapper.UserMapper.getByName - ==&gt;  Preparing: SELECT * FROM t_user WHERE name = ? LIMIT 1 
44:55.779 [main] DEBUG c.j.c.d.mapper.UserMapper.getByName - ==&gt; Parameters: è·¯äººç”²Java(String)
44:55.797 [main] DEBUG c.j.c.d.mapper.UserMapper.getByName - &lt;==      Total: 1
44:55.798 [main] INFO  c.j.chat03.demo4.Demo4Test - UserModel(id=1, name=è·¯äººç”²Java, age=30, salary=50000.0, sex=1)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_2-ä¼ é€’ä¸€ä¸ªmapå‚æ•°" tabindex="-1"><a class="header-anchor" href="#_2-ä¼ é€’ä¸€ä¸ªmapå‚æ•°" aria-hidden="true">#</a> 2-ä¼ é€’ä¸€ä¸ªMapå‚æ•°</h2><h3 id="_1-ç”¨æ³•-1" tabindex="-1"><a class="header-anchor" href="#_1-ç”¨æ³•-1" aria-hidden="true">#</a> 1.ç”¨æ³•</h3><p>å¦‚æœæˆ‘ä»¬éœ€è¦ä¼ é€’çš„å‚æ•°æ¯”è¾ƒå¤šï¼Œå‚æ•°ä¸ªæ•°æ˜¯åŠ¨æ€çš„ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥å°†è¿™äº›å‚æ•°æ”¾åœ¨ä¸€ä¸ªmapä¸­ï¼Œkeyä¸ºå‚æ•°åç§°ï¼Œvalueä¸ºå‚æ•°çš„å€¼ã€‚</p><p>Mapperæ¥å£ä¸­å¯ä»¥è¿™ä¹ˆå®šä¹‰ï¼Œå¦‚ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">UserModel</span><span class="token punctuation">&gt;</span></span> <span class="token function">getByMap</span><span class="token punctuation">(</span><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> map<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>å¦‚æˆ‘ä»¬ä¼ é€’ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">,</span> <span class="token number">1L</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;å¼ å­¦å‹&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯¹åº”çš„mapper xmlä¸­å¯ä»¥é€šè¿‡<code>#{mapä¸­çš„key}</code>å¯ä»¥è·å–keyåœ¨mapä¸­å¯¹åº”çš„valueçš„å€¼ä½œä¸ºå‚æ•°ï¼Œå¦‚ï¼š</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> t_user <span class="token keyword">WHERE</span> id<span class="token operator">=</span><span class="token comment">#{id} OR name = #{name}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="_2-æ¡ˆä¾‹-1" tabindex="-1"><a class="header-anchor" href="#_2-æ¡ˆä¾‹-1" aria-hidden="true">#</a> 2.æ¡ˆä¾‹</h3><p>ä¸‹é¢æˆ‘ä»¬é€šè¿‡mapä¼ é€’å¤šä¸ªå‚æ•°æ¥æŒ‰ç…§idæˆ–è€…ç”¨æˆ·åè¿›è¡ŒæŸ¥è¯¢ã€‚</p><p><code>com.javacode2018.chat03.demo4.mapper.UserMapper</code>ä¸­æ–°å¢ä¸€ä¸ªæ–¹æ³•ï¼Œå’Œä¸Šé¢UserMapper.xmlä¸­çš„å¯¹åº”ï¼Œå¦‚ä¸‹ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * é€šè¿‡mapæŸ¥è¯¢
 * <span class="token keyword">@param</span> <span class="token parameter">map</span>
 * <span class="token keyword">@return</span>
 */</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">UserModel</span><span class="token punctuation">&gt;</span></span> <span class="token function">getByMap</span><span class="token punctuation">(</span><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> map<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ³¨æ„ä¸Šé¢çš„æ–¹æ³•ç”±2ä¸ªå‚æ•°ï¼Œå‚æ•°åç§°åˆ†åˆ«ä¸º<code>idã€name</code>ï¼Œä¸‹é¢æˆ‘ä»¬åœ¨å¯¹åº”çš„mapper xmlä¸­å†™å¯¹åº”çš„æ“ä½œ</p><p><code>chat03\src\main\resources\com\javacode2018\chat03\demo4\mapper\UserMapper.xml</code>ä¸­æ–°å¢ä¸‹é¢ä»£ç ï¼š</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!-- é€šè¿‡mapæŸ¥è¯¢ --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>getByMap<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.javacode2018.chat03.demo4.model.UserModel<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token cdata">&lt;![CDATA[
    SELECT * FROM t_user WHERE id=#{id} OR name = #{name}
    ]]&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¤§å®¶æ³¨æ„ä¸€ä¸‹ä¸Šé¢çš„å–å€¼æˆ‘ä»¬æ˜¯ä½¿ç”¨#{id}å–idå‚æ•°çš„å€¼ï¼Œ#{name}å–nameå‚æ•°çš„å€¼ï¼Œä¸‹é¢æˆ‘ä»¬åˆ›å»ºæµ‹è¯•ç”¨ä¾‹ï¼Œçœ‹çœ‹æ˜¯å¦å¯ä»¥æ­£å¸¸è¿è¡Œï¼Ÿ</p><p><code>Demo4Test</code>ä¸­æ–°å¢ä¸‹é¢æ–¹æ³•ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * é€šè¿‡mapç»™Mapperæ¥å£çš„æ–¹æ³•ä¼ é€’å‚æ•°
 */</span>
<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">getByName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">(</span><span class="token class-name">SqlSession</span> sqlSession <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>sqlSessionFactory<span class="token punctuation">.</span><span class="token function">openSession</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">UserMapper</span> userMapper <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">UserMapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">,</span> <span class="token number">1L</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;å¼ å­¦å‹&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">UserModel</span><span class="token punctuation">&gt;</span></span> userModels <span class="token operator">=</span> userMapper<span class="token punctuation">.</span><span class="token function">getByMap</span><span class="token punctuation">(</span>map<span class="token punctuation">)</span><span class="token punctuation">;</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;{}&quot;</span><span class="token punctuation">,</span> userModels<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿è¡Œä¸€ä¸‹ä¸Šé¢çš„è¿™ä¸ªæµ‹è¯•ç”¨ä¾‹ï¼Œè¾“å‡ºï¼š</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>01:28.242 [main] DEBUG c.j.c.d.mapper.UserMapper.getByMap - ==&gt;  Preparing: SELECT * FROM t_user WHERE id=? OR name = ? 
01:28.277 [main] DEBUG c.j.c.d.mapper.UserMapper.getByMap - ==&gt; Parameters: 1(Long), å¼ å­¦å‹(String)
01:28.296 [main] DEBUG c.j.c.d.mapper.UserMapper.getByMap - &lt;==      Total: 2
01:28.297 [main] INFO  c.j.chat03.demo4.Demo4Test - UserModel(id=1, name=è·¯äººç”²Java, age=30, salary=50000.0, sex=1)
01:28.298 [main] INFO  c.j.chat03.demo4.Demo4Test - UserModel(id=3, name=å¼ å­¦å‹, age=56, salary=500000.0, sex=1)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_3-ä¼ é€’ä¸€ä¸ªjavaå¯¹è±¡" tabindex="-1"><a class="header-anchor" href="#_3-ä¼ é€’ä¸€ä¸ªjavaå¯¹è±¡" aria-hidden="true">#</a> 3-ä¼ é€’ä¸€ä¸ªJavaå¯¹è±¡</h2><p>å½“å‚æ•°æ¯”è¾ƒå¤šï¼Œä½†æ˜¯å…·ä½“æœ‰å¤šå°‘ä¸ªå‚æ•°æˆ‘ä»¬æ˜¯ç¡®å®šçš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥å°†è¿™äº›å‚æ•°æ”¾åœ¨ä¸€ä¸ªjavabeanå¯¹è±¡ä¸­ã€‚</p><p>å¦‚æˆ‘ä»¬æƒ³é€šè¿‡<code>userIdå’ŒuserName</code>æŸ¥è¯¢ï¼Œå¯ä»¥å®šä¹‰ä¸€ä¸ª<code>dto</code>å¯¹è±¡ï¼Œå±æ€§æ·»åŠ å¯¹åº”çš„getã€setæ–¹æ³•ï¼Œå¦‚ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Getter</span>
<span class="token annotation punctuation">@Setter</span>
<span class="token annotation punctuation">@ToString</span>
<span class="token annotation punctuation">@Builder</span>
<span class="token annotation punctuation">@NoArgsConstructor</span>
<span class="token annotation punctuation">@AllArgsConstructor</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserFindDto</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">Long</span> userId<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> userName<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>æ³¨æ„ä¸Šé¢çš„getã€setæ–¹æ³•æˆ‘ä»¬é€šè¿‡lombokè‡ªåŠ¨ç”Ÿæˆçš„ã€‚</p></blockquote><p>UserMapperä¸­æ–°å¢ä¸€ä¸ªæ–¹æ³•ï¼Œå°†<code>UserFindDto</code>ä½œä¸ºå‚æ•°ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * é€šè¿‡UserFindDtoè¿›è¡ŒæŸ¥è¯¢
 * <span class="token keyword">@param</span> <span class="token parameter">userFindDto</span>
 * <span class="token keyword">@return</span>
 */</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">UserModel</span><span class="token punctuation">&gt;</span></span> <span class="token function">getListByUserFindDto</span><span class="token punctuation">(</span><span class="token class-name">UserFindDto</span> userFindDto<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯¹åº”çš„UserMapper.xmlä¸­è¿™ä¹ˆå†™ï¼Œå¦‚ä¸‹ï¼š</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!-- é€šè¿‡mapæŸ¥è¯¢ --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>getListByUserFindDto<span class="token punctuation">&quot;</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.javacode2018.chat03.demo4.dto.UserFindDto<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.javacode2018.chat03.demo4.model.UserModel<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token cdata">&lt;![CDATA[
    SELECT * FROM t_user WHERE id=#{userId} OR name = #{userName}
    ]]&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>Demo4Test</code>ä¸­åˆ›å»ºä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹æ¥è°ƒç”¨ä¸€ä¸‹æ–°å¢çš„è¿™ä¸ªmapperæ¥å£ä¸­çš„æ–¹æ³•ï¼Œå¦‚ä¸‹ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">getListByUserFindDto</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">(</span><span class="token class-name">SqlSession</span> sqlSession <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>sqlSessionFactory<span class="token punctuation">.</span><span class="token function">openSession</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">UserMapper</span> userMapper <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">UserMapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">UserFindDto</span> userFindDto <span class="token operator">=</span> <span class="token class-name">UserFindDto</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">userId</span><span class="token punctuation">(</span><span class="token number">1L</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">userName</span><span class="token punctuation">(</span><span class="token string">&quot;å¼ å­¦å‹&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">UserModel</span><span class="token punctuation">&gt;</span></span> userModelList <span class="token operator">=</span> userMapper<span class="token punctuation">.</span><span class="token function">getListByUserFindDto</span><span class="token punctuation">(</span>userFindDto<span class="token punctuation">)</span><span class="token punctuation">;</span>
        userModelList<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>item <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;{}&quot;</span><span class="token punctuation">,</span> item<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸Šé¢æˆ‘ä»¬é€šè¿‡ä¼ é€’ä¸€ä¸ª<code>userFindDto</code>å¯¹è±¡è¿›è¡ŒæŸ¥è¯¢ï¼Œè¿è¡Œè¾“å‡ºï¼š</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>20:59.454 [main] DEBUG c.j.c.d.m.U.getListByUserFindDto - ==&gt;  Preparing: SELECT * FROM t_user WHERE id=? OR name = ? 
20:59.487 [main] DEBUG c.j.c.d.m.U.getListByUserFindDto - ==&gt; Parameters: 1(Long), å¼ å­¦å‹(String)
20:59.508 [main] DEBUG c.j.c.d.m.U.getListByUserFindDto - &lt;==      Total: 2
20:59.509 [main] INFO  c.j.chat03.demo4.Demo4Test - UserModel(id=1, name=è·¯äººç”²Java, age=30, salary=50000.0, sex=1)
20:59.511 [main] INFO  c.j.chat03.demo4.Demo4Test - UserModel(id=3, name=å¼ å­¦å‹, age=56, salary=500000.0, sex=1)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>ä¼ é€’javaå¯¹è±¡çš„æ–¹å¼ç›¸å¯¹äºmapçš„æ–¹å¼æ›´æ¸…æ™°ä¸€äº›ï¼Œå¯ä»¥æ˜ç¡®çŸ¥é“å…·ä½“æœ‰å“ªäº›å‚æ•°ï¼Œè€Œä¼ é€’mapï¼Œæˆ‘ä»¬æ˜¯ä¸çŸ¥é“è¿™ä¸ªmapä¸­å…·ä½“éœ€è¦å“ªäº›å‚æ•°çš„ï¼Œmapå¯¹å‚æ•°ä¹Ÿæ²¡æœ‰çº¦æŸï¼Œå‚æ•°å¯ä»¥éšæ„ä¼ ï¼Œå»ºè®®å¤šä¸ªå‚æ•°çš„æƒ…å†µä¸‹é€‰æ‹©é€šè¿‡javaå¯¹è±¡è¿›è¡Œä¼ å‚ã€‚</strong></p><h2 id="_4-ä¼ é€’å¤šä¸ªå‚æ•°" tabindex="-1"><a class="header-anchor" href="#_4-ä¼ é€’å¤šä¸ªå‚æ•°" aria-hidden="true">#</a> 4-ä¼ é€’å¤šä¸ªå‚æ•°</h2><h3 id="_1-ç”¨æ³•-2" tabindex="-1"><a class="header-anchor" href="#_1-ç”¨æ³•-2" aria-hidden="true">#</a> 1.ç”¨æ³•</h3><p>æˆ‘ä»¬æ¥æ–°å¢ä¸€ä¸ªé€šè¿‡ç”¨æˆ·idæˆ–ç”¨æˆ·åæŸ¥è¯¢çš„æ“ä½œã€‚</p><p><code>com.javacode2018.chat03.demo4.mapper.UserMapper</code>ä¸­æ–°å¢ä¸€ä¸ªæ–¹æ³•ï¼Œå’Œä¸Šé¢UserMapper.xmlä¸­çš„å¯¹åº”ï¼Œå¦‚ä¸‹ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * é€šè¿‡idæˆ–è€…nameæŸ¥è¯¢
 *
 * <span class="token keyword">@param</span> <span class="token parameter">id</span>
 * <span class="token keyword">@param</span> <span class="token parameter">name</span>
 * <span class="token keyword">@return</span>
 */</span>
<span class="token class-name">UserModel</span> <span class="token function">getByIdOrName</span><span class="token punctuation">(</span><span class="token class-name">Long</span> id<span class="token punctuation">,</span> <span class="token class-name">String</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ³¨æ„ä¸Šé¢çš„æ–¹æ³•ç”±2ä¸ªå‚æ•°ï¼Œå‚æ•°åç§°åˆ†åˆ«ä¸º<code>idã€name</code>ï¼Œä¸‹é¢æˆ‘ä»¬åœ¨å¯¹åº”çš„mapper xmlä¸­å†™å¯¹åº”çš„æ“ä½œ</p><p><code>chat03\src\main\resources\com\javacode2018\chat03\demo4\mapper\UserMapper.xml</code>ä¸­æ–°å¢ä¸‹é¢ä»£ç ï¼š</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!-- é€šè¿‡idæˆ–è€…nameæŸ¥è¯¢ --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>getByIdOrName<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.javacode2018.chat03.demo4.model.UserModel<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token cdata">&lt;![CDATA[
    SELECT * FROM t_user WHERE id=#{id} OR name = #{name} LIMIT 1
    ]]&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>å¤§å®¶æ³¨æ„ä¸€ä¸‹ä¸Šé¢çš„å–å€¼æˆ‘ä»¬æ˜¯ä½¿ç”¨#{id}å–idå‚æ•°çš„å€¼ï¼Œ#{name}å–nameå‚æ•°çš„å€¼ï¼Œä¸‹é¢æˆ‘ä»¬åˆ›å»ºæµ‹è¯•ç”¨ä¾‹ï¼Œçœ‹çœ‹æ˜¯å¦å¯ä»¥æ­£å¸¸è¿è¡Œï¼Ÿ</strong></p><p><code>Demo4Test</code>ä¸­æ–°å¢ä¸‹é¢æ–¹æ³•ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * é€šè¿‡mapç»™Mapperæ¥å£çš„æ–¹æ³•ä¼ é€’å‚æ•°
 */</span>
<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">getByIdOrName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">(</span><span class="token class-name">SqlSession</span> sqlSession <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>sqlSessionFactory<span class="token punctuation">.</span><span class="token function">openSession</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">UserMapper</span> userMapper <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">UserMapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">UserModel</span> userModel <span class="token operator">=</span> userMapper<span class="token punctuation">.</span><span class="token function">getByIdOrName</span><span class="token punctuation">(</span><span class="token number">1L</span><span class="token punctuation">,</span> <span class="token string">&quot;è·¯äººç”²Java&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;{}&quot;</span><span class="token punctuation">,</span> userModel<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿è¡Œä¸€ä¸‹ä¸Šé¢çš„è¿™ä¸ªæµ‹è¯•ç”¨ä¾‹ï¼ŒæŠ¥é”™äº†ï¼Œæˆ‘ä»¬æˆªå–éƒ¨åˆ†ä¸»è¦çš„é”™è¯¯ä¿¡æ¯ï¼Œå¦‚ä¸‹ï¼š</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>org.apache.ibatis.exceptions.PersistenceException: 
### Error querying database.  Cause: org.apache.ibatis.binding.BindingException: Parameter &#39;id&#39; not found. Available parameters are [arg1, arg0, param1, param2]
### Cause: org.apache.ibatis.binding.BindingException: Parameter &#39;id&#39; not found. Available parameters are [arg1, arg0, param1, param2]
    at org.apache.ibatis.exceptions.ExceptionFactory.wrapException(ExceptionFactory.java:30)
    at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:149)
    at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:140)
    at org.apache.ibatis.session.defaults.DefaultSqlSession.selectOne(DefaultSqlSession.java:76)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸Šé¢æŠ¥é”™ï¼Œç»™å¤§å®¶è§£é‡Šä¸€ä¸‹ï¼Œsqlä¸­æˆ‘ä»¬é€šè¿‡#{id}å»è·å–idå‚æ•°çš„å€¼ï¼Œä½†æ˜¯mybatisæ— æ³•é€šè¿‡#{id}è·å–åˆ°idçš„å€¼ï¼Œæ‰€ä»¥æŠ¥é”™äº†ï¼Œä»ä¸Šé”™è¯¯ä¸­æˆ‘ä»¬çœ‹åˆ°æœ‰è¿™æ ·çš„ä¸€æ®µï¼š</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>Available parameters are [arg1, arg0, param1, param2]
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ä¸Šé¢è¡¨ç¤ºå¯ç”¨çš„å‚æ•°åç§°åˆ—è¡¨ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨sqlä¸­é€šè¿‡<code>#{å‚æ•°åç§°}</code>æ¥å¼•å‚æ•°åˆ—è¡¨ä¸­çš„å‚æ•°ï¼Œå…ˆä¸è¯´è¿™4ä¸ªå‚æ•°å…·ä½“æ€ä¹ˆæ¥çš„ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°†sqlæ”¹æˆä¸‹é¢è¿™æ ·è¯•è¯•ï¼š</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> t_user <span class="token keyword">WHERE</span> id<span class="token operator">=</span><span class="token comment">#{arg0} OR name = #{arg1} LIMIT 1</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>å†è¿è¡Œä¸€ä¸‹æµ‹è¯•ç”¨ä¾‹ï¼Œçœ‹çœ‹æ•ˆæœï¼š</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>46:07.533 [main] DEBUG c.j.c.d.m.UserMapper.getByIdOrName - ==&gt;  Preparing: SELECT * FROM t_user WHERE id=? OR name = ? LIMIT 1 
46:07.566 [main] DEBUG c.j.c.d.m.UserMapper.getByIdOrName - ==&gt; Parameters: 1(Long), è·¯äººç”²Java(String)
46:07.585 [main] DEBUG c.j.c.d.m.UserMapper.getByIdOrName - &lt;==      Total: 1
46:07.586 [main] INFO  c.j.chat03.demo4.Demo4Test - UserModel(id=1, name=è·¯äººç”²Java, age=30, salary=50000.0, sex=1)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™ä¸‹æ­£å¸¸äº†ã€‚</p><p>æˆ‘ä»¬å°†sqlå†ä¿®æ”¹ä¸€ä¸‹ï¼Œä¿®æ”¹æˆä¸‹é¢è¿™æ ·ï¼š</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> t_user <span class="token keyword">WHERE</span> id<span class="token operator">=</span><span class="token comment">#{param1} OR name = #{param2} LIMIT 1</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>è¿è¡Œä¸€ä¸‹æµ‹è¯•ç”¨ä¾‹ï¼Œè¾“å‡ºï¼š</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>47:19.935 [main] DEBUG c.j.c.d.m.UserMapper.getByIdOrName - ==&gt;  Preparing: SELECT * FROM t_user WHERE id=? OR name = ? LIMIT 1 
47:19.966 [main] DEBUG c.j.c.d.m.UserMapper.getByIdOrName - ==&gt; Parameters: 1(Long), è·¯äººç”²Java(String)
47:19.984 [main] DEBUG c.j.c.d.m.UserMapper.getByIdOrName - &lt;==      Total: 1
47:19.985 [main] INFO  c.j.chat03.demo4.Demo4Test - UserModel(id=1, name=è·¯äººç”²Java, age=30, salary=50000.0, sex=1)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-å¤šå‚æ•°mybatisçš„å¤„ç†" tabindex="-1"><a class="header-anchor" href="#_2-å¤šå‚æ•°mybatisçš„å¤„ç†" aria-hidden="true">#</a> 2.å¤šå‚æ•°mybatisçš„å¤„ç†</h3><p>mybatiså¤„ç†å¤šä¸ªå‚æ•°çš„æ—¶å€™ï¼Œä¼šå°†å¤šä¸ªå‚æ•°å°è£…åˆ°ä¸€ä¸ªmapä¸­ï¼Œmapçš„keyä¸ºå‚æ•°çš„åç§°ï¼Œjavaå¯ä»¥é€šè¿‡åå°„è·å–æ–¹æ³•å‚æ•°çš„åç§°ï¼Œä¸‹é¢è¿™ä¸ªæ–¹æ³•ï¼š</p><div class="language-Java ext-Java line-numbers-mode"><pre class="language-Java"><code>UserModel getByIdOrName(Long id, String name);
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ç¼–è¯‘ä¹‹åï¼Œæ–¹æ³•å‚æ•°çš„åç§°é€šè¿‡åå°„è·å–çš„å¹¶ä¸æ˜¯<code>idã€name</code>ï¼Œè€Œæ˜¯<code>arg0ã€arg1</code>ï¼Œä¹Ÿå°±æ˜¯è¯´ç¼–è¯‘ä¹‹åï¼Œæ–¹æ³•çœŸå®çš„å‚æ•°åç§°ä¼šä¸¢å¤±ï¼Œä¼šå˜æˆ<code>arg+å‚æ•°ä¸‹æ ‡</code>çš„æ ¼å¼ã€‚</p><p>æ‰€ä»¥ä¸Šé¢ä¼ é€’çš„å‚æ•°ç›¸å½“äºä¼ é€’äº†ä¸‹é¢è¿™æ ·çš„ä¸€ä¸ªmapï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;arg0&quot;</span><span class="token punctuation">,</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;arg1&quot;</span><span class="token punctuation">,</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é‚£ä¹ˆå‚æ•°ä¸­çš„<code>param1ã€param2</code>åˆæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ</p><p>ä¸Šé¢çš„mapä¸­ä¼šæ”¾å…¥æŒ‰ç…§<code>å‚æ•°åç§°-&gt;å‚æ•°çš„å€¼</code>çš„æ–¹å¼å°†å…¶æ”¾å…¥mapä¸­ï¼Œé€šè¿‡åå°„çš„æ–¹å¼è·å–çš„å‚æ•°åç§°æ˜¯å¯èƒ½ä¼šå‘ç”Ÿå˜åŒ–çš„ï¼Œæˆ‘ä»¬ç¼–è¯‘javaä»£ç ä½¿ç”¨javacå‘½ä»¤ï¼Œjavacå‘½ä»¤æœ‰ä¸ª<code>-parameters</code>å‚æ•°ï¼Œå½“ç¼–è¯‘ä»£ç çš„æ—¶å€™åŠ ä¸Šè¿™ä¸ªå‚æ•°ï¼Œæ–¹æ³•çš„å®é™…åç§°ä¼šè¢«ç¼–è¯‘åˆ°classå­—èŠ‚ç æ–‡ä»¶ä¸­ï¼Œå½“é€šè¿‡åå°„è·å–æ–¹æ³•åç§°çš„æ—¶å€™å°±ä¸æ˜¯<code>arg0ã€arg1</code>è¿™ç§æ ¼å¼äº†ï¼Œè€Œæ˜¯çœŸå®çš„å‚æ•°åç§°ï¼š<code>idã€name</code>äº†ï¼Œæˆ‘ä»¬æ¥ä¿®æ”¹ä¸€ä¸‹mavençš„é…ç½®è®©mavenç¼–è¯‘ä»£ç çš„æ—¶å€™åŠ ä¸Šè¿™ä¸ªå‚æ•°ï¼Œä¿®æ”¹<code>chat03/pom.xml</code>ä¸­çš„buildå…ƒç´ ï¼Œè¿™ä¸ªå…ƒç´ ä¸­åŠ å…¥ä¸‹é¢ä»£ç ï¼š</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugins</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugin</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.apache.maven.plugins<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>maven-compiler-plugin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>3.3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>compilerArgs</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span><span class="token punctuation">&gt;</span></span>-parameters<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>arg</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>compilerArgs</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugin</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugins</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ideaä¸­ç¼–è¯‘ä»£ç ä¹ŸåŠ ä¸€ä¸‹è¿™ä¸ªå‚æ•°ï¼Œæ“ä½œå¦‚ä¸‹ï¼š</p><p>ç‚¹å‡»<code>File-&gt;Settings-&gt;Build,Execution,Deployment-&gt;Java Compiler</code>ï¼Œå¦‚ä¸‹å›¾ï¼š</p><p><img src="https://raw.githubusercontent.com/huluhutu/blogimg/main/img/image-20221012150342726.png" alt="image-20221012150342726" loading="lazy"></p><p>ä¸‹é¢æˆ‘ä»¬å°†<code>demo4/UserMapper.xml</code>ä¸­çš„<code>getByIdOrName</code>å¯¹åº”çš„sqlä¿®æ”¹æˆä¸‹é¢è¿™æ ·ï¼š</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> t_user <span class="token keyword">WHERE</span> id<span class="token operator">=</span><span class="token comment">#{arg0} OR name = #{arg1} LIMIT 1</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ä½¿ç”¨mavenå‘½ä»¤é‡æ–°ç¼–è¯‘ä¸€ä¸‹chat03çš„ä»£ç ï¼Œcmdå‘½ä»¤ä¸­<code>mybatis-series/pom.xml</code>æ‰€åœ¨ç›®å½•æ‰§è¡Œä¸‹é¢å‘½ä»¤ï¼Œå¦‚ä¸‹ï¼š</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>D:\code\IdeaProjects\mybatis-series&gt;mvn clean compile -pl :chat03
[INFO] Scanning for projects...
[INFO]
[INFO] ----------------------&lt; com.javacode2018:chat03 &gt;-----------------------
[INFO] Building chat03 1.0-SNAPSHOT
[INFO] --------------------------------[ jar ]---------------------------------
[INFO]
[INFO] --- maven-clean-plugin:2.5:clean (default-clean) @ chat03 ---
[INFO] Deleting D:\code\IdeaProjects\mybatis-series\chat03\target
[INFO]
[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ chat03 ---
[INFO] Using &#39;UTF-8&#39; encoding to copy filtered resources.
[INFO] Copying 1 resource
[INFO] Copying 11 resources
[INFO]
[INFO] --- maven-compiler-plugin:3.3:compile (default-compile) @ chat03 ---
[INFO] Changes detected - recompiling the module!
[INFO] Compiling 13 source files to D:\code\IdeaProjects\mybatis-series\chat03\target\classes
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time:  3.532 s
[INFO] Finished at: 2019-12-10T13:41:05+08:00
[INFO] ------------------------------------------------------------------
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å†è¿è¡Œä¸€ä¸‹<code>com.javacode2018.chat03.demo4.Demo4Test#getByIdOrName</code>ï¼Œè¾“å‡ºå¦‚ä¸‹ï¼š</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>org.apache.ibatis.exceptions.PersistenceException: 
### Error querying database.  Cause: org.apache.ibatis.binding.BindingException: Parameter &#39;arg0&#39; not found. Available parameters are [name, id, param1, param2]
### Cause: org.apache.ibatis.binding.BindingException: Parameter &#39;arg0&#39; not found. Available parameters are [name, id, param1, param2]
    at org.apache.ibatis.exceptions.ExceptionFactory.wrapException(ExceptionFactory.java:30)
    at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:149)
    at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:140)
    at org.apache.ibatis.session.defaults.DefaultSqlSession.selectOne(DefaultSqlSession.java:76)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åˆæŠ¥é”™äº†ï¼Œè¿™æ¬¡é”™è¯¯ä¿¡æ¯å˜äº†ï¼Œæ³¨æ„æœ‰è¿™ä¹ˆä¸€è¡Œï¼š</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>Parameter &#39;arg0&#39; not found. Available parameters are [name, id, param1, param2]
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>å‚æ•°åç§°å˜æˆäº†çœŸå®çš„åç§°äº†ï¼Œä½†æ˜¯è¿˜æ˜¯æœ‰<code>param1ã€param2</code>ï¼Œæ–¹æ³•å‚æ•°åç§°ä¸ç®¡æ€ä¹ˆå˜ï¼Œç¼–è¯‘æ–¹å¼å¦‚ä½•å˜åŒ–ï¼Œ<code>param1, param2</code>å§‹ç»ˆåœ¨è¿™é‡Œï¼Œ<strong>è¿™ä¸ª<code>param1, param2</code>å°±æ˜¯ä¸ºäº†åº”å¯¹ä¸åŒçš„ç¼–è¯‘æ–¹å¼å¯¼è‡´å‚æ•°åç§°è€Œå‘ç”Ÿå˜åŒ–çš„</strong>ï¼Œmybatiså†…éƒ¨é™¤äº†å°†å‚æ•°æŒ‰ç…§<code>åç§°-&gt;å€¼</code>çš„æ–¹å¼æ”¾å…¥mapå¤–ï¼Œè¿˜ä¼šæŒ‰ç…§å‚æ•°çš„é¡ºåºæ”¾å…¥ä¸€äº›å€¼ï¼Œè¿™äº›å€¼çš„keyå°±æ˜¯<code>param+å‚æ•°ä½ç½®</code>ï¼Œè¿™ä¸ªä½ç½®ä»1å¼€å§‹çš„ï¼Œæ‰€ä»¥idæ˜¯ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œå¯¹åº”çš„keyæ˜¯<code>param1</code>ï¼Œnameå¯¹åº”çš„keyæ˜¯<code>param2</code>ï¼Œvalueå¯¹åº”çš„è¿˜æ˜¯å‚æ•°çš„å€¼ï¼Œæ‰€ä»¥mybatiså¯¹äºå‚æ•°çš„å¤„ç†ç›¸å½“äºä¸‹é¢è¿‡ç¨‹ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;åå°„è·å–çš„å‚æ•°idçš„åç§°&quot;</span><span class="token punctuation">,</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;åå°„è·å–çš„å‚æ•°nameçš„åç§°&quot;</span><span class="token punctuation">,</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;param1&quot;</span><span class="token punctuation">,</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;param2&quot;</span><span class="token punctuation">,</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æˆ‘ä»¬å°†<code>demo4/UserMaper.xml</code>ä¸­çš„<code>getByIdOrName</code>å¯¹åº”çš„sqlæ”¹æˆparamçš„æ–¹å¼ï¼Œå¦‚ä¸‹ï¼š</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> t_user <span class="token keyword">WHERE</span> id<span class="token operator">=</span><span class="token comment">#{param1} OR name = #{param2} LIMIT 1</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>å†è¿è¡Œä¸€ä¸‹<code>com.javacode2018.chat03.demo4.Demo4Test#getByIdOrName</code>ï¼Œè¾“å‡ºå¦‚ä¸‹ï¼Œæ­£å¸¸äº†ï¼š</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>51:12.588 [main] DEBUG c.j.c.d.m.UserMapper.getByIdOrName - ==&gt;  Preparing: SELECT * FROM t_user WHERE id=? OR name = ? LIMIT 1 
51:12.619 [main] DEBUG c.j.c.d.m.UserMapper.getByIdOrName - ==&gt; Parameters: 1(Long), è·¯äººç”²Java(String)
51:12.634 [main] DEBUG c.j.c.d.m.UserMapper.getByIdOrName - &lt;==      Total: 1
51:12.635 [main] INFO  c.j.chat03.demo4.Demo4Test - UserModel(id=1, name=è·¯äººç”²Java, age=30, salary=50000.0, sex=1)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="ä½¿ç”¨æ³¨æ„" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨æ³¨æ„" aria-hidden="true">#</a> ä½¿ç”¨æ³¨æ„</h4><ol><li><strong>ä½¿ç”¨å‚æ•°åç§°çš„æ–¹å¼å¯¹ç¼–è¯‘ç¯å¢ƒæœ‰å¾ˆå¼ºçš„ä¾èµ–æ€§ï¼Œå¦‚æœç¼–è¯‘ä¸­åŠ ä¸Šäº†<code>-parameters</code>å‚æ•°ï¼Œå‚æ•°å®é™…åç§°å¯ä»¥ç›´æ¥ä½¿ç”¨ï¼Œå¦‚æœæ²¡æœ‰åŠ ï¼Œå‚æ•°åç§°å°±å˜æˆ<code>argä¸‹æ ‡</code>çš„æ ¼å¼äº†ï¼Œè¿™ç§å¾ˆå®¹æ˜“å‡ºé”™</strong></li><li><strong>sqlä¸­ä½¿ç”¨<code>param1ã€param2ã€paramN</code>è¿™ç§æ–¹å¼æ¥å¼•ç”¨å¤šå‚æ•°ï¼Œå¯¹å‚æ•°çš„é¡ºåºä¾èµ–æ€§ç‰¹åˆ«å¼ºï¼Œå¦‚æœæœ‰äººæŠŠå‚æ•°çš„é¡ºåºè°ƒæ•´äº†æˆ–è€…è°ƒæ•´äº†å‚æ•°çš„ä¸ªæ•°ï¼Œåæœå°±æ˜¯ç¾éš¾æ€§çš„ï¼Œæ‰€ä»¥è¿™ç§æ–¹å¼ä¸å»ºè®®å¤§å®¶ä½¿ç”¨ã€‚</strong></li></ol><h2 id="_5-å¤šå‚æ•°ä¸­ç”¨-paramæŒ‡å®šå‚æ•°å" tabindex="-1"><a class="header-anchor" href="#_5-å¤šå‚æ•°ä¸­ç”¨-paramæŒ‡å®šå‚æ•°å" aria-hidden="true">#</a> 5-å¤šå‚æ•°ä¸­ç”¨@paramæŒ‡å®šå‚æ•°å</h2><p>åˆšæ‰ä¸Šé¢è®²äº†å¤šå‚æ•°ä¼ é€’çš„ä½¿ç”¨ä¸Šé¢ï¼Œå¯¹å‚æ•°åç§°å’Œé¡ºåºæœ‰å¾ˆå¼ºçš„ä¾èµ–æ€§ï¼Œå®¹æ˜“å¯¼è‡´ä¸€äº›ä¸¥é‡çš„é”™è¯¯ã€‚</p><p>mybatisä¹Ÿä¸ºæˆ‘ä»¬è€ƒè™‘åˆ°äº†è¿™ç§æƒ…å†µï¼Œå¯ä»¥è®©æˆ‘ä»¬è‡ªå·±å»æŒ‡å®šå‚æ•°çš„åç§°ï¼Œé€šè¿‡<code>@param(â€œå‚æ•°åç§°â€)</code>æ¥ç»™å‚æ•°æŒ‡å®šåç§°ã€‚</p><p><code>com.javacode2018.chat03.demo4.mapper.UserMapper#getByIdOrName</code>åšä¸€ä¸‹ä¿®æ”¹ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * é€šè¿‡idæˆ–è€…nameæŸ¥è¯¢
 *
 * <span class="token keyword">@param</span> <span class="token parameter">id</span>
 * <span class="token keyword">@param</span> <span class="token parameter">name</span>
 * <span class="token keyword">@return</span>
 */</span>
<span class="token class-name">UserModel</span> <span class="token function">getByIdOrName</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;userId&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Long</span> id<span class="token punctuation">,</span> <span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;userName&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸Šé¢æˆ‘ä»¬é€šè¿‡@Paramæ³¨è§£ç»™ä¸¤ä¸ªå‚æ•°æ˜ç¡®æŒ‡å®šäº†åç§°ï¼Œåˆ†åˆ«æ˜¯<code>userIdã€userName</code>ï¼Œå¯¹åº”çš„UserMapper.xmlä¸­ä¹Ÿåšä¸€ä¸‹è°ƒæ•´ï¼Œå¦‚ä¸‹ï¼š</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!-- é€šè¿‡idæˆ–è€…nameæŸ¥è¯¢ --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>getByIdOrName<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.javacode2018.chat03.demo4.model.UserModel<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token cdata">&lt;![CDATA[
    SELECT * FROM t_user WHERE id=#{userId} OR name = #{userName} LIMIT 1
    ]]&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿è¡Œ<code>com.javacode2018.chat03.demo4.Demo4Test#getByMap</code>ï¼Œè¾“å‡ºï¼š</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>13:25.431 [main] DEBUG c.j.c.d.mapper.UserMapper.getByMap - ==&gt;  Preparing: SELECT * FROM t_user WHERE id=? OR name = ? 
13:25.460 [main] DEBUG c.j.c.d.mapper.UserMapper.getByMap - ==&gt; Parameters: null, å¼ å­¦å‹(String)
13:25.477 [main] DEBUG c.j.c.d.mapper.UserMapper.getByMap - &lt;==      Total: 1
13:25.478 [main] INFO  c.j.chat03.demo4.Demo4Test - UserModel(id=3, name=å¼ å­¦å‹, age=56, salary=500000.0, sex=1)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_6-mybatiså‚æ•°å¤„ç†" tabindex="-1"><a class="header-anchor" href="#_6-mybatiså‚æ•°å¤„ç†" aria-hidden="true">#</a> 6-mybatiså‚æ•°å¤„ç†</h2><p>ä¸Šé¢å‚æ•°çš„è§£æè¿‡ç¨‹ä»£ç åœ¨<code>org.apache.ibatis.reflection.ParamNameResolver</code>ç±»ä¸­ï¼Œä¸»è¦çœ‹ä¸‹é¢çš„2ä¸ªæ–¹æ³•ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token class-name">ParamNameResolver</span><span class="token punctuation">(</span><span class="token class-name">Configuration</span> config<span class="token punctuation">,</span> <span class="token class-name">Method</span> method<span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">getNamedParams</span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™2ä¸ªæ–¹æ³•å»ºè®®å¤§å®¶éƒ½è®¾ç½®ä¸€ä¸‹æ–­ç‚¹ç»†çœ‹ä¸€ä¸‹æ•´ä¸ªè¿‡ç¨‹ï¼Œæ–¹æ³•çš„å®ç°ä¸å¤æ‚ï¼Œå¤§å®¶èŠ±åŠä¸ªå°æ—¶å»çœ‹ä¸€ä¸‹åŠ æ·±ä¸€ä¸‹ç†è§£ã€‚</p><h2 id="_7-ä¼ é€’ä¸€ä¸ªcollectionå‚æ•°" tabindex="-1"><a class="header-anchor" href="#_7-ä¼ é€’ä¸€ä¸ªcollectionå‚æ•°" aria-hidden="true">#</a> 7-ä¼ é€’ä¸€ä¸ªCollectionå‚æ•°</h2><p>å½“ä¼ é€’çš„å‚æ•°ç±»å‹æ˜¯<code>java.util.Collection</code>çš„æ—¶å€™ï¼Œä¼šè¢«æ”¾åœ¨mapä¸­ï¼Œkeyä¸º<code>collection</code>ï¼Œvalueä¸ºå‚æ•°çš„å€¼ï¼Œå¦‚ä¸‹é¢çš„æŸ¥è¯¢æ–¹æ³•ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * æŸ¥è¯¢ç”¨æˆ·idåˆ—è¡¨
 *
 * <span class="token keyword">@param</span> <span class="token parameter">idCollection</span>
 * <span class="token keyword">@return</span>
 */</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">UserModel</span><span class="token punctuation">&gt;</span></span> <span class="token function">getListByIdCollection</span><span class="token punctuation">(</span><span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Long</span><span class="token punctuation">&gt;</span></span> idCollection<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸Šé¢çš„æŸ¥è¯¢æ–¹æ³•ï¼Œmybatiså†…éƒ¨ä¼šå°†<code>idList</code>åšä¸€ä¸‹å¤„ç†ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;collection&quot;</span><span class="token punctuation">,</span>idCollection<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>æ‰€ä»¥æˆ‘ä»¬åœ¨mapper xmlä¸­ä½¿ç”¨çš„ä½¿ç”¨ï¼Œéœ€è¦é€šè¿‡<code>collection</code>åç§°æ¥å¼•ç”¨<code>idCollection</code>å‚æ•°ï¼Œå¦‚ä¸‹ï¼š</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!-- é€šè¿‡ç”¨æˆ·idåˆ—è¡¨æŸ¥è¯¢ --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>getListByIdCollection<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.javacode2018.chat03.demo4.model.UserModel<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token cdata">&lt;![CDATA[
    SELECT * FROM t_user WHERE id IN (#{collection[0]},#{collection[1]})
    ]]&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>com.javacode2018.chat03.demo4.Demo4Test</code>ä¸­å†™ä¸ªæµ‹è¯•ç”¨ä¾‹<code>getListByIdList</code>ï¼ŒæŸ¥è¯¢2ä¸ªç”¨æˆ·ä¿¡æ¯ï¼Œå¦‚ä¸‹ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">getListByIdCollection</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;----------&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">try</span> <span class="token punctuation">(</span><span class="token class-name">SqlSession</span> sqlSession <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>sqlSessionFactory<span class="token punctuation">.</span><span class="token function">openSession</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">UserMapper</span> userMapper <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">UserMapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Long</span><span class="token punctuation">&gt;</span></span> userIdList <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span><span class="token number">1L</span><span class="token punctuation">,</span> <span class="token number">3L</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">UserModel</span><span class="token punctuation">&gt;</span></span> userModelList <span class="token operator">=</span> userMapper<span class="token punctuation">.</span><span class="token function">getListByIdCollection</span><span class="token punctuation">(</span>userIdList<span class="token punctuation">)</span><span class="token punctuation">;</span>
        userModelList<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>item <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;{}&quot;</span><span class="token punctuation">,</span> item<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿è¡Œè¾“å‡ºï¼š</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>26:15.774 [main] INFO  c.j.chat03.demo4.Demo4Test - ----------
26:16.055 [main] DEBUG c.j.c.d.m.U.getListByIdCollection - ==&gt;  Preparing: SELECT * FROM t_user WHERE id IN (?,?) 
26:16.083 [main] DEBUG c.j.c.d.m.U.getListByIdCollection - ==&gt; Parameters: 1(Long), 3(Long)
26:16.102 [main] DEBUG c.j.c.d.m.U.getListByIdCollection - &lt;==      Total: 2
26:16.103 [main] INFO  c.j.chat03.demo4.Demo4Test - UserModel(id=1, name=è·¯äººç”²Java, age=30, salary=50000.0, sex=1)
26:16.105 [main] INFO  c.j.chat03.demo4.Demo4Test - UserModel(id=3, name=å¼ å­¦å‹, age=56, salary=500000.0, sex=1)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_8-mybatisç»“åˆå‚æ•°å¤„ç†" tabindex="-1"><a class="header-anchor" href="#_8-mybatisç»“åˆå‚æ•°å¤„ç†" aria-hidden="true">#</a> 8-Mybatisç»“åˆå‚æ•°å¤„ç†</h2><p>é›†åˆå‚æ•°ï¼Œmybatisä¼šè¿›è¡Œä¸€äº›ç‰¹æ®Šå¤„ç†ï¼Œä»£ç åœ¨ä¸‹é¢çš„æ–¹æ³•ä¸­ï¼š</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>org.apache.ibatis.session.defaults.DefaultSqlSession#wrapCollection
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>è¿™ä¸ªæ–¹æ³•çš„æºç å¦‚ä¸‹ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">private</span> <span class="token class-name">Object</span> <span class="token function">wrapCollection</span><span class="token punctuation">(</span><span class="token keyword">final</span> <span class="token class-name">Object</span> object<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>object <span class="token keyword">instanceof</span> <span class="token class-name">Collection</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token class-name">StrictMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StrictMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;collection&quot;</span><span class="token punctuation">,</span> object<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>object <span class="token keyword">instanceof</span> <span class="token class-name">List</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;list&quot;</span><span class="token punctuation">,</span> object<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">return</span> map<span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>object <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> object<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token class-name">StrictMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StrictMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;array&quot;</span><span class="token punctuation">,</span> object<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> map<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> object<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>æºç è§£é‡Šï¼š</p><p>åˆ¤æ–­å‚æ•°æ˜¯å¦æ˜¯<code>java.util.Collection</code>ç±»å‹ï¼Œå¦‚æœæ˜¯ï¼Œä¼šæ”¾åœ¨mapä¸­ï¼Œkeyä¸º<code>collection</code>ã€‚</p><p>å¦‚æœå‚æ•°æ˜¯<code>java.util.List</code>ç±»å‹çš„ï¼Œä¼šåœ¨mapä¸­ç»§ç»­æ”¾ä¸€ä¸ª<code>list</code>ä½œä¸ºkeyæ¥å¼•ç”¨è¿™ä¸ªå¯¹è±¡ã€‚</p><p>å¦‚æœå‚æ•°æ˜¯æ•°ç»„ç±»å‹çš„ï¼Œä¼šé€šè¿‡<code>array</code>æ¥å¼•ç”¨è¿™ä¸ªå¯¹è±¡ã€‚</p></blockquote><p>ä¼ é€’1ä¸ªListå‚æ•°</p><p>ä»ä¸Šé¢æºç ä¸­å¯çŸ¥ï¼ŒListç±»å‹çš„å‚æ•°ä¼šè¢«æ”¾åœ¨mapä¸­ï¼Œå¯ä»¥é€šè¿‡2ä¸ªkeyï¼ˆ<code>collection</code>å’Œ<code>list</code>ï¼‰éƒ½å¯ä»¥å¼•ç”¨åˆ°è¿™ä¸ªListå¯¹è±¡ã€‚</p><p><code>com.javacode2018.chat03.demo4.mapper.UserMapper</code>ä¸­æ–°å¢ä¸€ä¸ªæ–¹æ³•ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * æŸ¥è¯¢ç”¨æˆ·idåˆ—è¡¨
 *
 * <span class="token keyword">@param</span> <span class="token parameter">idList</span>
 * <span class="token keyword">@return</span>
 */</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">UserModel</span><span class="token punctuation">&gt;</span></span> <span class="token function">getListByIdList</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Long</span><span class="token punctuation">&gt;</span></span> idList<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯¹åº”çš„<code>demo4/UserMaper.xml</code>ä¸­å¢åŠ ä¸€ä¸ªæ“ä½œï¼Œå¦‚ä¸‹ï¼š</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!-- é€šè¿‡ç”¨æˆ·idåˆ—è¡¨æŸ¥è¯¢ --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>getListByIdList<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.javacode2018.chat03.demo4.model.UserModel<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token cdata">&lt;![CDATA[
    SELECT * FROM t_user WHERE id IN (#{list[0]},#{collection[1]})
    ]]&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>æ³¨æ„ä¸Šé¢æˆ‘ä»¬ä½¿ç”¨äº†2ä¸­æ–¹å¼è·å–å‚æ•°ï¼Œé€šè¿‡<code>listã€collection</code>éƒ½å¯ä»¥å¼•ç”¨Listç±»å‹çš„å‚æ•°ã€‚</p></blockquote><p>æ–°å¢ä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹<code>com.javacode2018.chat03.demo4.Demo4Test#getListByIdList</code>ï¼Œå¦‚ä¸‹ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">getListByIdList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;----------&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">try</span> <span class="token punctuation">(</span><span class="token class-name">SqlSession</span> sqlSession <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>sqlSessionFactory<span class="token punctuation">.</span><span class="token function">openSession</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">UserMapper</span> userMapper <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">UserMapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Long</span><span class="token punctuation">&gt;</span></span> userIdList <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span><span class="token number">1L</span><span class="token punctuation">,</span> <span class="token number">3L</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">UserModel</span><span class="token punctuation">&gt;</span></span> userModelList <span class="token operator">=</span> userMapper<span class="token punctuation">.</span><span class="token function">getListByIdList</span><span class="token punctuation">(</span>userIdList<span class="token punctuation">)</span><span class="token punctuation">;</span>
        userModelList<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>item <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;{}&quot;</span><span class="token punctuation">,</span> item<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿è¡Œè¾“å‡ºï¼š</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>33:17.871 [main] INFO  c.j.chat03.demo4.Demo4Test - ----------
33:18.153 [main] DEBUG c.j.c.d.m.UserMapper.getListByIdList - ==&gt;  Preparing: SELECT * FROM t_user WHERE id IN (?,?) 
33:18.185 [main] DEBUG c.j.c.d.m.UserMapper.getListByIdList - ==&gt; Parameters: 1(Long), 3(Long)
33:18.207 [main] DEBUG c.j.c.d.m.UserMapper.getListByIdList - &lt;==      Total: 2
33:18.208 [main] INFO  c.j.chat03.demo4.Demo4Test - UserModel(id=1, name=è·¯äººç”²Java, age=30, salary=50000.0, sex=1)
33:18.210 [main] INFO  c.j.chat03.demo4.Demo4Test - UserModel(id=3, name=å¼ å­¦å‹, age=56, salary=500000.0, sex=1)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_9-ä¼ é€’ä¸€ä¸ªæ•°ç»„å‚æ•°" tabindex="-1"><a class="header-anchor" href="#_9-ä¼ é€’ä¸€ä¸ªæ•°ç»„å‚æ•°" aria-hidden="true">#</a> 9-ä¼ é€’ä¸€ä¸ªæ•°ç»„å‚æ•°</h2><p>æ•°ç»„ç±»å‹çš„å‚æ•°ä»ä¸Šé¢æºç ä¸­å¯çŸ¥ï¼Œsqlä¸­éœ€è¦é€šè¿‡<code>array</code>æ¥è¿›è¡Œå¼•ç”¨ï¼Œè¿™ä¸ªå°±ä¸å†™äº†ï¼Œæ¡ˆä¾‹ä¸­ä¹Ÿæ˜¯æœ‰çš„ï¼Œå¤§å®¶å¯ä»¥å»çœ‹ä¸€ä¸‹<code>com.javacode2018.chat03.demo4.Demo4Test#getListByIdArray</code>è¿™ä¸ªæ–¹æ³•ã€‚</p><h2 id="_10-rusulthandleä½œä¸ºå‚æ•°" tabindex="-1"><a class="header-anchor" href="#_10-rusulthandleä½œä¸ºå‚æ•°" aria-hidden="true">#</a> 10-rusultHandleä½œä¸ºå‚æ•°</h2><h3 id="ç”¨æ³•" tabindex="-1"><a class="header-anchor" href="#ç”¨æ³•" aria-hidden="true">#</a> ç”¨æ³•</h3><p>æŸ¥è¯¢çš„æ•°é‡æ¯”è¾ƒå¤§çš„æ—¶å€™ï¼Œè¿”å›ä¸€ä¸ªListé›†åˆå ç”¨çš„å†…å­˜è¿˜æ˜¯æ¯”è¾ƒå¤šçš„ï¼Œæ¯”å¦‚æˆ‘ä»¬æƒ³å¯¼å‡ºå¾ˆå¤šæ•°æ®ï¼Œå®é™…ä¸Šå¦‚æœæˆ‘ä»¬é€šè¿‡jdbcçš„æ–¹å¼ï¼Œéå†<code>ResultSet</code>çš„<code>next</code>æ–¹æ³•ï¼Œä¸€æ¡æ¡å¤„ç†ï¼Œè€Œä¸ç”¨å°†å…¶å­˜åˆ°Listé›†åˆä¸­å†å–å¤„ç†ã€‚</p><p>mybatisä¸­ä¹Ÿæ”¯æŒæˆ‘ä»¬è¿™ä¹ˆåšï¼Œå¯ä»¥ä½¿ç”¨<code>ResultHandler</code>å¯¹è±¡ï¼ŒçŠ¹å¦‚å…¶åï¼Œè¿™ä¸ªæ¥å£æ˜¯ç”¨æ¥å¤„ç†ç»“æœçš„ï¼Œå…ˆçœ‹ä¸€ä¸‹å…¶å®šä¹‰ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">ResultHandler</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
  <span class="token keyword">void</span> <span class="token function">handleResult</span><span class="token punctuation">(</span><span class="token class-name">ResultContext</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> resultContext<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é‡Œé¢æœ‰1ä¸ªæ–¹æ³•ï¼Œæ–¹æ³•çš„å‚æ•°æ˜¯<code>ResultContext</code>ç±»å‹çš„ï¼Œè¿™ä¸ªä¹Ÿæ˜¯ä¸€ä¸ªæ¥å£ï¼Œçœ‹ä¸€ä¸‹æºç ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">ResultContext</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
  <span class="token class-name">T</span> <span class="token function">getResultObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">int</span> <span class="token function">getResultCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">boolean</span> <span class="token function">isStopped</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">void</span> <span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>4ä¸ªæ–¹æ³•ï¼š</p><ul><li>getResultObjectï¼šè·å–å½“å‰è¡Œçš„ç»“æœ</li><li>getResultCountï¼šè·å–å½“å‰ç»“æœåˆ°ç¬¬å‡ è¡Œäº†</li><li>isStoppedï¼šåˆ¤æ–­æ˜¯å¦éœ€è¦åœæ­¢éå†ç»“æœé›†</li><li>stopï¼šåœæ­¢éå†ç»“æœé›†</li></ul><p><code>ResultContext</code>æ¥å£æœ‰ä¸€ä¸ªå®ç°ç±»<code>org.apache.ibatis.executor.result.DefaultResultContext</code>ï¼Œmybatisä¸­é»˜è®¤ä¼šä½¿ç”¨è¿™ä¸ªç±»ã€‚</p><h3 id="æ¡ˆä¾‹" tabindex="-1"><a class="header-anchor" href="#æ¡ˆä¾‹" aria-hidden="true">#</a> æ¡ˆä¾‹</h3><p>æˆ‘ä»¬éå†<code>t_user</code>è¡¨çš„æ‰€æœ‰è®°å½•ï¼Œç¬¬2æ¡éå†ç»“æŸä¹‹åï¼Œåœæ­¢éå†ï¼Œå®ç°å¦‚ä¸‹ï¼š</p><p>æ–°å¢ä¸€ä¸ªæ–¹æ³•<code>com.javacode2018.chat03.demo4.mapper.UserMapper#getList</code>ï¼Œå¦‚ä¸‹ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">void</span> <span class="token function">getList</span><span class="token punctuation">(</span><span class="token class-name">ResultHandler</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">UserModel</span><span class="token punctuation">&gt;</span></span> resultHandler<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>å¯¹åº”çš„<code>UserMapper.xml</code>æ–°å¢sqlæ“ä½œï¼Œå¦‚ä¸‹ï¼š</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>getList<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.javacode2018.chat03.demo4.model.UserModel<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token cdata">&lt;![CDATA[
    SELECT * FROM t_user
    ]]&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ–°å¢æµ‹è¯•ç”¨ä¾‹<code>com.javacode2018.chat03.demo4.Demo4Test#getList</code>ï¼Œå¦‚ä¸‹ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">getList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;----------&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">try</span> <span class="token punctuation">(</span><span class="token class-name">SqlSession</span> sqlSession <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>sqlSessionFactory<span class="token punctuation">.</span><span class="token function">openSession</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">UserMapper</span> userMapper <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">UserMapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        userMapper<span class="token punctuation">.</span><span class="token function">getList</span><span class="token punctuation">(</span>context <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            <span class="token comment">//å°†contextå‚æ•°è½¬æ¢ä¸ºDefaultResultContextå¯¹è±¡</span>
            <span class="token class-name">DefaultResultContext</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">UserModel</span><span class="token punctuation">&gt;</span></span> defaultResultContext <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">DefaultResultContext</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">UserModel</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span> context<span class="token punctuation">;</span>
            log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;{}&quot;</span><span class="token punctuation">,</span> defaultResultContext<span class="token punctuation">.</span><span class="token function">getResultObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//éå†åˆ°ç¬¬äºŒæ¡ä¹‹ååœæ­¢</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>defaultResultContext<span class="token punctuation">.</span><span class="token function">getResultCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">//è°ƒç”¨stopæ–¹æ³•åœæ­¢éå†ï¼Œstopæ–¹æ³•ä¼šæ›´æ–°å†…éƒ¨çš„ä¸€ä¸ªæ ‡å¿—ï¼Œç½®ä¸ºåœæ­¢éå†</span>
                defaultResultContext<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿è¡Œè¾“å‡ºï¼š</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>07:05.561 [main] INFO  c.j.chat03.demo4.Demo4Test - ----------
07:05.816 [main] DEBUG c.j.c.d.mapper.UserMapper.getList - ==&gt;  Preparing: SELECT * FROM t_user 
07:05.845 [main] DEBUG c.j.c.d.mapper.UserMapper.getList - ==&gt; Parameters: 
07:05.864 [main] INFO  c.j.chat03.demo4.Demo4Test - UserModel(id=1, name=è·¯äººç”²Java, age=30, salary=50000.0, sex=1)
07:05.867 [main] INFO  c.j.chat03.demo4.Demo4Test - UserModel(id=2, name=javacode2018, age=30, salary=50000.0, sex=1)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><!----><footer class="page-meta"><div class="meta-item edit-link"><a href="https://github.com/vuepress-theme-hope/vuepress-theme-hope/edit/main/docs/pages/DB/MyBatis/3-è¯¦è§£ä¼ å‚.md" rel="noopener noreferrer" target="_blank" aria-label="åœ¨ GitHub ä¸Šç¼–è¾‘æ­¤é¡µ" class="nav-link label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->åœ¨ GitHub ä¸Šç¼–è¾‘æ­¤é¡µ<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><!----><!----></footer><!----><div class="giscus-wrapper input-top" style="display:block;"><div style="text-align:center">Loading...</div></div><!----><!--]--></main><!--]--><footer class="footer-wrapper"><div class="footer">é»˜è®¤é¡µè„š</div><div class="copyright">Copyright Â© 2022 huluhutu</div></footer><!--]--></div><!--]--><!----><!----><!--]--></div>
    <script type="module" src="/huluhutublog/assets/app.0662e65c.js" defer></script>
  </body>
</html>
