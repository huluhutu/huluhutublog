import{_ as n}from"./_plugin-vue_export-helper.cdc0426e.js";import{o as s,c as a,d as t}from"./app.0662e65c.js";const p={},e=t(`<h1 id="\u5546\u54C1\u6A21\u5757" tabindex="-1"><a class="header-anchor" href="#\u5546\u54C1\u6A21\u5757" aria-hidden="true">#</a> \u5546\u54C1\u6A21\u5757</h1><h2 id="_1-\u9644\u8FD1\u7684\u5546\u5E97" tabindex="-1"><a class="header-anchor" href="#_1-\u9644\u8FD1\u7684\u5546\u5E97" aria-hidden="true">#</a> 1-\u9644\u8FD1\u7684\u5546\u5E97</h2><p>\u6B64\u529F\u80FD\u53EA\u5BF9\u5916\u63D0\u4F9B RESTful \u670D\u52A1\u63A5\u53E3\uFF0C\u4E0D\u8003\u8651\u9875\u9762\u3002\u7528\u6237\u53D1\u51FA\u4E00\u4E2A HTTP \u8BF7\u6C42\uFF0C\u67E5\u8BE2\u9644\u8FD1\u7684\u5546\u5E97\u3002\u5E76\u628A\u67E5\u8BE2\u7684\u7ED3\u679C\u4EE5 JSON \u7684\u5F62\u5F0F\uFF0C\u54CD\u5E94\u7ED9\u5BA2\u6237\u7AEF\u3002\u5B8C\u6210\u8BD5\u9A8C\u540E\uFF0C\u7528 Postman \u8FDB\u884C\u6D4B\u8BD5\u3002</p><h3 id="icategorymapper-java" tabindex="-1"><a class="header-anchor" href="#icategorymapper-java" aria-hidden="true">#</a> ICategoryMapper.java</h3><p>\u7528\u4E8E\u67E5\u8BE2\u5546\u5E97\u6240\u5C5E\u7684\u7C7B\u522B</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">ICategoryMapper</span> <span class="token punctuation">{</span>
    <span class="token comment">//\u6839\u636E\u5546\u5E97\u7C7B\u522B\u7684\u4E3B\u952E\uFF0C\u67E5\u8BE2\u6240\u5C5E\u7C7B\u522B\u3002</span>
    <span class="token annotation punctuation">@Select</span><span class="token punctuation">(</span><span class="token string">&quot;select * from t_category where categoryId = #{categoryId}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">Category</span> <span class="token function">getCategory</span><span class="token punctuation">(</span><span class="token class-name">Long</span> categoryId<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="ishopmapper-java" tabindex="-1"><a class="header-anchor" href="#ishopmapper-java" aria-hidden="true">#</a> IShopMapper.java</h3><p>\u7528\u4E8E\u67E5\u8BE2\u9644\u8FD1\u7684\u5E97\u94FA\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IShopMapper</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Select</span><span class="token punctuation">(</span><span class="token string">&quot;select * from t_shop limit 0,5&quot;</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@Results</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>property <span class="token operator">=</span> <span class="token string">&quot;category&quot;</span><span class="token punctuation">,</span>column <span class="token operator">=</span> <span class="token string">&quot;categoryId&quot;</span><span class="token punctuation">,</span>one <span class="token operator">=</span> <span class="token annotation punctuation">@One</span><span class="token punctuation">(</span>select <span class="token operator">=</span> <span class="token string">&quot;com.mapper.ICategoryMapper.getCategory&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Shop</span><span class="token punctuation">&gt;</span></span> <span class="token function">getNearShops</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="shopservice-java" tabindex="-1"><a class="header-anchor" href="#shopservice-java" aria-hidden="true">#</a> ShopService.java</h3><p>Service \u5C42\u9700\u8981\u7F16\u8F91\u4E00\u4E0B ShopService.java \u7C7B\uFF0C \u8FD9\u4E2A\u7C7B\u662F\u6838\u5FC3\u7684\u4E1A\u52A1\u5904\u7406\u7C7B\u3002\u7528\u4E8E\u67E5\u8BE2\u9644\u8FD1\u7684\u5546\u5E97\u3002\u7531\u4E8E\u672C\u6B21\u9879\u76EE\u89C4\u6A21\u53D7\u9650\uFF0C\u6545\u7528\u5206\u9875\u8BED\u53E5\u67E5\u8BE2\u9644\u8FD1\u5546\u5E97\u4FE1\u606F\u3002\u5728\u5B9E\u9645\u7684\u9879\u76EE\u91CC\uFF0C\u9700\u8981\u83B7\u53D6\u5F53\u524D\u4F4D\u7F6E\u4FE1\u606F\uFF0C\u624D\u80FD\u5B9E\u73B0\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ShopService</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token class-name">IShopMapper</span> shopMapper<span class="token punctuation">;</span>
        <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Shop</span><span class="token punctuation">&gt;</span></span> <span class="token function">getNearShops</span><span class="token punctuation">(</span><span class="token class-name">Long</span> userId<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Shop</span><span class="token punctuation">&gt;</span></span> shops <span class="token operator">=</span>  shopMapper<span class="token punctuation">.</span><span class="token function">getNearShops</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> shops<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="shopcontroller-java" tabindex="-1"><a class="header-anchor" href="#shopcontroller-java" aria-hidden="true">#</a> ShopController.java</h3><p>\u6700\u540E\u6211\u4EEC\u518D\u7F16\u5199\u4E00\u4E2A\u5BF9\u5916\u63D0\u4F9B Rest \u670D\u52A1\u7684\u63A5\u53E3\u7C7B ShopController\u3002\u63A5\u6536\u5230\u7528\u6237\u53D1\u51FA\u7684\u8BF7\u6C42\uFF0C\u628A\u9644\u8FD1\u5546\u5E97\u7684\u4FE1\u606F\u4EE5 JSON \u7684\u5F62\u5F0F\u8FD4\u56DE\u7ED9\u5BA2\u6237\u7AEF\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@RestController</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ShopController</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token class-name">ShopService</span> shopService<span class="token punctuation">;</span>
      <span class="token annotation punctuation">@GetMapping</span> <span class="token punctuation">(</span><span class="token string">&quot;/showNearShops&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> <span class="token function">showShops</span><span class="token punctuation">(</span><span class="token class-name">Long</span> userId<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Shop</span><span class="token punctuation">&gt;</span></span> shops <span class="token operator">=</span> shopService<span class="token punctuation">.</span><span class="token function">getNearShops</span><span class="token punctuation">(</span>userId<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>shops<span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;state&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;success&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;data&quot;</span><span class="token punctuation">,</span>shops<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>
            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;state&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;error&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;message&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;\u6CA1\u6709\u6570\u636E&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> map<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_2-\u8FDB\u5165\u5546\u5E97" tabindex="-1"><a class="header-anchor" href="#_2-\u8FDB\u5165\u5546\u5E97" aria-hidden="true">#</a> 2-\u8FDB\u5165\u5546\u5E97</h2><p>\u6B64\u529F\u80FD\u53EA\u5BF9\u5916\u63D0\u4F9B RESTful \u670D\u52A1\u63A5\u53E3\uFF0C\u4E0D\u8003\u8651\u9875\u9762\u3002\u7528\u6237\u53D1\u51FA\u4E00\u4E2A HTTP \u8BF7\u6C42\uFF0C\u4F20\u5165\u4E00\u4E2A\u53C2\u6570 shopId \u3002\u6839\u636E shopId \u67E5\u8BE2\u6B64\u5546\u5E97\u4E0B\u7684\u6240\u6709\u5546\u54C1\u3002\u5E76\u628A\u67E5\u8BE2\u7684\u7ED3\u679C\u4EE5 JSON \u7684\u5F62\u5F0F\uFF0C\u54CD\u5E94\u7ED9\u5BA2\u6237\u7AEF\u3002\u5B8C\u6210\u8BD5\u9A8C\u540E\uFF0C\u7528 Postman \u8FDB\u884C\u6D4B\u8BD5\u3002</p><h3 id="iproductmapper-java" tabindex="-1"><a class="header-anchor" href="#iproductmapper-java" aria-hidden="true">#</a> IProductMapper.java</h3><p>\u4E0B\u9762\u4E3A\u6839\u636E shopId \u67E5\u8BE2\u5546\u54C1\u7684 Mapper \u63A5\u53E3\u7C7B</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IProductMapper</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Select</span><span class="token punctuation">(</span><span class="token string">&quot;select productId,expressLimit,expressPrice,poductImgUrl,productName,shopId,&quot;</span> <span class="token operator">+</span>
            <span class="token string">&quot;sales,stock,oldprice,price,unit,categoryId  from t_product where shopId = #{shopId}&quot;</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@Results</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>property <span class="token operator">=</span> <span class="token string">&quot;category&quot;</span><span class="token punctuation">,</span>column <span class="token operator">=</span> <span class="token string">&quot;categoryId&quot;</span><span class="token punctuation">,</span>
                    one <span class="token operator">=</span> <span class="token annotation punctuation">@One</span><span class="token punctuation">(</span>select <span class="token operator">=</span> <span class="token string">&quot;com.mapper.ICategoryMapper.getCategory&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Product</span><span class="token punctuation">&gt;</span></span> <span class="token function">getProductsByShopId</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;shopId&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Long</span> shopId<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="icategorymapper-java-1" tabindex="-1"><a class="header-anchor" href="#icategorymapper-java-1" aria-hidden="true">#</a> ICategoryMapper.java</h3><p>\u4E0B\u9762\u4E3A\u67E5\u8BE2\u5546\u54C1\u6240\u5C5E\u7C7B\u522B\u7684\u63A5\u53E3\u7C7B\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">ICategoryMapper</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Select</span><span class="token punctuation">(</span><span class="token string">&quot;select * from t_category where categoryId = #{categoryId}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">Category</span> <span class="token function">getCategory</span><span class="token punctuation">(</span><span class="token class-name">Long</span> categoryId<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="ifollowmapper-java" tabindex="-1"><a class="header-anchor" href="#ifollowmapper-java" aria-hidden="true">#</a> IFollowMapper.java</h3><p>\u6211\u4EEC\u8FD8\u9700\u8981\u4E00\u4E2A\u67E5\u8BE2\u6B64\u5546\u5E97\u6709\u6CA1\u6709\u88AB\u767B\u5F55\u8005\u5173\u6CE8\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IFollowMapper</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Select</span><span class="token punctuation">(</span><span class="token string">&quot;select count(followId) from t_follow where userId = #{userId} and shopId = #{shopId}&quot;</span><span class="token punctuation">)</span>
    <span class="token class-name">Integer</span> <span class="token function">getRowSize</span><span class="token punctuation">(</span>
            <span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;userId&quot;</span><span class="token punctuation">)</span>
            <span class="token class-name">Long</span> userId<span class="token punctuation">,</span>
            <span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;shopId&quot;</span><span class="token punctuation">)</span>
            <span class="token class-name">Long</span> shopId<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="followservice-java" tabindex="-1"><a class="header-anchor" href="#followservice-java" aria-hidden="true">#</a> FollowService.java</h3><p>\u67E5\u8BE2\u5546\u5E97\u6709\u6CA1\u6709\u88AB\u767B\u5F55\u8005\u5173\u6CE8\u7684\u4E1A\u52A1\u5904\u7406\u7C7B\u3002\u91CC\u9762\u63D0\u4F9B\u4E00\u4E2A\u4E1A\u52A1\u65B9\u6CD5 isFollowEd\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FollowService</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token class-name">IFollowMapper</span> followMapper<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token class-name">Boolean</span> <span class="token function">isFollowEd</span><span class="token punctuation">(</span><span class="token class-name">Long</span> userId<span class="token punctuation">,</span> <span class="token class-name">Long</span> shopId<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>userId <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token class-name">Integer</span> rowSize <span class="token operator">=</span> followMapper<span class="token punctuation">.</span><span class="token function">getRowSize</span><span class="token punctuation">(</span>userId<span class="token punctuation">,</span>shopId<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> rowSize <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="productservice-java" tabindex="-1"><a class="header-anchor" href="#productservice-java" aria-hidden="true">#</a> ProductService.java</h3><p>\u6839\u636E shopId \u67E5\u8BE2\u5546\u54C1\u7684\u4E1A\u52A1\u5904\u7406\u7C7B\u3002\u91CC\u9762\u63D0\u4F9B\u4E00\u4E2A\u4E1A\u52A1\u65B9\u6CD5 getProductsByShopId\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ProductService</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token class-name">IProductMapper</span> productMapper<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Product</span><span class="token punctuation">&gt;</span></span> <span class="token function">getProductsByShopId</span><span class="token punctuation">(</span><span class="token class-name">Long</span> shopId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> productMapper<span class="token punctuation">.</span><span class="token function">getProductsByShopId</span><span class="token punctuation">(</span>shopId<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="productcontroller-java" tabindex="-1"><a class="header-anchor" href="#productcontroller-java" aria-hidden="true">#</a> ProductController.java</h3><p>\u8FD9\u662F\u4E00\u4E2A\u5BF9\u5916\u63D0\u4F9B Rest \u670D\u52A1\u7684\u63A5\u53E3\u7C7B\uFF0C\u63A5\u6536\u7528\u6237\u8BF7\u6C42\u3002\u4F20\u5165\u4E24\u4E2A\u53C2\u6570\uFF0C\u4E00\u4E2A\u662F shopId\uFF1A\u4F5C\u4E3A\u67E5\u8BE2\u6761\u4EF6\u3002\u4E00\u4E2A\u662F userId\uFF1A\u53EF\u9009\u7684\u53C2\u6570\uFF0C\u5F53\u7528\u6237\u767B\u5F55\u65F6\u4F20\u5165 userId\uFF0C\u7528\u6765\u5224\u65AD\u6B64\u7528\u6237\u6709\u6CA1\u6709\u5173\u6CE8\u6B64\u5546\u5E97\u3002\u628A\u67E5\u8BE2\u51FA\u6765\u7684\u5546\u54C1\u4FE1\u606F\u4EE5 JSON \u7684\u5F62\u5F0F\u54CD\u5E94\u7ED9\u5BA2\u6237\u7AEF\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@RestController</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ProductController</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token class-name">ProductService</span> productService<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token class-name">FollowService</span> followService<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/showProductsByShopId&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> <span class="token function">showProductsByShopId</span><span class="token punctuation">(</span><span class="token class-name">Long</span> shopId<span class="token punctuation">,</span><span class="token class-name">Long</span> userId<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">Boolean</span> b <span class="token operator">=</span>  followService<span class="token punctuation">.</span><span class="token function">isFollowEd</span><span class="token punctuation">(</span>userId<span class="token punctuation">,</span>shopId<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Product</span><span class="token punctuation">&gt;</span></span> products <span class="token operator">=</span> productService<span class="token punctuation">.</span><span class="token function">getProductsByShopId</span><span class="token punctuation">(</span>shopId<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>products<span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;state&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;success&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;data&quot;</span><span class="token punctuation">,</span>products<span class="token punctuation">)</span><span class="token punctuation">;</span>
            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;isFollowEd&quot;</span><span class="token punctuation">,</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>
            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;state&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;error&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;messag&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;\u6CA1\u6709\u6570\u636E&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> map<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_3-\u5546\u5E97\u8BE6\u60C5" tabindex="-1"><a class="header-anchor" href="#_3-\u5546\u5E97\u8BE6\u60C5" aria-hidden="true">#</a> 3-\u5546\u5E97\u8BE6\u60C5</h2><p>\u6B64\u529F\u80FD\u53EA\u5BF9\u5916\u63D0\u4F9B RESTful \u670D\u52A1\u63A5\u53E3\uFF0C\u4E0D\u8003\u8651\u9875\u9762\u3002\u7528\u6237\u53D1\u51FA\u4E00\u4E2A HTTP \u8BF7\u6C42\uFF0C\u4F20\u5165\u4E24\u4E2A\u53C2\u6570\u3002</p><p>shopId \uFF1A\u6839\u636E shopId \u67E5\u8BE2\u6B64\u5546\u5E97\u4E0B\u7684\u6240\u6709\u5546\u54C1\uFF0C</p><p>userId\uFF1A\u7528\u6765\u5224\u65AD\u6B64\u7528\u6237\u662F\u5426\u5173\u6CE8\u6B64\u5546\u5E97\u3002</p><p>\u5E76\u628A\u67E5\u8BE2\u7684\u7ED3\u679C\u4EE5 JSON \u7684\u5F62\u5F0F\uFF0C\u54CD\u5E94\u7ED9\u5BA2\u6237\u7AEF\u3002</p><p>\u5B8C\u6210\u8BD5\u9A8C\u540E\uFF0C\u7528 Postman \u8FDB\u884C\u6D4B\u8BD5\u3002</p><h3 id="icategorymapper-java-2" tabindex="-1"><a class="header-anchor" href="#icategorymapper-java-2" aria-hidden="true">#</a> ICategoryMapper.java</h3><p>\u4E0B\u9762\u4E3A\u67E5\u8BE2\u5546\u5E97\u6240\u5C5E\u7C7B\u522B\u7684\u63A5\u53E3\u7C7B\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">ICategoryMapper</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Select</span><span class="token punctuation">(</span><span class="token string">&quot;select * from t_category where categoryId = #{categoryId}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">Category</span> <span class="token function">getCategory</span><span class="token punctuation">(</span><span class="token class-name">Long</span> categoryId<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="ifollowmapper-java-1" tabindex="-1"><a class="header-anchor" href="#ifollowmapper-java-1" aria-hidden="true">#</a> IFollowMapper.java</h3><p>\u67E5\u8BE2\u6B64\u5546\u5E97\u6709\u6CA1\u6709\u88AB\u767B\u5F55\u8005\u5173\u6CE8\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IFollowMapper</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Select</span><span class="token punctuation">(</span><span class="token string">&quot;select count(followId) from t_follow where userId = #{userId} and shopId = #{shopId}&quot;</span><span class="token punctuation">)</span>
    <span class="token class-name">Integer</span> <span class="token function">getRowSize</span><span class="token punctuation">(</span>
            <span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;userId&quot;</span><span class="token punctuation">)</span>
            <span class="token class-name">Long</span> userId<span class="token punctuation">,</span>
            <span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;shopId&quot;</span><span class="token punctuation">)</span>
            <span class="token class-name">Long</span> shopId<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="iproductmapper-java-1" tabindex="-1"><a class="header-anchor" href="#iproductmapper-java-1" aria-hidden="true">#</a> IProductMapper.java</h3><p>\u4E0B\u9762\u4E3A\u6839\u636E shopId \u67E5\u8BE2\u5546\u54C1\u7684 Mapper \u63A5\u53E3\u7C7B\uFF0C\u4F9B\u540C\u5B66\u4EEC\u53C2\u8003\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IProductMapper</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Select</span><span class="token punctuation">(</span><span class="token string">&quot;select productId,expressLimit,expressPrice,poductImgUrl,productName,shopId,&quot;</span> <span class="token operator">+</span>
            <span class="token string">&quot;sales,stock,oldprice,price,unit,categoryId  from t_product where shopId = #{shopId}&quot;</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@Results</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>property <span class="token operator">=</span> <span class="token string">&quot;category&quot;</span><span class="token punctuation">,</span>column <span class="token operator">=</span> <span class="token string">&quot;categoryId&quot;</span><span class="token punctuation">,</span>
                    one <span class="token operator">=</span> <span class="token annotation punctuation">@One</span><span class="token punctuation">(</span>select <span class="token operator">=</span> <span class="token string">&quot;com.mapper.ICategoryMapper.getCategory&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Product</span><span class="token punctuation">&gt;</span></span> <span class="token function">getProductsByShopId</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;shopId&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Long</span> shopId<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="ishopmapper-java-1" tabindex="-1"><a class="header-anchor" href="#ishopmapper-java-1" aria-hidden="true">#</a> IShopMapper.java</h3><p>\u6839\u636E shopId \u67E5\u8BE2\u5546\u5E97\u7684\u63A5\u53E3\u7C7B\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IShopMapper</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Select</span><span class="token punctuation">(</span><span class="token string">&quot;select * from t_shop where shopId = #{shopId}&quot;</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@Results</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                <span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>property <span class="token operator">=</span> <span class="token string">&quot;category&quot;</span><span class="token punctuation">,</span>column <span class="token operator">=</span> <span class="token string">&quot;categoryId&quot;</span><span class="token punctuation">,</span>
                        one <span class="token operator">=</span> <span class="token annotation punctuation">@One</span><span class="token punctuation">(</span>select <span class="token operator">=</span> <span class="token string">&quot;com.mapper.ICategoryMapper.getCategory&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>property <span class="token operator">=</span> <span class="token string">&quot;products&quot;</span><span class="token punctuation">,</span>column <span class="token operator">=</span> <span class="token string">&quot;shopId&quot;</span><span class="token punctuation">,</span>
                        many <span class="token operator">=</span> <span class="token annotation punctuation">@Many</span><span class="token punctuation">(</span>select <span class="token operator">=</span> <span class="token string">&quot;com.mapper.IProductMapper.getProductsByShopId&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>property <span class="token operator">=</span> <span class="token string">&quot;shopId&quot;</span><span class="token punctuation">,</span>column <span class="token operator">=</span> <span class="token string">&quot;shopId&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token class-name">Shop</span> <span class="token function">getShop</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;shopId&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Long</span> shopId<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="followservice-java-1" tabindex="-1"><a class="header-anchor" href="#followservice-java-1" aria-hidden="true">#</a> FollowService.java</h3><p>\u67E5\u8BE2\u5546\u5E97\u6709\u6CA1\u6709\u88AB\u767B\u5F55\u8005\u5173\u6CE8\u7684\u4E1A\u52A1\u5904\u7406\u7C7B\u3002\u91CC\u9762\u63D0\u4F9B\u4E00\u4E2A\u4E1A\u52A1\u65B9\u6CD5 isFollowEd\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FollowService</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token class-name">IFollowMapper</span> followMapper<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token class-name">Boolean</span> <span class="token function">isFollowEd</span><span class="token punctuation">(</span><span class="token class-name">Long</span> userId<span class="token punctuation">,</span> <span class="token class-name">Long</span> shopId<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>userId <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token class-name">Integer</span> rowSize <span class="token operator">=</span> followMapper<span class="token punctuation">.</span><span class="token function">getRowSize</span><span class="token punctuation">(</span>userId<span class="token punctuation">,</span>shopId<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> rowSize <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="shopservice-java-1" tabindex="-1"><a class="header-anchor" href="#shopservice-java-1" aria-hidden="true">#</a> ShopService.java</h3><p>\u6839\u636E shopId \u67E5\u8BE2\u5546\u5E97\u7684\u4E1A\u52A1\u5904\u7406\u7C7B\u3002\u91CC\u9762\u63D0\u4F9B\u4E00\u4E2A\u4E1A\u52A1\u65B9\u6CD5 getShop\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ShopService</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token class-name">IShopMapper</span> shopMapper<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Shop</span> <span class="token function">getShop</span><span class="token punctuation">(</span><span class="token class-name">Long</span> shopId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Shop</span> shop <span class="token operator">=</span> shopMapper<span class="token punctuation">.</span><span class="token function">getShop</span><span class="token punctuation">(</span>shopId<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span>  shop<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="shopcontroller-java-1" tabindex="-1"><a class="header-anchor" href="#shopcontroller-java-1" aria-hidden="true">#</a> ShopController.java</h3><p>\u8FD9\u662F\u4E00\u4E2A\u5BF9\u5916\u63D0\u4F9B Rest \u670D\u52A1\u7684\u63A5\u53E3\u7C7B\uFF0C\u63A5\u6536\u7528\u6237\u8BF7\u6C42\u3002\u4F20\u5165\u4E24\u4E2A\u53C2\u6570\uFF0C\u4E00\u4E2A\u662F shopId\uFF1A\u4F5C\u4E3A\u67E5\u8BE2\u6761\u4EF6\u3002\u4E00\u4E2A\u662F userId\uFF1A\u53EF\u9009\u7684\u53C2\u6570\uFF0C\u5F53\u7528\u6237\u767B\u5F55\u65F6\u4F20\u5165 userId\uFF0C\u7528\u6765\u5224\u65AD\u6B64\u7528\u6237\u6709\u6CA1\u6709\u5173\u6CE8\u6B64\u5546\u5E97\u3002\u628A\u67E5\u8BE2\u51FA\u6765\u7684\u5546\u54C1\u4FE1\u606F\u4EE5 JSON \u7684\u5F62\u5F0F\u54CD\u5E94\u7ED9\u5BA2\u6237\u7AEF\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@RestController</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ShopController</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token class-name">ShopService</span> shopService<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token class-name">FollowService</span> followService<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/showShopByShopId&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> <span class="token function">showShopByShopId</span><span class="token punctuation">(</span><span class="token class-name">Long</span> shopId<span class="token punctuation">,</span><span class="token class-name">Long</span> userId<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">Boolean</span> b <span class="token operator">=</span>  followService<span class="token punctuation">.</span><span class="token function">isFollowEd</span><span class="token punctuation">(</span>userId<span class="token punctuation">,</span>shopId<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Shop</span> shop <span class="token operator">=</span> shopService<span class="token punctuation">.</span><span class="token function">getShop</span><span class="token punctuation">(</span>shopId<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>shop<span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;state&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;success&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;data&quot;</span><span class="token punctuation">,</span>shop<span class="token punctuation">)</span><span class="token punctuation">;</span>
            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;isFollowEd&quot;</span><span class="token punctuation">,</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>
            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;state&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;error&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;messag&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;\u6CA1\u6709\u6570\u636E&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">return</span> map<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_4-\u70ED\u95E8\u5546\u54C1" tabindex="-1"><a class="header-anchor" href="#_4-\u70ED\u95E8\u5546\u54C1" aria-hidden="true">#</a> 4-\u70ED\u95E8\u5546\u54C1</h2><p>\u5546\u54C1\u662F\u5426\u70ED\u95E8\uFF0C\u7528\u9500\u552E\u989D\u4F5C\u4E3A\u9650\u5236\u6761\u4EF6\u3002\u770B\u770B\u6708\u9500\u552E\u989D\u662F\u5426\u8DB3\u591F\u5927\u3002\u6B64\u529F\u80FD\u53EA\u5BF9\u5916\u63D0\u4F9B RESTful \u670D\u52A1\u63A5\u53E3\uFF0C\u4E0D\u8003\u8651\u9875\u9762\u3002\u7528\u6237\u53D1\u51FA\u4E00\u4E2A HTTP \u8BF7\u6C42\uFF0C\u628A\u67E5\u8BE2\u7684\u7ED3\u679C\u4EE5 JSON \u7684\u5F62\u5F0F\uFF0C\u54CD\u5E94\u7ED9\u5BA2\u6237\u7AEF\u3002\u5B8C\u6210\u8BD5\u9A8C\u540E\uFF0C\u7528 Postman \u8FDB\u884C\u6D4B\u8BD5\u3002</p><h3 id="iproductmapper-java-2" tabindex="-1"><a class="header-anchor" href="#iproductmapper-java-2" aria-hidden="true">#</a> IProductMapper.java</h3><p>\u4E0B\u9762\u4E3A\u6839\u636E shopId \u67E5\u8BE2\u5546\u54C1\u7684 Mapper \u63A5\u53E3\u7C7B\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IProductMapper</span> <span class="token punctuation">{</span>
  <span class="token annotation punctuation">@Select</span><span class="token punctuation">(</span><span class="token string">&quot;select productId,expressLimit,expressPrice,poductImgUrl,productName,shopId,&quot;</span> <span class="token operator">+</span>
          <span class="token string">&quot;sales,stock,oldprice,price,unit,categoryId from t_product where sales &gt; #{sales}&quot;</span><span class="token punctuation">)</span>
  <span class="token annotation punctuation">@Results</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
          <span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>property <span class="token operator">=</span> <span class="token string">&quot;category&quot;</span><span class="token punctuation">,</span>column <span class="token operator">=</span> <span class="token string">&quot;categoryId&quot;</span><span class="token punctuation">,</span>one <span class="token operator">=</span> <span class="token annotation punctuation">@One</span><span class="token punctuation">(</span>select <span class="token operator">=</span> <span class="token string">&quot;com.mapper.ICategoryMapper.getCategory&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Product</span><span class="token punctuation">&gt;</span></span> <span class="token function">getProductsBySales</span><span class="token punctuation">(</span><span class="token keyword">int</span> sales<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="icategorymapper-java-3" tabindex="-1"><a class="header-anchor" href="#icategorymapper-java-3" aria-hidden="true">#</a> ICategoryMapper.java</h3><p>\u4E0B\u9762\u4E3A\u67E5\u8BE2\u5546\u54C1\u6240\u5C5E\u7C7B\u522B\u7684\u63A5\u53E3\u7C7B\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">ICategoryMapper</span> <span class="token punctuation">{</span>
  <span class="token annotation punctuation">@Select</span><span class="token punctuation">(</span><span class="token string">&quot;select * from t_category where categoryId = #{categoryId}&quot;</span><span class="token punctuation">)</span>
  <span class="token keyword">public</span> <span class="token class-name">Category</span> <span class="token function">getCategory</span><span class="token punctuation">(</span><span class="token class-name">Long</span> categoryId<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="productservice-java-1" tabindex="-1"><a class="header-anchor" href="#productservice-java-1" aria-hidden="true">#</a> ProductService.java</h3><p>\u67E5\u8BE2\u5546\u54C1\u7684\u4E1A\u52A1\u5904\u7406\u7C7B\u3002\u91CC\u9762\u63D0\u4F9B\u4E00\u4E2A\u4E1A\u52A1\u65B9\u6CD5 getHotProducts\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ProductService</span> <span class="token punctuation">{</span>
  <span class="token annotation punctuation">@Autowired</span>
  <span class="token class-name">IProductMapper</span> productMapper<span class="token punctuation">;</span>
  <span class="token doc-comment comment">/**
   * \u70ED\u95E8\u5546\u54C1
   * <span class="token keyword">@return</span> \u5546\u54C1
   */</span>
  <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Product</span><span class="token punctuation">&gt;</span></span> <span class="token function">getHotProducts</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">//\u8BA1\u7B97\u6708\u9500\u552E\u91CF\u5927\u4E8E500\u7684\u4E3A\u70ED\u95E8\u4EA7\u54C1</span>
     <span class="token keyword">return</span>  productMapper<span class="token punctuation">.</span><span class="token function">getProductsBySales</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="productcontroller-java-1" tabindex="-1"><a class="header-anchor" href="#productcontroller-java-1" aria-hidden="true">#</a> ProductController.java</h3><p>\u8FD9\u662F\u4E00\u4E2A\u5BF9\u5916\u63D0\u4F9B Rest \u670D\u52A1\u7684\u63A5\u53E3\u7C7B\u3002\u63A5\u6536\u7528\u6237\u8BF7\u6C42\uFF0C\u628A\u67E5\u8BE2\u51FA\u6765\u7684\u70ED\u95E8\u5546\u54C1\u4FE1\u606F\u4EE5 JSON \u7684\u5F62\u5F0F\u54CD\u5E94\u7ED9\u5BA2\u6237\u7AEF\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@RestController</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ProductController</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token class-name">ProductService</span> productService<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/showHotProducts&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> <span class="token function">showHotProducts</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Product</span><span class="token punctuation">&gt;</span></span> products <span class="token operator">=</span> productService<span class="token punctuation">.</span><span class="token function">getHotProducts</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>products<span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;state&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;success&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;data&quot;</span><span class="token punctuation">,</span>products<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>
            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;state&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;error&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;messag&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;\u6CA1\u6709\u6570\u636E&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> map<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_5-\u67E5\u8BE2\u5173\u6CE8" tabindex="-1"><a class="header-anchor" href="#_5-\u67E5\u8BE2\u5173\u6CE8" aria-hidden="true">#</a> 5-\u67E5\u8BE2\u5173\u6CE8</h2><p>\u5BF9\u5916\u63D0\u4F9B Rest \u670D\u52A1\u7684\u63A5\u53E3\uFF0C\u5B9E\u73B0\u6211\u7684\u5173\u6CE8\u3002\u7528\u6237\u8BF7\u6C42\u63A5\u53E3\u5E76\u4F20\u5165\u767B\u5F55\u7684 userId\uFF0C\u67E5\u8BE2\u6B64\u7528\u6237\u5173\u6CE8\u7684\u6240\u6709\u5546\u5E97\u4FE1\u606F\u3002\u67E5\u8BE2\u7ED3\u679C\u4EE5 JSON \u7684\u5F62\u5F0F\uFF0C\u54CD\u5E94\u7ED9\u5BA2\u6237\u7AEF\u3002\u5B8C\u6210\u8BD5\u9A8C\u540E\uFF0C\u7528 Postman \u8FDB\u884C\u6D4B\u8BD5\u3002</p><h3 id="icategorymapper-java-4" tabindex="-1"><a class="header-anchor" href="#icategorymapper-java-4" aria-hidden="true">#</a> ICategoryMapper.java</h3><p>\u5173\u6CE8\u529F\u80FD\u5173\u8054\u7684 Mapper \u63A5\u53E3\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">ICategoryMapper</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Select</span><span class="token punctuation">(</span><span class="token string">&quot;select * from t_category where categoryId = #{categoryId}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">Category</span> <span class="token function">getCategory</span><span class="token punctuation">(</span><span class="token class-name">Long</span> categoryId<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="ifollowmapper-java-2" tabindex="-1"><a class="header-anchor" href="#ifollowmapper-java-2" aria-hidden="true">#</a> IFollowMapper.java</h3><p>\u901A\u8FC7\u767B\u5F55\u8005\u67E5\u8BE2\u5173\u6CE8\u7684\u4FE1\u606F\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IFollowMapper</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Select</span><span class="token punctuation">(</span><span class="token string">&quot;select * 	from t_follow where userId=#{userId}&quot;</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@Results</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>property <span class="token operator">=</span> <span class="token string">&quot;shop&quot;</span><span class="token punctuation">,</span>column <span class="token operator">=</span> <span class="token string">&quot;shopId&quot;</span><span class="token punctuation">,</span>
                    one <span class="token operator">=</span> <span class="token annotation punctuation">@One</span><span class="token punctuation">(</span>select <span class="token operator">=</span> <span class="token string">&quot;com.mapper.IShopMapper.getShop&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Follow</span><span class="token punctuation">&gt;</span></span> <span class="token function">getFollowsByUserId</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;userId&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Long</span> userId<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="ishopmapper-java-2" tabindex="-1"><a class="header-anchor" href="#ishopmapper-java-2" aria-hidden="true">#</a> IShopMapper.java</h3><p>\u6839\u636E shopId \u67E5\u8BE2\u5546\u5E97\u7684\u4E1A\u52A1\u5904\u7406\u7C7B\u3002\u91CC\u9762\u63D0\u4F9B\u4E00\u4E2A\u4E1A\u52A1\u65B9\u6CD5 getShop\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IShopMapper</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Select</span><span class="token punctuation">(</span><span class="token string">&quot;select * from t_shop where shopId = #{shopId}&quot;</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@Results</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                <span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>property <span class="token operator">=</span> <span class="token string">&quot;category&quot;</span><span class="token punctuation">,</span>column <span class="token operator">=</span> <span class="token string">&quot;categoryId&quot;</span><span class="token punctuation">,</span>
                        one <span class="token operator">=</span> <span class="token annotation punctuation">@One</span><span class="token punctuation">(</span>select <span class="token operator">=</span> <span class="token string">&quot;com.mapper.ICategoryMapper.getCategory&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>property <span class="token operator">=</span> <span class="token string">&quot;shopId&quot;</span><span class="token punctuation">,</span>column <span class="token operator">=</span> <span class="token string">&quot;shopId&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token class-name">Shop</span> <span class="token function">getShop</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;shopId&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Long</span> shopId<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="followservice-java-2" tabindex="-1"><a class="header-anchor" href="#followservice-java-2" aria-hidden="true">#</a> FollowService.java</h3><p>\u6839\u636E\u767B\u5F55\u8005 userId \u67E5\u8BE2\u5173\u6CE8\u7684\u4FE1\u606F\u3002\u91CC\u9762\u63D0\u4F9B\u4E00\u4E2A\u4E1A\u52A1\u65B9\u6CD5 getFollowsByUserId\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FollowService</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token class-name">IFollowMapper</span> followMapper<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Follow</span><span class="token punctuation">&gt;</span></span> <span class="token function">getFollowsByUserId</span><span class="token punctuation">(</span><span class="token class-name">Long</span> userId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> followMapper<span class="token punctuation">.</span><span class="token function">getFollowsByUserId</span><span class="token punctuation">(</span>userId<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="followcontroller-java" tabindex="-1"><a class="header-anchor" href="#followcontroller-java" aria-hidden="true">#</a> FollowController.java</h3><p>\u8FD9\u662F\u4E00\u4E2A\u5BF9\u5916\u63D0\u4F9B Rest \u670D\u52A1\u7684\u63A5\u53E3\u7C7B\uFF0C\u63A5\u6536\u7528\u6237\u8BF7\u6C42\u3002\u4F20\u5165\u4E00\u4E2A userId\uFF0C\u67E5\u8BE2\u6B64\u7528\u6237\u5173\u6CE8\u7684\u4FE1\u606F\u3002\u628A\u67E5\u8BE2\u51FA\u6765\u7684\u5546\u54C1\u4FE1\u606F\u4EE5 JSON \u7684\u5F62\u5F0F\u54CD\u5E94\u7ED9\u5BA2\u6237\u7AEF\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>
<span class="token annotation punctuation">@RestController</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FollowController</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token class-name">FollowService</span> followService<span class="token punctuation">;</span>
    <span class="token comment">//\u6211\u7684\u5173\u6CE8</span>
    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/showMyFollows&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> <span class="token function">showMyFollows</span><span class="token punctuation">(</span><span class="token class-name">Long</span> userId<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Follow</span><span class="token punctuation">&gt;</span></span> follows <span class="token operator">=</span> followService<span class="token punctuation">.</span><span class="token function">getFollowsByUserId</span><span class="token punctuation">(</span>userId<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>follows<span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;state&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;success&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;data&quot;</span><span class="token punctuation">,</span>follows<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>
            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;state&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;error&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;message&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;\u6CA1\u6709\u6570\u636E&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> map<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_6-\u4FEE\u6539\u5173\u6CE8" tabindex="-1"><a class="header-anchor" href="#_6-\u4FEE\u6539\u5173\u6CE8" aria-hidden="true">#</a> 6-\u4FEE\u6539\u5173\u6CE8</h2><p>\u7F16\u5199\u4E24\u4E2A Rest \u670D\u52A1\u7684\u63A5\u53E3\uFF0C\u4E00\u4E2A\u662F\u6DFB\u52A0\u5173\u6CE8\uFF0C\u4E5F\u5C31\u662F\u4E00\u4E2A\u7528\u6237\u5173\u6CE8\u67D0\u4E2A\u5546\u5E97\uFF0C\u4E00\u4E2A\u662F\u53D6\u6D88\u5173\u6CE8\uFF0C\u5C31\u662F\u628A\u5DF2\u7ECF\u5173\u6CE8\u7684\u5546\u5E97\u7ED9\u53D6\u6D88\u6389\u3002\u5B8C\u6210\u5B9E\u9A8C\u7528 Postman \u8FDB\u884C\u6D4B\u8BD5\u3002</p><h3 id="ifollowmapper-java-3" tabindex="-1"><a class="header-anchor" href="#ifollowmapper-java-3" aria-hidden="true">#</a> IFollowMapper.java</h3><p>\u64CD\u4F5C\u6570\u636E\u5E93\u7684 Mapper \u63A5\u53E3\u7C7B\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IFollowMapper</span> <span class="token punctuation">{</span>

  <span class="token annotation punctuation">@Select</span><span class="token punctuation">(</span><span class="token string">&quot;select count(followId) from t_follow where userId = #{userId} and shopId = #{shopId}&quot;</span><span class="token punctuation">)</span>
  <span class="token class-name">Integer</span> <span class="token function">getRowSize</span><span class="token punctuation">(</span>
          <span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;userId&quot;</span><span class="token punctuation">)</span>
          <span class="token class-name">Long</span> userId<span class="token punctuation">,</span>
          <span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;shopId&quot;</span><span class="token punctuation">)</span>
          <span class="token class-name">Long</span> shopId<span class="token punctuation">)</span><span class="token punctuation">;</span>


  <span class="token annotation punctuation">@Insert</span><span class="token punctuation">(</span><span class="token string">&quot;insert into t_follow(userId,shopId) values(#{userId},#{shopId})&quot;</span><span class="token punctuation">)</span>
  <span class="token class-name">Boolean</span> <span class="token function">saveFollow</span><span class="token punctuation">(</span>
          <span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;userId&quot;</span><span class="token punctuation">)</span>
                  <span class="token class-name">Long</span> userId<span class="token punctuation">,</span>
          <span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;shopId&quot;</span><span class="token punctuation">)</span>
                  <span class="token class-name">Long</span> shopId<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token annotation punctuation">@Delete</span><span class="token punctuation">(</span><span class="token string">&quot;delete from t_follow where userId = #{userId} and shopId = #{shopId}&quot;</span><span class="token punctuation">)</span>
  <span class="token class-name">Integer</span> <span class="token function">deleteFollow</span><span class="token punctuation">(</span>
          <span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;userId&quot;</span><span class="token punctuation">)</span>
                  <span class="token class-name">Long</span> userId<span class="token punctuation">,</span>
          <span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;shopId&quot;</span><span class="token punctuation">)</span>
                  <span class="token class-name">Long</span> shopId<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="followservice-java-3" tabindex="-1"><a class="header-anchor" href="#followservice-java-3" aria-hidden="true">#</a> FollowService.java</h3><p>\u5173\u6CE8\u548C\u53D6\u6D88\u5173\u6CE8\u7684\u4E1A\u52A1\u5904\u7406\u7C7B\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FollowService</span> <span class="token punctuation">{</span>
  <span class="token annotation punctuation">@Autowired</span>
  <span class="token class-name">IFollowMapper</span> followMapper<span class="token punctuation">;</span>


  <span class="token keyword">public</span> <span class="token class-name">Boolean</span> <span class="token function">saveFollow</span><span class="token punctuation">(</span><span class="token class-name">Long</span> userId<span class="token punctuation">,</span> <span class="token class-name">Long</span> shopId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">//\u5224\u65AD\u6B64\u7528\u6237\u662F\u5426\u5DF2\u7ECF\u5173\u6CE8\u6B64\u5546\u94FA</span>
      <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">isFollowEd</span><span class="token punctuation">(</span>userId<span class="token punctuation">,</span>shopId<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
          <span class="token keyword">return</span>  <span class="token boolean">false</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token class-name">Boolean</span> b <span class="token operator">=</span>  followMapper<span class="token punctuation">.</span><span class="token function">saveFollow</span><span class="token punctuation">(</span>userId<span class="token punctuation">,</span>shopId<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> b<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token class-name">Boolean</span> <span class="token function">isFollowEd</span><span class="token punctuation">(</span><span class="token class-name">Long</span> userId<span class="token punctuation">,</span> <span class="token class-name">Long</span> shopId<span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">if</span><span class="token punctuation">(</span>userId <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token class-name">Integer</span> rowSize <span class="token operator">=</span> followMapper<span class="token punctuation">.</span><span class="token function">getRowSize</span><span class="token punctuation">(</span>userId<span class="token punctuation">,</span>shopId<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> rowSize <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token class-name">Boolean</span> <span class="token function">deleteFollow</span><span class="token punctuation">(</span><span class="token class-name">Long</span> userId<span class="token punctuation">,</span> <span class="token class-name">Long</span> shopId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span>  followMapper<span class="token punctuation">.</span><span class="token function">deleteFollow</span><span class="token punctuation">(</span>userId<span class="token punctuation">,</span>shopId<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="followcontroller-java-1" tabindex="-1"><a class="header-anchor" href="#followcontroller-java-1" aria-hidden="true">#</a> FollowController.java</h3><p>\u4E24\u4E2A Rest \u670D\u52A1\u63A5\u53E3\u7C7B\u3002</p><p>\u5173\u6CE8\u548C\u53D6\u6D88\u5173\u6CE8\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@RestController</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FollowController</span> <span class="token punctuation">{</span>
  <span class="token annotation punctuation">@Autowired</span>
  <span class="token class-name">FollowService</span> followService<span class="token punctuation">;</span>
  <span class="token comment">//\u5173\u6CE8</span>
  <span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/saveFollow&quot;</span><span class="token punctuation">)</span>
  <span class="token keyword">public</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> <span class="token function">saveFollow</span><span class="token punctuation">(</span><span class="token class-name">Long</span> userId<span class="token punctuation">,</span><span class="token class-name">Long</span> shopId<span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token class-name">Boolean</span> b <span class="token operator">=</span>  followService<span class="token punctuation">.</span><span class="token function">saveFollow</span><span class="token punctuation">(</span>userId<span class="token punctuation">,</span>shopId<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">{</span>
          map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;state&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;success&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>
          map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;state&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;error&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;message&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;\u5173\u6CE8\u5931\u8D25&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">return</span> map<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>


  <span class="token comment">//\u53D6\u6D88\u5173\u6CE8</span>
  <span class="token annotation punctuation">@DeleteMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/deleteFollow&quot;</span><span class="token punctuation">)</span>
  <span class="token keyword">public</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> <span class="token function">deleteFollow</span><span class="token punctuation">(</span><span class="token class-name">Long</span> userId<span class="token punctuation">,</span><span class="token class-name">Long</span> shopId<span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token class-name">Boolean</span> b <span class="token operator">=</span>  followService<span class="token punctuation">.</span><span class="token function">deleteFollow</span><span class="token punctuation">(</span>userId<span class="token punctuation">,</span>shopId<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">{</span>
          map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;state&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;success&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>
          map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;state&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;error&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;message&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;\u53D6\u6D88\u5173\u6CE8\u5931\u8D25&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">return</span> map<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_7-\u5546\u5E97\u5206\u7C7B" tabindex="-1"><a class="header-anchor" href="#_7-\u5546\u5E97\u5206\u7C7B" aria-hidden="true">#</a> 7-\u5546\u5E97\u5206\u7C7B</h2><p>\u7528\u6237\u8BF7\u6C42\u63A5\u53E3\u65E0\u9700\u4F20\u4EFB\u4F55\u53C2\u6570\uFF0C\u67E5\u8BE2\u5546\u5E97\u7684\u5206\u7C7B\u4FE1\u606F\u3002\u7ED3\u679C\u6570\u636E\u4EE5 JSON \u7684\u5F62\u5F0F\uFF0C\u54CD\u5E94\u7ED9\u5BA2\u6237\u7AEF\u3002\u5B8C\u6210\u8BD5\u9A8C\u540E\uFF0C\u7528 Postman \u8FDB\u884C\u6D4B\u8BD5\u3002</p><h3 id="icategorymapper-java-5" tabindex="-1"><a class="header-anchor" href="#icategorymapper-java-5" aria-hidden="true">#</a> ICategoryMapper.java</h3><p>\u67E5\u8BE2\u5546\u5E97\u5206\u7C7B\u4FE1\u606F\u7684 Mapper \u63A5\u53E3\u7C7B\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">ICategoryMapper</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Select</span><span class="token punctuation">(</span><span class="token string">&quot;select * from t_category where parentId is null and categoryName= #{categoryName}&quot;</span><span class="token punctuation">)</span>
    <span class="token class-name">Category</span> <span class="token function">getCategoryByCategoryName</span><span class="token punctuation">(</span><span class="token class-name">String</span> categoryName<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Select</span><span class="token punctuation">(</span><span class="token string">&quot;select * from t_category where parentId = #{categoryId}&quot;</span><span class="token punctuation">)</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Category</span><span class="token punctuation">&gt;</span></span> <span class="token function">getCategorysByParentId</span><span class="token punctuation">(</span><span class="token class-name">Long</span> categoryId<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="categoryservice-java" tabindex="-1"><a class="header-anchor" href="#categoryservice-java" aria-hidden="true">#</a> CategoryService.java</h3><p>\u67E5\u8BE2\u5546\u5E97\u5206\u7C7B\u4FE1\u606F\u7684\u4E1A\u52A1\u5904\u7406\u7C7B\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CategoryService</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token class-name">ICategoryMapper</span> categoryMapper<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Category</span><span class="token punctuation">&gt;</span></span> <span class="token function">getShopCategorys</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Category</span> category <span class="token operator">=</span>  categoryMapper<span class="token punctuation">.</span><span class="token function">getCategoryByCategoryName</span><span class="token punctuation">(</span><span class="token string">&quot;\u5546\u5E97&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Long</span> categoryId <span class="token operator">=</span>  category<span class="token punctuation">.</span><span class="token function">getCategoryId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span>  categoryMapper<span class="token punctuation">.</span><span class="token function">getCategorysByParentId</span><span class="token punctuation">(</span>categoryId<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="categorycontroller-java" tabindex="-1"><a class="header-anchor" href="#categorycontroller-java" aria-hidden="true">#</a> CategoryController.java</h3><p>\u67E5\u8BE2\u5546\u5E97\u5206\u7C7B\u4FE1\u606F\u7684 Rest \u63A5\u53E3\u7C7B\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@RestController</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CategoryController</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token class-name">CategoryService</span> categoryService<span class="token punctuation">;</span>
    <span class="token comment">//\u67E5\u8BE2\u4E0D\u540C\u7C7B\u578B\u7684\u5546\u5E97\u4FE1\u606F \u7528\u4E8E\u9996\u9875\u663E\u793A</span>
    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/showShopCategorys&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> <span class="token function">showShopCategorys</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Category</span><span class="token punctuation">&gt;</span></span> categories <span class="token operator">=</span>  categoryService<span class="token punctuation">.</span><span class="token function">getShopCategorys</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>categories<span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;state&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;success&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;data&quot;</span><span class="token punctuation">,</span>categories<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>
            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;state&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;error&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;message&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;\u6CA1\u6709\u6570\u636E&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> map<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_8-\u5546\u54C1\u5206\u7C7B" tabindex="-1"><a class="header-anchor" href="#_8-\u5546\u54C1\u5206\u7C7B" aria-hidden="true">#</a> 8-\u5546\u54C1\u5206\u7C7B</h2><p>\u7528\u6237\u8BF7\u6C42\u63A5\u53E3\u65E0\u9700\u4F20\u4EFB\u4F55\u53C2\u6570\uFF0C\u67E5\u8BE2\u5546\u54C1\u7684\u5206\u7C7B\u4FE1\u606F\u3002\u7ED3\u679C\u6570\u636E\u4EE5 JSON \u7684\u5F62\u5F0F\uFF0C\u54CD\u5E94\u7ED9\u5BA2\u6237\u7AEF\u3002\u5B8C\u6210\u8BD5\u9A8C\u540E\uFF0C\u7528 Postman \u8FDB\u884C\u6D4B\u8BD5\u3002</p><h3 id="icategorymapper-java-6" tabindex="-1"><a class="header-anchor" href="#icategorymapper-java-6" aria-hidden="true">#</a> ICategoryMapper.java</h3><p>\u67E5\u8BE2\u5546\u54C1\u5206\u7C7B\u4FE1\u606F\u7684 Mapper \u63A5\u53E3\u7C7B\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">ICategoryMapper</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Select</span><span class="token punctuation">(</span><span class="token string">&quot;select * from t_category where parentId is null and categoryName= #{categoryName}&quot;</span><span class="token punctuation">)</span>
    <span class="token class-name">Category</span> <span class="token function">getCategoryByCategoryName</span><span class="token punctuation">(</span><span class="token class-name">String</span> categoryName<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Select</span><span class="token punctuation">(</span><span class="token string">&quot;select * from t_category where parentId = #{categoryId}&quot;</span><span class="token punctuation">)</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Category</span><span class="token punctuation">&gt;</span></span> <span class="token function">getCategorysByParentId</span><span class="token punctuation">(</span><span class="token class-name">Long</span> categoryId<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="categoryservice-java-1" tabindex="-1"><a class="header-anchor" href="#categoryservice-java-1" aria-hidden="true">#</a> CategoryService.java</h3><p>\u67E5\u8BE2\u5546\u54C1\u5206\u7C7B\u4FE1\u606F\u7684\u4E1A\u52A1\u5904\u7406\u7C7B\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>
<span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CategoryService</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token class-name">ICategoryMapper</span> categoryMapper<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Category</span><span class="token punctuation">&gt;</span></span> <span class="token function">getProductCategorys</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Category</span> category <span class="token operator">=</span> categoryMapper<span class="token punctuation">.</span><span class="token function">getCategoryByCategoryName</span><span class="token punctuation">(</span><span class="token string">&quot;\u5546\u54C1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Long</span> categoryId <span class="token operator">=</span>  category<span class="token punctuation">.</span><span class="token function">getCategoryId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span>  categoryMapper<span class="token punctuation">.</span><span class="token function">getCategorysByParentId</span><span class="token punctuation">(</span>categoryId<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="categorycontroller-java-1" tabindex="-1"><a class="header-anchor" href="#categorycontroller-java-1" aria-hidden="true">#</a> CategoryController.java</h3><p>\u67E5\u8BE2\u5546\u54C1\u5206\u7C7B\u4FE1\u606F\u7684 Rest \u63A5\u53E3\u7C7B\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@RestController</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CategoryController</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token class-name">CategoryService</span> categoryService<span class="token punctuation">;</span>
    <span class="token comment">//\u67E5\u8BE2\u4E0D\u540C\u7C7B\u578B\u7684\u5546\u5E97</span>
    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/showProductCategorys&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> <span class="token function">showProductCategorys</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Category</span><span class="token punctuation">&gt;</span></span> categories <span class="token operator">=</span>  categoryService<span class="token punctuation">.</span><span class="token function">getProductCategorys</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>categories<span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;state&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;success&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;data&quot;</span><span class="token punctuation">,</span>categories<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>
            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;state&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;error&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;message&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;\u6CA1\u6709\u6570\u636E&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> map<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,127),o=[e];function c(l,i){return s(),a("div",null,o)}const k=n(p,[["render",c],["__file","6-\u5546\u54C1\u6A21\u5757.html.vue"]]);export{k as default};
