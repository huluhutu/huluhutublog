import{_ as n}from"./_plugin-vue_export-helper.cdc0426e.js";import{o as s,c as a,d as t}from"./app.0662e65c.js";const p={},e=t(`<h1 id="\u8BA2\u5355\u6A21\u5757" tabindex="-1"><a class="header-anchor" href="#\u8BA2\u5355\u6A21\u5757" aria-hidden="true">#</a> \u8BA2\u5355\u6A21\u5757</h1><h2 id="_1-\u6536\u8D27\u5730\u5740" tabindex="-1"><a class="header-anchor" href="#_1-\u6536\u8D27\u5730\u5740" aria-hidden="true">#</a> 1-\u6536\u8D27\u5730\u5740</h2><p>\u7F16\u5199 5 \u4E2A Rest \u670D\u52A1\u7684\u63A5\u53E3\uFF0C\u63A5\u6536\u8BF7\u6C42\u65F6\uFF0C\u901A\u8FC7\u7528\u6237\u4F20\u5165\u7684\u6536\u8D27\u5730\u5740\u6570\u636E\uFF0C\u5BF9\u6536\u83B7\u5730\u5740\u7684\u589E\u5220\u6539\u67E5\u64CD\u4F5C\u3002</p><p>\u6267\u884C\u7ED3\u679C\u4EE5 JSON \u7684\u5F62\u5F0F\uFF0C\u54CD\u5E94\u7ED9\u5BA2\u6237\u7AEF\u3002\u5B8C\u6210\u8BD5\u9A8C\u540E\uFF0C\u7528 Postman \u8FDB\u884C\u6D4B\u8BD5\u3002</p><h3 id="iaddressmapper-java" tabindex="-1"><a class="header-anchor" href="#iaddressmapper-java" aria-hidden="true">#</a> IAddressMapper.java</h3><p>\u5BF9\u6536\u8D27\u5730\u5740\u8FDB\u884C\u589E\u5220\u6539\u67E5\u7684 Mapper \u63A5\u53E3\u7C7B\u3002\u91CC\u9762\u63D0\u4F9B\u7684\u65B9\u6CD5\u6709 saveAddress\uFF08\u6DFB\u52A0\uFF09\u3001deleteAddress\uFF08\u5220\u9664\uFF09\u3001updateAddress\uFF08\u4FEE\u6539\uFF09\u3001getAddresses\uFF08\u67E5\u8BE2\uFF09\u3001getAddress\uFF08\u5355\u6761\u8BB0\u5F55\u67E5\u8BE2\uFF09\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IAddressMapper</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Select</span><span class="token punctuation">(</span><span class="token string">&quot;select * from t_address where addressId = #{addressId}&quot;</span><span class="token punctuation">)</span>
    <span class="token class-name">Address</span> <span class="token function">getAddress</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;addressId&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Long</span> addressId<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Select</span><span class="token punctuation">(</span><span class="token string">&quot;select * from t_user where userId = #{userId}&quot;</span><span class="token punctuation">)</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Address</span><span class="token punctuation">&gt;</span></span> <span class="token function">getAddresses</span><span class="token punctuation">(</span><span class="token class-name">Long</span> userId<span class="token punctuation">)</span><span class="token punctuation">;</span>


    <span class="token annotation punctuation">@Insert</span><span class="token punctuation">(</span><span class="token string">&quot;insert into t_address&quot;</span> <span class="token operator">+</span>
            <span class="token string">&quot;(city,department,houseNumber,realName,phone,userId,isdefault,createdAt) &quot;</span> <span class="token operator">+</span>
            <span class="token string">&quot;values(#{address.city},#{address.department},#{address.houseNumber},&quot;</span> <span class="token operator">+</span>
            <span class="token string">&quot;#{address.realName},#{address.phone},#{address.userId},#{address.isdefault},#{address.createdAt})&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">int</span> <span class="token function">saveAddress</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;address&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Address</span> address<span class="token punctuation">)</span><span class="token punctuation">;</span>


    <span class="token annotation punctuation">@Delete</span><span class="token punctuation">(</span><span class="token string">&quot;delete from t_address where addressId=#{addressId}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">int</span> <span class="token function">deleteAddress</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;addressId&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Long</span> addressId<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Update</span><span class="token punctuation">(</span><span class="token string">&quot;update t_address set city=#{address.city},&quot;</span> <span class="token operator">+</span>
            <span class="token string">&quot;department=#{address.department},&quot;</span> <span class="token operator">+</span>
            <span class="token string">&quot;houseNumber=#{address.houseNumber},&quot;</span> <span class="token operator">+</span>
            <span class="token string">&quot;realName=#{address.realName},&quot;</span> <span class="token operator">+</span>
            <span class="token string">&quot;phone=#{address.phone},&quot;</span> <span class="token operator">+</span>
            <span class="token string">&quot;userId=#{address.userId},&quot;</span> <span class="token operator">+</span>
            <span class="token string">&quot;isdefault=#{address.isdefault}&quot;</span> <span class="token operator">+</span>
            <span class="token string">&quot; where addressId=#{address.addressId}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">int</span> <span class="token function">updateAddress</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;address&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Address</span> address<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="addressservice-java" tabindex="-1"><a class="header-anchor" href="#addressservice-java" aria-hidden="true">#</a> AddressService.java</h3><p>\u6536\u8D27\u5730\u5740\u4FE1\u606F\u7684\u4E1A\u52A1\u5904\u7406\u7C7B\u3002\u91CC\u9762\u63D0\u4F9B\u7684\u65B9\u6CD5\u6709 saveAddress\uFF08\u6DFB\u52A0\uFF09\u3001deleteAddress\uFF08\u5220\u9664\uFF09\u3001updateAddress\uFF08\u4FEE\u6539\uFF09\u3001getAddresses\uFF08\u67E5\u8BE2\uFF09\u3001getAddress\uFF08\u67E5\u8BE2\u5355\u6761\u8BB0\u5F55\uFF09\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AddressService</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token class-name">IAddressMapper</span> addressMapper<span class="token punctuation">;</span>

    <span class="token comment">//\u6DFB\u52A0\u5730\u5740</span>
    <span class="token keyword">public</span> <span class="token class-name">Boolean</span> <span class="token function">saveAddress</span><span class="token punctuation">(</span><span class="token class-name">String</span> city<span class="token punctuation">,</span> <span class="token class-name">String</span> department<span class="token punctuation">,</span>
                               <span class="token class-name">Integer</span> houseNumber<span class="token punctuation">,</span> <span class="token class-name">String</span> realName<span class="token punctuation">,</span>
                               <span class="token class-name">String</span> phone<span class="token punctuation">,</span> <span class="token class-name">Long</span> userId<span class="token punctuation">,</span> <span class="token class-name">Boolean</span> isdefault<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Address</span> address <span class="token operator">=</span>  <span class="token keyword">new</span> <span class="token class-name">Address</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        address<span class="token punctuation">.</span><span class="token function">setCity</span><span class="token punctuation">(</span>city<span class="token punctuation">)</span><span class="token punctuation">;</span>
        address<span class="token punctuation">.</span><span class="token function">setDepartment</span><span class="token punctuation">(</span>department<span class="token punctuation">)</span><span class="token punctuation">;</span>
        address<span class="token punctuation">.</span><span class="token function">setHouseNumber</span><span class="token punctuation">(</span>houseNumber<span class="token punctuation">)</span><span class="token punctuation">;</span>
        address<span class="token punctuation">.</span><span class="token function">setRealName</span><span class="token punctuation">(</span>realName<span class="token punctuation">)</span><span class="token punctuation">;</span>
        address<span class="token punctuation">.</span><span class="token function">setPhone</span><span class="token punctuation">(</span>phone<span class="token punctuation">)</span><span class="token punctuation">;</span>
        address<span class="token punctuation">.</span><span class="token function">setUserId</span><span class="token punctuation">(</span>userId<span class="token punctuation">)</span><span class="token punctuation">;</span>
        address<span class="token punctuation">.</span><span class="token function">setCreatedAt</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>isdefault <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            isdefault <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        address<span class="token punctuation">.</span><span class="token function">setIsdefault</span><span class="token punctuation">(</span>isdefault<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> rows <span class="token operator">=</span>  addressMapper<span class="token punctuation">.</span><span class="token function">saveAddress</span><span class="token punctuation">(</span>address<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> rows <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u5220\u9664\u6536\u8D27\u5730\u5740</span>
    <span class="token keyword">public</span> <span class="token class-name">Boolean</span> <span class="token function">deleteAddress</span><span class="token punctuation">(</span><span class="token class-name">Long</span> addressId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">int</span> rows <span class="token operator">=</span> addressMapper<span class="token punctuation">.</span><span class="token function">deleteAddress</span><span class="token punctuation">(</span>addressId<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> rows <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u4FEE\u6539\u6536\u8D27\u5730\u5740</span>
    <span class="token keyword">public</span> <span class="token class-name">Boolean</span> <span class="token function">updateAddress</span><span class="token punctuation">(</span><span class="token class-name">Long</span> addressId<span class="token punctuation">,</span> <span class="token class-name">String</span> city<span class="token punctuation">,</span> <span class="token class-name">String</span> department<span class="token punctuation">,</span>
                                 <span class="token class-name">Integer</span> houseNumber<span class="token punctuation">,</span> <span class="token class-name">String</span> realName<span class="token punctuation">,</span>
                                 <span class="token class-name">String</span> phone<span class="token punctuation">,</span> <span class="token class-name">Long</span> userId<span class="token punctuation">,</span> <span class="token class-name">Boolean</span> isdefault<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Address</span> address <span class="token operator">=</span>  <span class="token keyword">new</span> <span class="token class-name">Address</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        address<span class="token punctuation">.</span><span class="token function">setAddressId</span><span class="token punctuation">(</span>addressId<span class="token punctuation">)</span><span class="token punctuation">;</span>
        address<span class="token punctuation">.</span><span class="token function">setCity</span><span class="token punctuation">(</span>city<span class="token punctuation">)</span><span class="token punctuation">;</span>
        address<span class="token punctuation">.</span><span class="token function">setDepartment</span><span class="token punctuation">(</span>department<span class="token punctuation">)</span><span class="token punctuation">;</span>
        address<span class="token punctuation">.</span><span class="token function">setHouseNumber</span><span class="token punctuation">(</span>houseNumber<span class="token punctuation">)</span><span class="token punctuation">;</span>
        address<span class="token punctuation">.</span><span class="token function">setRealName</span><span class="token punctuation">(</span>realName<span class="token punctuation">)</span><span class="token punctuation">;</span>
        address<span class="token punctuation">.</span><span class="token function">setPhone</span><span class="token punctuation">(</span>phone<span class="token punctuation">)</span><span class="token punctuation">;</span>
        address<span class="token punctuation">.</span><span class="token function">setUserId</span><span class="token punctuation">(</span>userId<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>isdefault <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            isdefault <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        address<span class="token punctuation">.</span><span class="token function">setIsdefault</span><span class="token punctuation">(</span>isdefault<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> rows <span class="token operator">=</span> addressMapper<span class="token punctuation">.</span><span class="token function">updateAddress</span><span class="token punctuation">(</span>address<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> rows <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u67E5\u8BE2\u6536\u8D27\u5730\u5740\uFF08\u591A\u6761\uFF09</span>
    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Address</span><span class="token punctuation">&gt;</span></span> <span class="token function">getAddresses</span><span class="token punctuation">(</span><span class="token class-name">Long</span> userId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span>  addressMapper<span class="token punctuation">.</span><span class="token function">getAddresses</span><span class="token punctuation">(</span>userId<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//\u67E5\u8BE2\u6536\u8D27\u5730\u5740\uFF08\u5355\u6761\uFF09</span>
    <span class="token keyword">public</span> <span class="token class-name">Address</span> <span class="token function">getAddress</span><span class="token punctuation">(</span><span class="token class-name">Long</span> addressId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span>  addressMapper<span class="token punctuation">.</span><span class="token function">getAddress</span><span class="token punctuation">(</span>addressId<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="addresscontroller-java" tabindex="-1"><a class="header-anchor" href="#addresscontroller-java" aria-hidden="true">#</a> AddressController.java</h3><p>\u5BF9\u6536\u8D27\u5730\u5740\u4FE1\u606F\u8FDB\u884C\u589E\u5220\u6539\u67E5\u7684 Rest \u63A5\u53E3\u7C7B\u3002\u5BF9\u5916\u670D\u52A1\u7684\u63A5\u53E3\u6709 &quot;/saveAddress&quot;\uFF08\u6DFB\u52A0\uFF09\u3001&quot;/deleteAddress&quot;\uFF08\u5220\u9664\uFF09\u3001&quot;/updateAddress&quot;\uFF08\u4FEE\u6539\uFF09\u3001&quot;/showAddresses&quot;\uFF08\u67E5\u8BE2\uFF09\u3001&quot;/showAddress&quot;\uFF08\u67E5\u8BE2\u5355\u6761\u8BB0\u5F55\uFF09\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@RestController</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AddressController</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token class-name">AddressService</span> addressService<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/saveAddress&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> <span class="token function">saveAddress</span><span class="token punctuation">(</span><span class="token class-name">String</span> city<span class="token punctuation">,</span><span class="token class-name">String</span> department<span class="token punctuation">,</span>
                                          <span class="token class-name">Integer</span> houseNumber<span class="token punctuation">,</span><span class="token class-name">String</span> realName<span class="token punctuation">,</span>
                                          <span class="token class-name">String</span> phone<span class="token punctuation">,</span><span class="token class-name">Long</span> userId<span class="token punctuation">,</span><span class="token class-name">Boolean</span> isdefault<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Boolean</span> b <span class="token operator">=</span> addressService<span class="token punctuation">.</span><span class="token function">saveAddress</span><span class="token punctuation">(</span>city<span class="token punctuation">,</span>department<span class="token punctuation">,</span>houseNumber<span class="token punctuation">,</span>
                realName<span class="token punctuation">,</span>phone<span class="token punctuation">,</span>userId<span class="token punctuation">,</span>isdefault<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">{</span>
            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;state&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;success&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>
            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;state&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;error&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;message&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;\u6DFB\u52A0\u5730\u5740\u5931\u8D25&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> map<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@DeleteMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/deleteAddress&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> <span class="token function">deleteAddress</span><span class="token punctuation">(</span><span class="token class-name">Long</span> addressId<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Boolean</span> b <span class="token operator">=</span>  addressService<span class="token punctuation">.</span><span class="token function">deleteAddress</span><span class="token punctuation">(</span>addressId<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">{</span>
            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;state&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;success&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>
            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;state&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;error&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;message&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;\u6DFB\u52A0\u5730\u5740\u5931\u8D25&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> map<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/updateAddress&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> <span class="token function">updateAddress</span><span class="token punctuation">(</span><span class="token class-name">Long</span> addressId<span class="token punctuation">,</span><span class="token class-name">String</span> city<span class="token punctuation">,</span><span class="token class-name">String</span> department<span class="token punctuation">,</span>
                                            <span class="token class-name">Integer</span> houseNumber<span class="token punctuation">,</span><span class="token class-name">String</span> realName<span class="token punctuation">,</span>
                                            <span class="token class-name">String</span> phone<span class="token punctuation">,</span><span class="token class-name">Long</span> userId<span class="token punctuation">,</span><span class="token class-name">Boolean</span> isdefault<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Boolean</span> b <span class="token operator">=</span> addressService<span class="token punctuation">.</span><span class="token function">updateAddress</span><span class="token punctuation">(</span>addressId<span class="token punctuation">,</span>city<span class="token punctuation">,</span>department<span class="token punctuation">,</span>houseNumber<span class="token punctuation">,</span>
                realName<span class="token punctuation">,</span>phone<span class="token punctuation">,</span>userId<span class="token punctuation">,</span>isdefault<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">{</span>
            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;state&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;success&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>
            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;state&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;error&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;message&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;\u6DFB\u52A0\u5730\u5740\u5931\u8D25&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> map<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/showAddresses&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> <span class="token function">showAddresses</span><span class="token punctuation">(</span><span class="token class-name">Long</span> userId<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Address</span><span class="token punctuation">&gt;</span></span> addresses <span class="token operator">=</span> addressService<span class="token punctuation">.</span><span class="token function">getAddresses</span><span class="token punctuation">(</span>userId<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>addresses <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;state&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;success&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;data&quot;</span><span class="token punctuation">,</span>addresses<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>
            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;state&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;error&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;message&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;\u6CA1\u6709\u5730\u5740\u6570\u636E&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> map<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/showAddress&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> <span class="token function">showAddress</span><span class="token punctuation">(</span><span class="token class-name">Long</span> addressId<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Address</span> address <span class="token operator">=</span> addressService<span class="token punctuation">.</span><span class="token function">getAddress</span><span class="token punctuation">(</span>addressId<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>address <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;state&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;success&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;data&quot;</span><span class="token punctuation">,</span>address<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>
            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;state&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;error&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;message&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;\u6CA1\u6709\u5730\u5740\u6570\u636E&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> map<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_2-\u8BA2\u5355\u67E5\u8BE2" tabindex="-1"><a class="header-anchor" href="#_2-\u8BA2\u5355\u67E5\u8BE2" aria-hidden="true">#</a> 2-\u8BA2\u5355\u67E5\u8BE2</h2><p>\u7F16\u5199\u516D\u4E2A\u67E5\u8BE2\u7C7B\u7684 Rest \u63A5\u53E3\u3001\u6211\u7684\u8D2D\u7269\u8F66\u3001\u672A\u5B8C\u6210\u8BA2\u5355\uFF08\u5F85\u652F\u4ED8\uFF09\u3001\u5F85\u53D1\u8D27\u8BA2\u5355\u3001\u5F85\u6536\u8D27\u8BA2\u5355\u3001\u8BA2\u5355\u8BE6\u60C5\u3001\u5386\u53F2\u8BA2\u5355\u3002\u7528\u6237\u53D1\u51FA\u4E00\u4E2A HTTP \u8BF7\u6C42\uFF0C\u4F20\u5165\u4E00\u4E2A\u76F8\u5E94\u7684\u53C2\u6570 \uFF0C\u628A\u67E5\u8BE2\u7684\u7ED3\u679C\u5168\u90E8\u4EE5 JSON \u7684\u5F62\u5F0F\uFF0C\u54CD\u5E94\u7ED9\u5BA2\u6237\u7AEF\u3002\u5B8C\u6210\u8BD5\u9A8C\u540E\uFF0C\u7528 Postman \u8FDB\u884C\u6D4B\u8BD5\u3002</p><p>\u5728\u8BBE\u8BA1\u8868\u7684\u65F6\u5019\uFF0C\u7528\u4E8E\u4FDD\u5B58\u8BA2\u5355\u548C\u8D2D\u7269\u8F66\u7684\u4FE1\u606F\u90FD\u662F\u5B58\u50A8\u5230 t_order \u548C t_orderdetail \u91CC\u9762\u7684\u3002t_order \u7528\u4E8E\u5B58\u50A8\u57FA\u672C\u4FE1\u606F\uFF0Ct_orderdetail \u7528\u4E8E\u5B58\u50A8\u8BE6\u7EC6\u4FE1\u606F\u3002t_order \u6709\u4E00\u4E2A\u5B57\u6BB5 isCanceled \uFF0C\u5F53\u503C\u672A 0 \u65F6\u4E3A\u8D2D\u7269\u8F66\uFF0C\u5F53\u503C\u4E3A 1 \u65F6\u672A\u5F85\u652F\u4ED8\uFF0C\u5F53\u503C\u4E3A 2 \u65F6\u4E3A\u5F85\u53D1\u8D27 \uFF0C\u5F53\u503C\u4E3A 3 \u65F6\u4E3A\u5F85\u6536\u8D27\uFF0C\u5F53\u503C\u4E3A 4 \u65F6\u4E3A\u5B8C\u6210\u7684\u8BA2\u5355\uFF0C\u5F53\u503C\u4E3A 5 \u65F6\u4E3A\u7528\u6237\u53D6\u6D88\u4E86\u8BA2\u5355\u3002\u6240\u4EE5\u6211\u4EEC\u5728\u505A\u8BA2\u5355\u67E5\u8BE2\u7684\u65F6\u5019\u53EA\u9700\u8981\u4F20\u5165\u5B57\u6BB5 isCanceled \u7B49\u4E8E\u5BF9\u5E94\u7684\u503C\u5C31\u80FD\u591F\u627E\u5230\u6211\u4EEC\u60F3\u8981\u7684\u6570\u636E\u4E86\u3002</p><h3 id="iaddressmapper-java-1" tabindex="-1"><a class="header-anchor" href="#iaddressmapper-java-1" aria-hidden="true">#</a> IAddressMapper.java</h3><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IAddressMapper</span> <span class="token punctuation">{</span>
  <span class="token annotation punctuation">@Select</span><span class="token punctuation">(</span><span class="token string">&quot;select * from t_address where addressId = #{addressId}&quot;</span><span class="token punctuation">)</span>
  <span class="token class-name">Address</span> <span class="token function">getAddress</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;addressId&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Long</span> addressId<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="icategorymapper-java" tabindex="-1"><a class="header-anchor" href="#icategorymapper-java" aria-hidden="true">#</a> ICategoryMapper.java</h3><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">ICategoryMapper</span> <span class="token punctuation">{</span>
<span class="token annotation punctuation">@Select</span><span class="token punctuation">(</span><span class="token string">&quot;select * from t_category where categoryId = #{categoryId}&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">Category</span> <span class="token function">getCategory</span><span class="token punctuation">(</span><span class="token class-name">Long</span> categoryId<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token annotation punctuation">@Select</span><span class="token punctuation">(</span><span class="token string">&quot;select * from t_category where parentId is null and categoryName= #{categoryName}&quot;</span><span class="token punctuation">)</span>
  <span class="token class-name">Category</span> <span class="token function">getCategoryByCategoryName</span><span class="token punctuation">(</span><span class="token class-name">String</span> categoryName<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token annotation punctuation">@Select</span><span class="token punctuation">(</span><span class="token string">&quot;select * from t_category where parentId = #{categoryId}&quot;</span><span class="token punctuation">)</span>
  <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Category</span><span class="token punctuation">&gt;</span></span> <span class="token function">getCategorysByParentId</span><span class="token punctuation">(</span><span class="token class-name">Long</span> categoryId<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="iorderdetailmapper-java" tabindex="-1"><a class="header-anchor" href="#iorderdetailmapper-java" aria-hidden="true">#</a> IOrderDetailMapper.java</h3><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IOrderDetailMapper</span> <span class="token punctuation">{</span>
  <span class="token annotation punctuation">@Select</span><span class="token punctuation">(</span><span class="token string">&quot;select detailId,productId,orderSales from t_orderdetail where orderId=#{orderId}&quot;</span><span class="token punctuation">)</span>
  <span class="token annotation punctuation">@Results</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
          <span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>property <span class="token operator">=</span> <span class="token string">&quot;product&quot;</span><span class="token punctuation">,</span> column <span class="token operator">=</span> <span class="token string">&quot;productId&quot;</span><span class="token punctuation">,</span>
                  one <span class="token operator">=</span> <span class="token annotation punctuation">@One</span><span class="token punctuation">(</span>select <span class="token operator">=</span> <span class="token string">&quot;com.mapper.IProductMapper.getProduct&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">OrderDetail</span><span class="token punctuation">&gt;</span></span> <span class="token function">getOrderDetailes</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;orderId&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Long</span> orderId<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="iordermapper-java" tabindex="-1"><a class="header-anchor" href="#iordermapper-java" aria-hidden="true">#</a> IOrderMapper.java</h3><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IOrderMapper</span> <span class="token punctuation">{</span>
  <span class="token annotation punctuation">@Select</span><span class="token punctuation">(</span><span class="token string">&quot;select orderId,addressId,userId,updatedAt,createdAt,shopId,&quot;</span> <span class="token operator">+</span>
          <span class="token string">&quot;orderTotalPrice,isCanceled,ordernumber from t_order where &quot;</span> <span class="token operator">+</span>
          <span class="token string">&quot;orderId = #{orderId} and userId = #{userId} and isCanceled = #{isCanceled}&quot;</span><span class="token punctuation">)</span>
  <span class="token annotation punctuation">@Results</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
          <span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>property <span class="token operator">=</span> <span class="token string">&quot;orderDetails&quot;</span><span class="token punctuation">,</span>column <span class="token operator">=</span> <span class="token string">&quot;orderId&quot;</span><span class="token punctuation">,</span>
          many <span class="token operator">=</span> <span class="token annotation punctuation">@Many</span><span class="token punctuation">(</span>select <span class="token operator">=</span> <span class="token string">&quot;com.mapper.IOrderDetailMapper.getOrderDetailes&quot;</span><span class="token punctuation">,</span>
                  fetchType <span class="token operator">=</span> <span class="token class-name">FetchType</span><span class="token punctuation">.</span><span class="token constant">EAGER</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          <span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>property <span class="token operator">=</span> <span class="token string">&quot;address&quot;</span><span class="token punctuation">,</span>column <span class="token operator">=</span> <span class="token string">&quot;addressId&quot;</span><span class="token punctuation">,</span>
                  one <span class="token operator">=</span> <span class="token annotation punctuation">@One</span><span class="token punctuation">(</span>select <span class="token operator">=</span> <span class="token string">&quot;com.mapper.IAddressMapper.getAddress&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          <span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>property <span class="token operator">=</span> <span class="token string">&quot;orderId&quot;</span><span class="token punctuation">,</span>column <span class="token operator">=</span> <span class="token string">&quot;orderId&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          <span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>property <span class="token operator">=</span> <span class="token string">&quot;shop&quot;</span><span class="token punctuation">,</span>column <span class="token operator">=</span> <span class="token string">&quot;shopId&quot;</span><span class="token punctuation">,</span>
                  one <span class="token operator">=</span> <span class="token annotation punctuation">@One</span><span class="token punctuation">(</span>select <span class="token operator">=</span> <span class="token string">&quot;com.mapper.IShopMapper.getShop&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token class-name">Order</span> <span class="token function">getOrder</span><span class="token punctuation">(</span>
          <span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;userId&quot;</span><span class="token punctuation">)</span>
          <span class="token class-name">Long</span> userId<span class="token punctuation">,</span>
          <span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;orderId&quot;</span><span class="token punctuation">)</span>
          <span class="token class-name">Long</span> orderId<span class="token punctuation">,</span>
          <span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;isCanceled&quot;</span><span class="token punctuation">)</span>
          <span class="token class-name">String</span> isCanceled<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token annotation punctuation">@Select</span><span class="token punctuation">(</span><span class="token string">&quot;select orderId,addressId,userId,updatedAt,createdAt,shopId,&quot;</span> <span class="token operator">+</span>
          <span class="token string">&quot;orderTotalPrice,isCanceled,ordernumber from t_order where&quot;</span> <span class="token operator">+</span>
          <span class="token string">&quot; userId = #{userId} and isCanceled = #{isCanceled}&quot;</span><span class="token punctuation">)</span>
  <span class="token annotation punctuation">@Results</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
          <span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>property <span class="token operator">=</span> <span class="token string">&quot;orderDetails&quot;</span><span class="token punctuation">,</span>column <span class="token operator">=</span> <span class="token string">&quot;orderId&quot;</span><span class="token punctuation">,</span>
                  many <span class="token operator">=</span> <span class="token annotation punctuation">@Many</span><span class="token punctuation">(</span>select <span class="token operator">=</span> <span class="token string">&quot;com.mapper.IOrderDetailMapper.getOrderDetailes&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Order</span><span class="token punctuation">&gt;</span></span> <span class="token function">getOrders</span><span class="token punctuation">(</span>
          <span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;userId&quot;</span><span class="token punctuation">)</span>
          <span class="token class-name">Long</span> userId<span class="token punctuation">,</span>
          <span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;isCanceled&quot;</span><span class="token punctuation">)</span>
          <span class="token class-name">String</span> isCanceled<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="iproductmapper-java" tabindex="-1"><a class="header-anchor" href="#iproductmapper-java" aria-hidden="true">#</a> IProductMapper.java</h3><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IProductMapper</span> <span class="token punctuation">{</span>
  <span class="token annotation punctuation">@Select</span><span class="token punctuation">(</span><span class="token string">&quot;select productId,expressLimit,expressPrice,poductImgUrl,&quot;</span> <span class="token operator">+</span>
          <span class="token string">&quot;productName,shopId,sales,stock,oldprice,price,unit,categoryId&quot;</span> <span class="token operator">+</span>
          <span class="token string">&quot; from t_product where productId = #{productId}&quot;</span><span class="token punctuation">)</span>
  <span class="token annotation punctuation">@Results</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
          <span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>property <span class="token operator">=</span> <span class="token string">&quot;category&quot;</span><span class="token punctuation">,</span>column <span class="token operator">=</span> <span class="token string">&quot;categoryId&quot;</span><span class="token punctuation">,</span>
                  one <span class="token operator">=</span> <span class="token annotation punctuation">@One</span><span class="token punctuation">(</span>select <span class="token operator">=</span> <span class="token string">&quot;com.mapper.ICategoryMapper.getCategory&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token class-name">Product</span> <span class="token function">getProduct</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;productId&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Long</span> productId<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token annotation punctuation">@Select</span><span class="token punctuation">(</span><span class="token string">&quot;select productId,expressLimit,expressPrice,poductImgUrl,productName,&quot;</span> <span class="token operator">+</span>
          <span class="token string">&quot;shopId,sales,stock,oldprice,price,unit,categoryId  &quot;</span> <span class="token operator">+</span>
          <span class="token string">&quot;from t_product where shopId = #{shopId}&quot;</span><span class="token punctuation">)</span>
  <span class="token annotation punctuation">@Results</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
          <span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>property <span class="token operator">=</span> <span class="token string">&quot;category&quot;</span><span class="token punctuation">,</span>column <span class="token operator">=</span> <span class="token string">&quot;categoryId&quot;</span><span class="token punctuation">,</span>
                  one <span class="token operator">=</span> <span class="token annotation punctuation">@One</span><span class="token punctuation">(</span>select <span class="token operator">=</span> <span class="token string">&quot;com.mapper.ICategoryMapper.getCategory&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Product</span><span class="token punctuation">&gt;</span></span> <span class="token function">getProductsByShopId</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;shopId&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Long</span> shopId<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="ishopmapper-java" tabindex="-1"><a class="header-anchor" href="#ishopmapper-java" aria-hidden="true">#</a> IShopMapper.java</h3><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IShopMapper</span> <span class="token punctuation">{</span>
  <span class="token annotation punctuation">@Select</span><span class="token punctuation">(</span><span class="token string">&quot;select * from t_shop where shopId = #{shopId}&quot;</span><span class="token punctuation">)</span>
  <span class="token annotation punctuation">@Results</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
              <span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>property <span class="token operator">=</span> <span class="token string">&quot;category&quot;</span><span class="token punctuation">,</span>column <span class="token operator">=</span> <span class="token string">&quot;categoryId&quot;</span><span class="token punctuation">,</span>
                      one <span class="token operator">=</span> <span class="token annotation punctuation">@One</span><span class="token punctuation">(</span>select <span class="token operator">=</span> <span class="token string">&quot;com.mapper.ICategoryMapper.getCategory&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
              <span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>property <span class="token operator">=</span> <span class="token string">&quot;products&quot;</span><span class="token punctuation">,</span>column <span class="token operator">=</span> <span class="token string">&quot;shopId&quot;</span><span class="token punctuation">,</span>
                      many <span class="token operator">=</span> <span class="token annotation punctuation">@Many</span><span class="token punctuation">(</span>select <span class="token operator">=</span> <span class="token string">&quot;com.mapper.IProductMapper.getProductsByShopId&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
              <span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>property <span class="token operator">=</span> <span class="token string">&quot;shopId&quot;</span><span class="token punctuation">,</span>column <span class="token operator">=</span> <span class="token string">&quot;shopId&quot;</span><span class="token punctuation">)</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token class-name">Shop</span> <span class="token function">getShop</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;shopId&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Long</span> shopId<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="orderservice-java" tabindex="-1"><a class="header-anchor" href="#orderservice-java" aria-hidden="true">#</a> OrderService.java</h3><p>\u67E5\u8BE2\u8BA2\u5355\u4E1A\u52A1\u5904\u7406\u7C7B\u3002\u91CC\u9762\u63D0\u4F9B\u4E94\u4E2A\u4E1A\u52A1\u65B9\u6CD5 getOrder\uFF08\u6211\u7684\u8BA2\u5355\uFF09\u3001getMyCarrs\uFF08\u6211\u7684\u8D2D\u7269\u8F66\uFF09\u3001getNoFinishiOrders\uFF08\u672A\u5B8C\u6210\u8BA2\u5355\uFF09\u3001getNoSendOrders\uFF08\u4EE3\u53D1\u8D27\u8BA2\u5355\uFF09\u3001getIsSendOrders\uFF08\u5F85\u6536\u83B7\u8BA2\u5355\uFF09\u3001getHistoryOrders\uFF08\u5386\u53F2\u8BA2\u5355\uFF09\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OrderService</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token class-name">IOrderMapper</span> orderMapper<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token class-name">IOrderDetailMapper</span> orderDetailMapper<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Order</span> <span class="token function">getOrder</span><span class="token punctuation">(</span><span class="token class-name">Long</span> userId<span class="token punctuation">,</span> <span class="token class-name">Long</span> orderId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> orderMapper<span class="token punctuation">.</span><span class="token function">getOrder</span><span class="token punctuation">(</span>userId<span class="token punctuation">,</span> orderId<span class="token punctuation">,</span> <span class="token string">&quot;4&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u8D2D\u7269\u8F66</span>
    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Order</span><span class="token punctuation">&gt;</span></span> <span class="token function">getMyCarrs</span><span class="token punctuation">(</span><span class="token class-name">Long</span> userId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> orderMapper<span class="token punctuation">.</span><span class="token function">getOrders</span><span class="token punctuation">(</span>userId<span class="token punctuation">,</span><span class="token string">&quot;0&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//\u5F85\u652F\u4ED8</span>
    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Order</span><span class="token punctuation">&gt;</span></span> <span class="token function">getNoFinishiOrders</span><span class="token punctuation">(</span><span class="token class-name">Long</span> userId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> orderMapper<span class="token punctuation">.</span><span class="token function">getOrders</span><span class="token punctuation">(</span>userId<span class="token punctuation">,</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
     <span class="token comment">//\u5F85\u53D1\u8D27</span>
    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Order</span><span class="token punctuation">&gt;</span></span> <span class="token function">getNoSendOrders</span><span class="token punctuation">(</span><span class="token class-name">Long</span> userId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> orderMapper<span class="token punctuation">.</span><span class="token function">getOrders</span><span class="token punctuation">(</span>userId<span class="token punctuation">,</span><span class="token string">&quot;2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u5F85\u6536\u83B7</span>
    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Order</span><span class="token punctuation">&gt;</span></span> <span class="token function">getIsSendOrders</span><span class="token punctuation">(</span><span class="token class-name">Long</span> userId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> orderMapper<span class="token punctuation">.</span><span class="token function">getOrders</span><span class="token punctuation">(</span>userId<span class="token punctuation">,</span><span class="token string">&quot;3&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//\u5DF2\u5B8C\u6210\u7684\u8BA2\u5355</span>
    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Order</span><span class="token punctuation">&gt;</span></span> <span class="token function">getHistoryOrders</span><span class="token punctuation">(</span><span class="token class-name">Long</span> userId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> orderMapper<span class="token punctuation">.</span><span class="token function">getOrders</span><span class="token punctuation">(</span>userId<span class="token punctuation">,</span><span class="token string">&quot;4&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="ordercontroller-java" tabindex="-1"><a class="header-anchor" href="#ordercontroller-java" aria-hidden="true">#</a> OrderController.java</h3><p>\u5BF9\u5916\u63D0\u4F9B Rest \u670D\u52A1\u7684\u63A5\u53E3\u7C7B\u3002\u8FD4\u56DE\u7684\u8BA2\u5355\u4FE1\u606F\u4EE5 JSON \u7684\u5F62\u5F0F\u54CD\u5E94\u7ED9\u5BA2\u6237\u7AEF\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@RestController</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OrderController</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token class-name">OrderService</span> orderService<span class="token punctuation">;</span>
    <span class="token comment">//\u6211\u7684\u8BA2\u5355</span>
    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/showMyOrder&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> <span class="token function">showMyOrder</span><span class="token punctuation">(</span><span class="token class-name">Long</span> userId<span class="token punctuation">,</span><span class="token class-name">Long</span> orderId<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Order</span> order <span class="token operator">=</span> orderService<span class="token punctuation">.</span><span class="token function">getOrder</span><span class="token punctuation">(</span>userId<span class="token punctuation">,</span>orderId<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>order<span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;state&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;success&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;data&quot;</span><span class="token punctuation">,</span>order<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>
            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;state&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;error&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;message&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;\u8BA2\u5355\u4E3A\u7A7A&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> map<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// \u6211\u7684\u8D2D\u7269\u8F66</span>
    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/showMycars&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> <span class="token function">showMycars</span><span class="token punctuation">(</span><span class="token class-name">Long</span> userId<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Order</span><span class="token punctuation">&gt;</span></span> orders <span class="token operator">=</span> orderService<span class="token punctuation">.</span><span class="token function">getMyCarrs</span><span class="token punctuation">(</span>userId<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>orders<span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;state&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;success&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;data&quot;</span><span class="token punctuation">,</span>orders<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>
            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;state&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;error&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;message&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;\u8BA2\u5355\u4E3A\u7A7A&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> map<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u5F85\u652F\u4ED8</span>
    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/showNoFinishiOrders&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> <span class="token function">showNoFinishiOrders</span><span class="token punctuation">(</span><span class="token class-name">Long</span> userId<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Order</span><span class="token punctuation">&gt;</span></span> orders <span class="token operator">=</span> orderService<span class="token punctuation">.</span><span class="token function">getNoFinishiOrders</span><span class="token punctuation">(</span>userId<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>orders<span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;state&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;success&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;data&quot;</span><span class="token punctuation">,</span>orders<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>
            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;state&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;error&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;message&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;\u8BA2\u5355\u4E3A\u7A7A&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> map<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u5F85\u53D1\u8D27</span>
    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/showNoSendOrders&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> <span class="token function">showNoSendOrders</span><span class="token punctuation">(</span><span class="token class-name">Long</span> userId<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Order</span><span class="token punctuation">&gt;</span></span> orders <span class="token operator">=</span> orderService<span class="token punctuation">.</span><span class="token function">getNoSendOrders</span><span class="token punctuation">(</span>userId<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>orders<span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;state&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;success&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;data&quot;</span><span class="token punctuation">,</span>orders<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>
            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;state&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;error&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;message&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;\u8BA2\u5355\u4E3A\u7A7A&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> map<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u5F85\u6536\u83B7</span>
    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/showSendOrders&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> <span class="token function">showSendOrders</span><span class="token punctuation">(</span><span class="token class-name">Long</span> userId<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Order</span><span class="token punctuation">&gt;</span></span> orders <span class="token operator">=</span> orderService<span class="token punctuation">.</span><span class="token function">getIsSendOrders</span><span class="token punctuation">(</span>userId<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>orders<span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;state&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;success&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;data&quot;</span><span class="token punctuation">,</span>orders<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>
            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;state&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;error&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;message&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;\u8BA2\u5355\u4E3A\u7A7A&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> map<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u5386\u53F2\u8BA2\u5355</span>
    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/showHistoryOrders&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> <span class="token function">getHistoryOrders</span><span class="token punctuation">(</span><span class="token class-name">Long</span> userId<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Order</span><span class="token punctuation">&gt;</span></span> orders <span class="token operator">=</span> orderService<span class="token punctuation">.</span><span class="token function">getHistoryOrders</span><span class="token punctuation">(</span>userId<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>orders<span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;state&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;success&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;data&quot;</span><span class="token punctuation">,</span>orders<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>
            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;state&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;error&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;message&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;\u8BA2\u5355\u4E3A\u7A7A&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> map<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_3-\u8BA2\u5355\u751F\u6210" tabindex="-1"><a class="header-anchor" href="#_3-\u8BA2\u5355\u751F\u6210" aria-hidden="true">#</a> 3-\u8BA2\u5355\u751F\u6210</h2><p>\u5B9E\u73B0\u6DFB\u52A0\u8D2D\u7269\u8F66\u3001\u4FEE\u6539\u8D2D\u7269\u8F66\u3001\u751F\u6210\u8BA2\u5355\u4E09\u4E2A\u529F\u80FD\uFF0C\u7528\u6237\u53D1\u51FA\u4E00\u4E2A HTTP \u8BF7\u6C42\uFF0C\u628A\u8D2D\u7269\u8F66\u4FE1\u606F\u4F5C\u4E3A\u53C2\u6570\u4F20\u5165 \uFF0C\u5E76\u628A\u6570\u636E\u4FDD\u5B58\u5230\u5BF9\u5E94\u7684\u8868\u4E2D\u3002\u5B8C\u6210\u8BD5\u9A8C\u540E\uFF0C\u7528 Postman \u8FDB\u884C\u6D4B\u8BD5\u3002</p><p>\u6DFB\u52A0\u8D2D\u7269\u8F66\u548C\u751F\u6210\u8BA2\u5355\u5B9E\u9645\u4E0A\u5C31\u662F\u8981\u628A\u8D2D\u7269\u8F66\u4FE1\u606F\u8F6C\u5B58\u5230\u6570\u636E\u5E93\u91CC\u3002\u628A\u8D2D\u7269\u8F66\u7684\u57FA\u672C\u4FE1\u606F\u4FDD\u5B58\u5230 t_order \u8868\u91CC\u3001\u8D2D\u7269\u8F66\u7684\u8BE6\u7EC6\u4FE1\u606F\u4FDD\u5B58\u5230 t_orderdetail \u8868\u91CC\u3002\u5982\u4F55\u533A\u5206\u662F\u8D2D\u7269\u8F66\u8FD8\u662F\u8BA2\u5355\u4FE1\u606F\uFF0C\u4E3B\u8981\u662F\u770B\u8BF7\u6C42\u65F6\u4F20\u5165\u7684\u53C2\u6570\u3002\u8FD9\u91CC\u63D0\u4F9B\u7684 Rest \u63A5\u53E3\u4E3A\u4E86\u8BA9\u7528\u6237\u4F7F\u7528\u65B9\u4FBF\uFF0C\u6211\u4EEC\u8BBE\u8BA1\u4E09\u4E2A\u5F00\u653E\u63A5\u53E3\u3002\u91CC\u9762\u8D70\u7684\u4E1A\u52A1\u65B9\u6CD5\u5374\u662F\u540C\u4E00\u4E2A\u3002\u4E0B\u9762\u6211\u4EEC\u6765\u770B\u770B\u4EE3\u7801\u7684\u5177\u4F53\u5B9E\u73B0\u3002</p><h3 id="iorderdetailmapper-java-1" tabindex="-1"><a class="header-anchor" href="#iorderdetailmapper-java-1" aria-hidden="true">#</a> IOrderDetailMapper.java</h3><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IOrderDetailMapper</span> <span class="token punctuation">{</span>

  <span class="token annotation punctuation">@Insert</span><span class="token punctuation">(</span><span class="token string">&quot;insert into t_orderdetail(productId, orderSales,orderId)&quot;</span> <span class="token operator">+</span>
          <span class="token string">&quot; values(#{productId},#{orderSales},#{orderId})&quot;</span><span class="token punctuation">)</span>
  <span class="token class-name">Integer</span> <span class="token function">insertOne</span><span class="token punctuation">(</span>
          <span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;productId&quot;</span><span class="token punctuation">)</span>
                  <span class="token class-name">String</span> productId<span class="token punctuation">,</span>
          <span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;orderSales&quot;</span><span class="token punctuation">)</span>
                  <span class="token class-name">String</span> orderSales<span class="token punctuation">,</span>
          <span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;orderId&quot;</span><span class="token punctuation">)</span>
                  <span class="token class-name">Long</span> orderId<span class="token punctuation">)</span><span class="token punctuation">;</span>


  <span class="token annotation punctuation">@Delete</span><span class="token punctuation">(</span><span class="token string">&quot;delete from t_orderdetail where orderId=#{orderId}&quot;</span><span class="token punctuation">)</span>
  <span class="token keyword">void</span> <span class="token function">deleteByOrderId</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;orderId&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Long</span> orderId<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="iordermapper-java-1" tabindex="-1"><a class="header-anchor" href="#iordermapper-java-1" aria-hidden="true">#</a> IOrderMapper.java</h3><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IOrderMapper</span> <span class="token punctuation">{</span>
  <span class="token annotation punctuation">@Insert</span><span class="token punctuation">(</span><span class="token string">&quot;insert into t_order(addressId, userId, createdAt,shopId,&quot;</span> <span class="token operator">+</span>
          <span class="token string">&quot;orderTotalPrice,ordernumber) values(#{addressId},#{userId},&quot;</span> <span class="token operator">+</span>
          <span class="token string">&quot;#{createdAt},#{shopId},#{orderTotalPrice},#{ordernumber})&quot;</span><span class="token punctuation">)</span>
  <span class="token class-name">Integer</span> <span class="token function">insertOne</span><span class="token punctuation">(</span>
          <span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;addressId&quot;</span><span class="token punctuation">)</span>
          <span class="token class-name">Long</span> addressId<span class="token punctuation">,</span>
          <span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;userId&quot;</span><span class="token punctuation">)</span>
          <span class="token class-name">Long</span> userId<span class="token punctuation">,</span>
          <span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;createdAt&quot;</span><span class="token punctuation">)</span>
          <span class="token class-name">Date</span> createdAt<span class="token punctuation">,</span>
          <span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;shopId&quot;</span><span class="token punctuation">)</span>
          <span class="token class-name">Long</span> shopId<span class="token punctuation">,</span>
          <span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;orderTotalPrice&quot;</span><span class="token punctuation">)</span>
          <span class="token class-name">Float</span> orderTotalPrice<span class="token punctuation">,</span>
          <span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;ordernumber&quot;</span><span class="token punctuation">)</span>
          <span class="token class-name">String</span> ordernumber<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token annotation punctuation">@Insert</span><span class="token punctuation">(</span><span class="token string">&quot;insert into t_order(addressId, userId, createdAt,shopId,&quot;</span> <span class="token operator">+</span>
          <span class="token string">&quot;orderTotalPrice,ordernumber) values(#{order.address.addressId},&quot;</span> <span class="token operator">+</span>
          <span class="token string">&quot;#{order.user.userId},#{order.createdAt},#{order.shop.shopId},&quot;</span> <span class="token operator">+</span>
          <span class="token string">&quot;#{order.orderTotalPrice},#{order.ordernumber})&quot;</span><span class="token punctuation">)</span>
  <span class="token annotation punctuation">@Options</span><span class="token punctuation">(</span>useGeneratedKeys<span class="token operator">=</span><span class="token boolean">true</span><span class="token punctuation">,</span>keyColumn <span class="token operator">=</span> <span class="token string">&quot;orderId&quot;</span><span class="token punctuation">,</span>keyProperty <span class="token operator">=</span> <span class="token string">&quot;order.orderId&quot;</span><span class="token punctuation">)</span>
  <span class="token class-name">Integer</span> <span class="token function">insertOrder</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;order&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Order</span> order<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token annotation punctuation">@Update</span><span class="token punctuation">(</span><span class="token string">&quot;update t_order set orderTotalPrice = #{orderTotalPrice},&quot;</span> <span class="token operator">+</span>
          <span class="token string">&quot;ordernumber = #{ordernumber},addressId = #{addressId},&quot;</span> <span class="token operator">+</span>
          <span class="token string">&quot;isCanceled = #{isCanceled} where orderId = #{orderId}&quot;</span><span class="token punctuation">)</span>
  <span class="token class-name">Integer</span> <span class="token function">updateTotlePrice</span><span class="token punctuation">(</span>
                           <span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;orderTotalPrice&quot;</span><span class="token punctuation">)</span>
                           <span class="token class-name">Float</span> orderTotalPrice<span class="token punctuation">,</span>
                           <span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;ordernumber&quot;</span><span class="token punctuation">)</span>
                           <span class="token class-name">String</span> ordernumber<span class="token punctuation">,</span>
                           <span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;orderId&quot;</span><span class="token punctuation">)</span>
                           <span class="token class-name">Long</span> orderId<span class="token punctuation">,</span>
                           <span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;addressId&quot;</span><span class="token punctuation">)</span>
                           <span class="token class-name">Long</span> addressId<span class="token punctuation">,</span>
                           <span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;isCanceled&quot;</span><span class="token punctuation">)</span>
                           <span class="token class-name">String</span> isCanceled
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="orderservice-java-1" tabindex="-1"><a class="header-anchor" href="#orderservice-java-1" aria-hidden="true">#</a> OrderService.java</h3><p>\u67E5\u8BE2\u8D2D\u7269\u8F66\u7684\u4E1A\u52A1\u5904\u7406\u7C7B\u3002\u91CC\u9762\u63D0\u4F9B\u4E00\u4E2A\u4E1A\u52A1\u65B9\u6CD5 getMyCarrs\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OrderService</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token class-name">IOrderMapper</span> orderMapper<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token class-name">IOrderDetailMapper</span> orderDetailMapper<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Boolean</span> <span class="token function">buidOrder</span><span class="token punctuation">(</span><span class="token class-name">String</span> productIds<span class="token punctuation">,</span> <span class="token class-name">String</span> orderSaleses<span class="token punctuation">,</span>
                             <span class="token class-name">Float</span> totalPrice<span class="token punctuation">,</span> <span class="token class-name">Long</span> addressId<span class="token punctuation">,</span> <span class="token class-name">Long</span> userId<span class="token punctuation">,</span>
                             <span class="token class-name">Long</span> shopId<span class="token punctuation">,</span> <span class="token class-name">Long</span> carId<span class="token punctuation">,</span><span class="token class-name">String</span> isCanceled<span class="token punctuation">,</span><span class="token class-name">Order</span> order<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Long</span> orderId <span class="token operator">=</span> carId<span class="token punctuation">;</span>

        <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> productArr <span class="token operator">=</span> productIds<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot;,&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> saleseArr <span class="token operator">=</span> orderSaleses<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot;,&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


        <span class="token keyword">if</span><span class="token punctuation">(</span>orderId <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token comment">//\u63D2\u5165\u8BA2\u5355\u8868</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>addressId<span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token class-name">Address</span> address <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Address</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                address<span class="token punctuation">.</span><span class="token function">setAddressId</span><span class="token punctuation">(</span>addressId<span class="token punctuation">)</span><span class="token punctuation">;</span>
                order<span class="token punctuation">.</span><span class="token function">setAddress</span><span class="token punctuation">(</span>address<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            <span class="token class-name">User</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            user<span class="token punctuation">.</span><span class="token function">setUserId</span><span class="token punctuation">(</span>userId<span class="token punctuation">)</span><span class="token punctuation">;</span>
            order<span class="token punctuation">.</span><span class="token function">setUser</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
            order<span class="token punctuation">.</span><span class="token function">setCreatedAt</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">Shop</span> shop <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Shop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            shop<span class="token punctuation">.</span><span class="token function">setShopId</span><span class="token punctuation">(</span>shopId<span class="token punctuation">)</span><span class="token punctuation">;</span>
            order<span class="token punctuation">.</span><span class="token function">setShop</span><span class="token punctuation">(</span>shop<span class="token punctuation">)</span><span class="token punctuation">;</span>

            order<span class="token punctuation">.</span><span class="token function">setOrderTotalPrice</span><span class="token punctuation">(</span>totalPrice<span class="token punctuation">)</span><span class="token punctuation">;</span>


            order<span class="token punctuation">.</span><span class="token function">setIsCanceled</span><span class="token punctuation">(</span>isCanceled<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token class-name">Integer</span> updateRows <span class="token operator">=</span> orderMapper<span class="token punctuation">.</span><span class="token function">insertOrder</span><span class="token punctuation">(</span>order<span class="token punctuation">)</span><span class="token punctuation">;</span>
            orderId <span class="token operator">=</span> order<span class="token punctuation">.</span><span class="token function">getOrderId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>isCanceled<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token class-name">String</span> ordernumber <span class="token operator">=</span> userId <span class="token operator">+</span> <span class="token string">&quot;_&quot;</span> <span class="token operator">+</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                orderMapper<span class="token punctuation">.</span><span class="token function">updateTotlePrice</span><span class="token punctuation">(</span>totalPrice<span class="token punctuation">,</span>ordernumber<span class="token punctuation">,</span>orderId<span class="token punctuation">,</span>addressId<span class="token punctuation">,</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>

                orderMapper<span class="token punctuation">.</span><span class="token function">updateTotlePrice</span><span class="token punctuation">(</span>totalPrice<span class="token punctuation">,</span><span class="token keyword">null</span><span class="token punctuation">,</span>orderId<span class="token punctuation">,</span><span class="token keyword">null</span><span class="token punctuation">,</span>isCanceled<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token comment">//\u6E05\u7A7Adetail\u8868\u51C6\u5907\u91CD\u65B0\u63D2\u5165</span>
            orderDetailMapper<span class="token punctuation">.</span><span class="token function">deleteByOrderId</span><span class="token punctuation">(</span>orderId<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">//\u5FAA\u73AF\u63D2\u5165\u8BA2\u5355\u7EC6\u8282\u8868</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> productArr<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">String</span> productId <span class="token operator">=</span> productArr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token class-name">String</span> orderSales <span class="token operator">=</span> saleseArr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token class-name">Integer</span> updaterows <span class="token operator">=</span> orderDetailMapper<span class="token punctuation">.</span><span class="token function">insertOne</span><span class="token punctuation">(</span>productId<span class="token punctuation">,</span> orderSales<span class="token punctuation">,</span> orderId<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="ordercontroller-java-1" tabindex="-1"><a class="header-anchor" href="#ordercontroller-java-1" aria-hidden="true">#</a> OrderController.java</h3><p>\u8FD9\u662F\u4E00\u4E2A\u5BF9\u5916\u63D0\u4F9B Rest \u670D\u52A1\u7684\u63A5\u53E3\u7C7B\uFF0C\u63A5\u6536\u7528\u6237\u8BF7\u6C42\u3002\u4F20\u5165 userId\uFF0C\u628A\u67E5\u8BE2\u51FA\u6765\u7684\u8D2D\u7269\u8F66\u4FE1\u606F\u4EE5 JSON \u7684\u5F62\u5F0F\u54CD\u5E94\u7ED9\u5BA2\u6237\u7AEF\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@RestController</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OrderController</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token class-name">OrderService</span> orderService<span class="token punctuation">;</span>

    <span class="token comment">//\u6DFB\u52A0\u8D2D\u7269\u8F66</span>
    <span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/addMyCar&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span>  <span class="token function">addMyCar</span><span class="token punctuation">(</span><span class="token class-name">String</span> productIds<span class="token punctuation">,</span> <span class="token class-name">String</span> orderSaleses<span class="token punctuation">,</span>
                                         <span class="token class-name">Float</span> totalPrice<span class="token punctuation">,</span><span class="token class-name">Long</span> userId<span class="token punctuation">,</span><span class="token class-name">Long</span> shopId<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Boolean</span> isbuided <span class="token operator">=</span> orderService<span class="token punctuation">.</span><span class="token function">buidOrder</span><span class="token punctuation">(</span>productIds<span class="token punctuation">,</span> orderSaleses<span class="token punctuation">,</span>totalPrice<span class="token punctuation">,</span>
                <span class="token keyword">null</span><span class="token punctuation">,</span>userId<span class="token punctuation">,</span>shopId<span class="token punctuation">,</span><span class="token keyword">null</span><span class="token punctuation">,</span><span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token class-name">Order</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>isbuided <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;state&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;success&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;state&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;error&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;message&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;\u6DFB\u52A0\u8D2D\u7269\u8F66\u5931\u8D25&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span>  map<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u4FEE\u6539\u8D2D\u7269\u8F66</span>
    <span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/updateMyCar&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span>  <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> <span class="token function">updateMyCar</span><span class="token punctuation">(</span><span class="token class-name">String</span> productIds<span class="token punctuation">,</span> <span class="token class-name">String</span> orderSaleses<span class="token punctuation">,</span>
                                           <span class="token class-name">Float</span> totalPrice<span class="token punctuation">,</span><span class="token class-name">Long</span> carId<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Boolean</span> isbuided <span class="token operator">=</span> orderService<span class="token punctuation">.</span><span class="token function">buidOrder</span><span class="token punctuation">(</span>productIds<span class="token punctuation">,</span> orderSaleses<span class="token punctuation">,</span>totalPrice<span class="token punctuation">,</span>
                <span class="token keyword">null</span><span class="token punctuation">,</span><span class="token keyword">null</span><span class="token punctuation">,</span><span class="token keyword">null</span><span class="token punctuation">,</span>carId<span class="token punctuation">,</span><span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token class-name">Order</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>isbuided <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;state&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;success&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;state&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;error&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;message&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;\u4FEE\u6539\u8D2D\u7269\u8F66\u5931\u8D25&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span>  map<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>


    <span class="token comment">//\u751F\u6210\u8BA2\u5355</span>
    <span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/buidOrder&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span>  <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> <span class="token function">buidOrder</span><span class="token punctuation">(</span><span class="token class-name">String</span> productIds<span class="token punctuation">,</span> <span class="token class-name">String</span> orderSaleses<span class="token punctuation">,</span>
                                         <span class="token class-name">Float</span> totalPrice<span class="token punctuation">,</span><span class="token class-name">Long</span> addressId<span class="token punctuation">,</span>
                                         <span class="token class-name">Long</span> userId<span class="token punctuation">,</span><span class="token class-name">Long</span> shopId<span class="token punctuation">,</span><span class="token class-name">Long</span> carId<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Order</span> order <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Order</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Boolean</span> isbuided <span class="token operator">=</span> orderService<span class="token punctuation">.</span><span class="token function">buidOrder</span><span class="token punctuation">(</span>productIds<span class="token punctuation">,</span> orderSaleses<span class="token punctuation">,</span>
                totalPrice<span class="token punctuation">,</span>addressId<span class="token punctuation">,</span>userId<span class="token punctuation">,</span>shopId<span class="token punctuation">,</span>carId<span class="token punctuation">,</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span>order<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>isbuided <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;state&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;success&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;data&quot;</span><span class="token punctuation">,</span>order<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;state&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;error&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;message&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;\u8BA2\u5355\u751F\u6210\u5931\u8D25&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span>  map<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,47),o=[e];function c(u,l){return s(),a("div",null,o)}const k=n(p,[["render",c],["__file","7-\u8BA2\u5355\u6A21\u5757.html.vue"]]);export{k as default};
